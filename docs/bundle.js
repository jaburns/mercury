!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.width=t,this.height=e,this.vals=new Array(t*e)}return t.prototype.write=function(t,e,r){this.vals[t+e*this.width]=r},t.prototype.at=function(t,e){return this.vals[t+e*this.width]},t.prototype.copyFrom=function(t){for(var e=0;e<this.width&&e<t.width;++e)for(var r=0;r<this.height&&r<t.height;++r)this.write(e,r,t.at(e,r))},t}();e.WriteGrid=n,e.GridTool={find:function(t,e){for(var r=0;r<t.width;++r)for(var n=0;n<t.height;++n)if(e(r,n,t.at(r,n)))return{x:r,y:n};return null},forEach:function(t,e){for(var r=0;r<t.width;++r)for(var n=0;n<t.height;++n)e(r,n,t.at(r,n))},map:function(t,e){for(var r=new n(t.width,t.height),o=0;o<t.width;++o)for(var i=0;i<t.height;++i)r.write(o,i,e(o,i,t.at(o,i)));return r}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={"vector-caves":r(2).initPost};window.initPost=function(t){return n[t]()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(3),i=r(5),a=function(t,e,r,n,o,i){if(e<0||r<0)return i;if(e>=t.width||r>=t.height)return i;var u=t.at(e,r);return u===o?i:u!==n?i:(t.write(e,r,o),i=a(t,e-1,r,n,o,++i),i=a(t,e+1,r,n,o,i),i=a(t,e,r-1,n,o,i),i=a(t,e,r+1,n,o,i))};e.initPost=function(){var t,e,r=document.getElementById("first-canvas").getContext("2d"),u=document.getElementById("seed-slider"),f=document.getElementById("pop-slider"),c=document.getElementById("gen-slider"),l=document.getElementById("second-canvas").getContext("2d"),d=document.getElementById("third-canvas").getContext("2d"),s=document.getElementById("fourth-canvas").getContext("2d"),h=function(){var t=o.runCellularAutomaton(75,75,parseInt(u.value),parseFloat(f.value),5,4,parseInt(c.value));n.GridTool.forEach(t,function(t,e,n){r.fillStyle=n?"#000":"#FFF",r.fillRect(4*t,4*e,4,4)});var e=n.GridTool.map(t,function(t,e,r){return r?-1:0}),h=function(t){for(var e=1,r=-1,o=0;;){var i=n.GridTool.find(t,function(t,e,r){return 0===r});if(null===i)return r;var u=a(t,i.x,i.y,0,e,0);u>o&&(o=u,r=e),e++}}(e);n.GridTool.forEach(e,function(t,e,r){l.fillStyle=function(t){if(t<0)return"#000";switch(t%6){case 0:return"#F00";case 1:return"#0F0";case 2:return"#00F";case 3:return"#0FF";case 4:return"#F0F";case 5:return"#FF0"}return""}(r),l.fillRect(4*t,4*e,4,4)});var v=n.GridTool.map(e,function(t,e,r){return r!==h});n.GridTool.forEach(v,function(t,e,r){d.fillStyle=r?"#000":"#FFF",d.fillRect(4*t,4*e,4,4)});var p=i.markEdges(v);n.GridTool.forEach(p,function(t,e,r){s.fillStyle="edge"===r.kind?function(t){var e=Math.cos(t*Math.PI/180),r=Math.sin(t*Math.PI/180),n=Math.round(15*(.5*e+.5)),o=Math.round(15*(.5*r+.5));return"#"+n.toString(16)+o.toString(16)+"f"}(r.normal):"air"===r.kind?"#655":"#77f",s.fillRect(4*t,4*e,4,4)})};t=["oninput","onchange"],e=h,[f,c,u].forEach(function(r){t.forEach(function(t){r[t]=e})}),h()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),o=r(0),i=function(t,e,r){for(var n=0,o=e-1;o<=e+1;++o)for(var i=r-1;i<=r+1;++i)o==e&&i==r||(o<1||i<1||o>=t.width-1||i>=t.height-1?n++:n+=t.at(o,i)?1:0);return n};e.runCellularAutomaton=function(t,e,r,a,u,f,c){for(var l=new o.WriteGrid(t,e),d=new o.WriteGrid(t,e),s=n.nextRandom01(r/101),h=0;h<t;++h)for(var v=0;v<e;++v){var p=0===h||0===v||h===t-1||v===e-1||s<a;l.write(h,v,p),d.write(h,v,p),s=n.nextRandom01(s)}for(var m=0;m<c;++m){for(h=1;h<t-1;++h)for(v=1;v<e-1;++v){var y=i(l,h,v);d.write(h,v,y>=(l.at(h,v)?f:u))}l.copyFrom(d)}return l}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=4294967296;e.nextRandom01=function(t){return(1664525*Math.floor(t*n)+1013904223)%n/n}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=r(0);e.markEdges=function(t){for(var e=o.GridTool.map(t,function(t,e,r){return{kind:r?"dirt":"air",normal:0}}),r=0;r<t.width;r++)for(var n=0;n<t.height;n++)if(t.at(r,n)){var i=r>0&&!t.at(r-1,n),a=r<t.width-2&&!t.at(r+1,n),u=n>0&&!t.at(r,n-1),f=n<t.height-2&&!t.at(r,n+1);if(i||a||u||f){var c=a&&f?45:f&&i?135:i&&u?-135:u&&a?-45:a?0:f?90:i?180:-90;e.write(r,n,{kind:"edge",normal:c})}}return e},function(t){t[t.Unwalked=0]="Unwalked",t[t.Walked=1]="Walked",t[t.WalkedImportant=2]="WalkedImportant"}(n||(n={}))}]);
//# sourceMappingURL=bundle.js.map