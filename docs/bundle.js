!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=18)}([function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"EPSILON",function(){return h}),r.d(e,"ARRAY_TYPE",function(){return v}),r.d(e,"RANDOM",function(){return p}),r.d(e,"setMatrixArrayType",function(){return m}),r.d(e,"toRadian",function(){return b}),r.d(e,"equals",function(){return g});var o={};r.r(o),r.d(o,"create",function(){return x}),r.d(o,"clone",function(){return y}),r.d(o,"copy",function(){return _}),r.d(o,"identity",function(){return R}),r.d(o,"fromValues",function(){return E}),r.d(o,"set",function(){return A}),r.d(o,"transpose",function(){return w}),r.d(o,"invert",function(){return T}),r.d(o,"adjoint",function(){return S}),r.d(o,"determinant",function(){return P}),r.d(o,"multiply",function(){return B}),r.d(o,"rotate",function(){return j}),r.d(o,"scale",function(){return F}),r.d(o,"fromRotation",function(){return I}),r.d(o,"fromScaling",function(){return D}),r.d(o,"str",function(){return k}),r.d(o,"frob",function(){return U}),r.d(o,"LDU",function(){return C}),r.d(o,"add",function(){return L}),r.d(o,"subtract",function(){return O}),r.d(o,"exactEquals",function(){return G}),r.d(o,"equals",function(){return z}),r.d(o,"multiplyScalar",function(){return q}),r.d(o,"multiplyScalarAndAdd",function(){return N}),r.d(o,"mul",function(){return V}),r.d(o,"sub",function(){return X});var u={};r.r(u),r.d(u,"create",function(){return W}),r.d(u,"clone",function(){return Y}),r.d(u,"copy",function(){return Q}),r.d(u,"identity",function(){return H}),r.d(u,"fromValues",function(){return Z}),r.d(u,"set",function(){return $}),r.d(u,"invert",function(){return K}),r.d(u,"determinant",function(){return J}),r.d(u,"multiply",function(){return tt}),r.d(u,"rotate",function(){return nt}),r.d(u,"scale",function(){return rt}),r.d(u,"translate",function(){return et}),r.d(u,"fromRotation",function(){return ot}),r.d(u,"fromScaling",function(){return ut}),r.d(u,"fromTranslation",function(){return at}),r.d(u,"str",function(){return it}),r.d(u,"frob",function(){return ct}),r.d(u,"add",function(){return ft}),r.d(u,"subtract",function(){return st}),r.d(u,"multiplyScalar",function(){return lt}),r.d(u,"multiplyScalarAndAdd",function(){return dt}),r.d(u,"exactEquals",function(){return ht}),r.d(u,"equals",function(){return vt}),r.d(u,"mul",function(){return pt}),r.d(u,"sub",function(){return mt});var a={};r.r(a),r.d(a,"create",function(){return Mt}),r.d(a,"fromMat4",function(){return bt}),r.d(a,"clone",function(){return gt}),r.d(a,"copy",function(){return xt}),r.d(a,"fromValues",function(){return yt}),r.d(a,"set",function(){return _t}),r.d(a,"identity",function(){return Rt}),r.d(a,"transpose",function(){return Et}),r.d(a,"invert",function(){return At}),r.d(a,"adjoint",function(){return wt}),r.d(a,"determinant",function(){return Tt}),r.d(a,"multiply",function(){return St}),r.d(a,"translate",function(){return Pt}),r.d(a,"rotate",function(){return Bt}),r.d(a,"scale",function(){return jt}),r.d(a,"fromTranslation",function(){return Ft}),r.d(a,"fromRotation",function(){return It}),r.d(a,"fromScaling",function(){return Dt}),r.d(a,"fromMat2d",function(){return kt}),r.d(a,"fromQuat",function(){return Ut}),r.d(a,"normalFromMat4",function(){return Ct}),r.d(a,"projection",function(){return Lt}),r.d(a,"str",function(){return Ot}),r.d(a,"frob",function(){return Gt}),r.d(a,"add",function(){return zt}),r.d(a,"subtract",function(){return qt}),r.d(a,"multiplyScalar",function(){return Nt}),r.d(a,"multiplyScalarAndAdd",function(){return Vt}),r.d(a,"exactEquals",function(){return Xt}),r.d(a,"equals",function(){return Wt}),r.d(a,"mul",function(){return Yt}),r.d(a,"sub",function(){return Qt});var i={};r.r(i),r.d(i,"create",function(){return Ht}),r.d(i,"clone",function(){return Zt}),r.d(i,"copy",function(){return $t}),r.d(i,"fromValues",function(){return Kt}),r.d(i,"set",function(){return Jt}),r.d(i,"identity",function(){return tn}),r.d(i,"transpose",function(){return nn}),r.d(i,"invert",function(){return rn}),r.d(i,"adjoint",function(){return en}),r.d(i,"determinant",function(){return on}),r.d(i,"multiply",function(){return un}),r.d(i,"translate",function(){return an}),r.d(i,"scale",function(){return cn}),r.d(i,"rotate",function(){return fn}),r.d(i,"rotateX",function(){return sn}),r.d(i,"rotateY",function(){return ln}),r.d(i,"rotateZ",function(){return dn}),r.d(i,"fromTranslation",function(){return hn}),r.d(i,"fromScaling",function(){return vn}),r.d(i,"fromRotation",function(){return pn}),r.d(i,"fromXRotation",function(){return mn}),r.d(i,"fromYRotation",function(){return Mn}),r.d(i,"fromZRotation",function(){return bn}),r.d(i,"fromRotationTranslation",function(){return gn}),r.d(i,"fromQuat2",function(){return xn}),r.d(i,"getTranslation",function(){return yn}),r.d(i,"getScaling",function(){return _n}),r.d(i,"getRotation",function(){return Rn}),r.d(i,"fromRotationTranslationScale",function(){return En}),r.d(i,"fromRotationTranslationScaleOrigin",function(){return An}),r.d(i,"fromQuat",function(){return wn}),r.d(i,"frustum",function(){return Tn}),r.d(i,"perspective",function(){return Sn}),r.d(i,"perspectiveFromFieldOfView",function(){return Pn}),r.d(i,"ortho",function(){return Bn}),r.d(i,"lookAt",function(){return jn}),r.d(i,"targetTo",function(){return Fn}),r.d(i,"str",function(){return In}),r.d(i,"frob",function(){return Dn}),r.d(i,"add",function(){return kn}),r.d(i,"subtract",function(){return Un}),r.d(i,"multiplyScalar",function(){return Cn}),r.d(i,"multiplyScalarAndAdd",function(){return Ln}),r.d(i,"exactEquals",function(){return On}),r.d(i,"equals",function(){return Gn}),r.d(i,"mul",function(){return zn}),r.d(i,"sub",function(){return qn});var c={};r.r(c),r.d(c,"create",function(){return Nn}),r.d(c,"clone",function(){return Vn}),r.d(c,"length",function(){return Xn}),r.d(c,"fromValues",function(){return Wn}),r.d(c,"copy",function(){return Yn}),r.d(c,"set",function(){return Qn}),r.d(c,"add",function(){return Hn}),r.d(c,"subtract",function(){return Zn}),r.d(c,"multiply",function(){return $n}),r.d(c,"divide",function(){return Kn}),r.d(c,"ceil",function(){return Jn}),r.d(c,"floor",function(){return tr}),r.d(c,"min",function(){return nr}),r.d(c,"max",function(){return rr}),r.d(c,"round",function(){return er}),r.d(c,"scale",function(){return or}),r.d(c,"scaleAndAdd",function(){return ur}),r.d(c,"distance",function(){return ar}),r.d(c,"squaredDistance",function(){return ir}),r.d(c,"squaredLength",function(){return cr}),r.d(c,"negate",function(){return fr}),r.d(c,"inverse",function(){return sr}),r.d(c,"normalize",function(){return lr}),r.d(c,"dot",function(){return dr}),r.d(c,"cross",function(){return hr}),r.d(c,"lerp",function(){return vr}),r.d(c,"hermite",function(){return pr}),r.d(c,"bezier",function(){return mr}),r.d(c,"random",function(){return Mr}),r.d(c,"transformMat4",function(){return br}),r.d(c,"transformMat3",function(){return gr}),r.d(c,"transformQuat",function(){return xr}),r.d(c,"rotateX",function(){return yr}),r.d(c,"rotateY",function(){return _r}),r.d(c,"rotateZ",function(){return Rr}),r.d(c,"angle",function(){return Er}),r.d(c,"zero",function(){return Ar}),r.d(c,"str",function(){return wr}),r.d(c,"exactEquals",function(){return Tr}),r.d(c,"equals",function(){return Sr}),r.d(c,"sub",function(){return Br}),r.d(c,"mul",function(){return jr}),r.d(c,"div",function(){return Fr}),r.d(c,"dist",function(){return Ir}),r.d(c,"sqrDist",function(){return Dr}),r.d(c,"len",function(){return kr}),r.d(c,"sqrLen",function(){return Ur}),r.d(c,"forEach",function(){return Cr});var f={};r.r(f),r.d(f,"create",function(){return Lr}),r.d(f,"clone",function(){return Or}),r.d(f,"fromValues",function(){return Gr}),r.d(f,"copy",function(){return zr}),r.d(f,"set",function(){return qr}),r.d(f,"add",function(){return Nr}),r.d(f,"subtract",function(){return Vr}),r.d(f,"multiply",function(){return Xr}),r.d(f,"divide",function(){return Wr}),r.d(f,"ceil",function(){return Yr}),r.d(f,"floor",function(){return Qr}),r.d(f,"min",function(){return Hr}),r.d(f,"max",function(){return Zr}),r.d(f,"round",function(){return $r}),r.d(f,"scale",function(){return Kr}),r.d(f,"scaleAndAdd",function(){return Jr}),r.d(f,"distance",function(){return te}),r.d(f,"squaredDistance",function(){return ne}),r.d(f,"length",function(){return re}),r.d(f,"squaredLength",function(){return ee}),r.d(f,"negate",function(){return oe}),r.d(f,"inverse",function(){return ue}),r.d(f,"normalize",function(){return ae}),r.d(f,"dot",function(){return ie}),r.d(f,"cross",function(){return ce}),r.d(f,"lerp",function(){return fe}),r.d(f,"random",function(){return se}),r.d(f,"transformMat4",function(){return le}),r.d(f,"transformQuat",function(){return de}),r.d(f,"zero",function(){return he}),r.d(f,"str",function(){return ve}),r.d(f,"exactEquals",function(){return pe}),r.d(f,"equals",function(){return me}),r.d(f,"sub",function(){return Me}),r.d(f,"mul",function(){return be}),r.d(f,"div",function(){return ge}),r.d(f,"dist",function(){return xe}),r.d(f,"sqrDist",function(){return ye}),r.d(f,"len",function(){return _e}),r.d(f,"sqrLen",function(){return Re}),r.d(f,"forEach",function(){return Ee});var s={};r.r(s),r.d(s,"create",function(){return Ae}),r.d(s,"identity",function(){return we}),r.d(s,"setAxisAngle",function(){return Te}),r.d(s,"getAxisAngle",function(){return Se}),r.d(s,"multiply",function(){return Pe}),r.d(s,"rotateX",function(){return Be}),r.d(s,"rotateY",function(){return je}),r.d(s,"rotateZ",function(){return Fe}),r.d(s,"calculateW",function(){return Ie}),r.d(s,"slerp",function(){return De}),r.d(s,"random",function(){return ke}),r.d(s,"invert",function(){return Ue}),r.d(s,"conjugate",function(){return Ce}),r.d(s,"fromMat3",function(){return Le}),r.d(s,"fromEuler",function(){return Oe}),r.d(s,"str",function(){return Ge}),r.d(s,"clone",function(){return Ye}),r.d(s,"fromValues",function(){return Qe}),r.d(s,"copy",function(){return He}),r.d(s,"set",function(){return Ze}),r.d(s,"add",function(){return $e}),r.d(s,"mul",function(){return Ke}),r.d(s,"scale",function(){return Je}),r.d(s,"dot",function(){return to}),r.d(s,"lerp",function(){return no}),r.d(s,"length",function(){return ro}),r.d(s,"len",function(){return eo}),r.d(s,"squaredLength",function(){return oo}),r.d(s,"sqrLen",function(){return uo}),r.d(s,"normalize",function(){return ao}),r.d(s,"exactEquals",function(){return io}),r.d(s,"equals",function(){return co}),r.d(s,"rotationTo",function(){return fo}),r.d(s,"sqlerp",function(){return so}),r.d(s,"setAxes",function(){return lo});var l={};r.r(l),r.d(l,"create",function(){return ho}),r.d(l,"clone",function(){return vo}),r.d(l,"fromValues",function(){return po}),r.d(l,"fromRotationTranslationValues",function(){return mo}),r.d(l,"fromRotationTranslation",function(){return Mo}),r.d(l,"fromTranslation",function(){return bo}),r.d(l,"fromRotation",function(){return go}),r.d(l,"fromMat4",function(){return xo}),r.d(l,"copy",function(){return yo}),r.d(l,"identity",function(){return _o}),r.d(l,"set",function(){return Ro}),r.d(l,"getReal",function(){return Eo}),r.d(l,"getDual",function(){return Ao}),r.d(l,"setReal",function(){return wo}),r.d(l,"setDual",function(){return To}),r.d(l,"getTranslation",function(){return So}),r.d(l,"translate",function(){return Po}),r.d(l,"rotateX",function(){return Bo}),r.d(l,"rotateY",function(){return jo}),r.d(l,"rotateZ",function(){return Fo}),r.d(l,"rotateByQuatAppend",function(){return Io}),r.d(l,"rotateByQuatPrepend",function(){return Do}),r.d(l,"rotateAroundAxis",function(){return ko}),r.d(l,"add",function(){return Uo}),r.d(l,"multiply",function(){return Co}),r.d(l,"mul",function(){return Lo}),r.d(l,"scale",function(){return Oo}),r.d(l,"dot",function(){return Go}),r.d(l,"lerp",function(){return zo}),r.d(l,"invert",function(){return qo}),r.d(l,"conjugate",function(){return No}),r.d(l,"length",function(){return Vo}),r.d(l,"len",function(){return Xo}),r.d(l,"squaredLength",function(){return Wo}),r.d(l,"sqrLen",function(){return Yo}),r.d(l,"normalize",function(){return Qo}),r.d(l,"str",function(){return Ho}),r.d(l,"exactEquals",function(){return Zo}),r.d(l,"equals",function(){return $o});var d={};r.r(d),r.d(d,"create",function(){return Ko}),r.d(d,"clone",function(){return Jo}),r.d(d,"fromValues",function(){return tu}),r.d(d,"copy",function(){return nu}),r.d(d,"set",function(){return ru}),r.d(d,"add",function(){return eu}),r.d(d,"subtract",function(){return ou}),r.d(d,"multiply",function(){return uu}),r.d(d,"divide",function(){return au}),r.d(d,"ceil",function(){return iu}),r.d(d,"floor",function(){return cu}),r.d(d,"min",function(){return fu}),r.d(d,"max",function(){return su}),r.d(d,"round",function(){return lu}),r.d(d,"scale",function(){return du}),r.d(d,"scaleAndAdd",function(){return hu}),r.d(d,"distance",function(){return vu}),r.d(d,"squaredDistance",function(){return pu}),r.d(d,"length",function(){return mu}),r.d(d,"squaredLength",function(){return Mu}),r.d(d,"negate",function(){return bu}),r.d(d,"inverse",function(){return gu}),r.d(d,"normalize",function(){return xu}),r.d(d,"dot",function(){return yu}),r.d(d,"cross",function(){return _u}),r.d(d,"lerp",function(){return Ru}),r.d(d,"random",function(){return Eu}),r.d(d,"transformMat2",function(){return Au}),r.d(d,"transformMat2d",function(){return wu}),r.d(d,"transformMat3",function(){return Tu}),r.d(d,"transformMat4",function(){return Su}),r.d(d,"rotate",function(){return Pu}),r.d(d,"angle",function(){return Bu}),r.d(d,"zero",function(){return ju}),r.d(d,"str",function(){return Fu}),r.d(d,"exactEquals",function(){return Iu}),r.d(d,"equals",function(){return Du}),r.d(d,"len",function(){return ku}),r.d(d,"sub",function(){return Uu}),r.d(d,"mul",function(){return Cu}),r.d(d,"div",function(){return Lu}),r.d(d,"dist",function(){return Ou}),r.d(d,"sqrDist",function(){return Gu}),r.d(d,"sqrLen",function(){return zu}),r.d(d,"forEach",function(){return qu});var h=1e-6,v="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;function m(t){v=t}var M=Math.PI/180;function b(t){return t*M}function g(t,n){return Math.abs(t-n)<=h*Math.max(1,Math.abs(t),Math.abs(n))}function x(){var t=new v(4);return v!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function y(t){var n=new v(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function _(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function R(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function E(t,n,r,e){var o=new v(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=e,o}function A(t,n,r,e,o){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t}function w(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t}function T(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=r*u-o*e;return a?(a=1/a,t[0]=u*a,t[1]=-e*a,t[2]=-o*a,t[3]=r*a,t):null}function S(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t}function P(t){return t[0]*t[3]-t[2]*t[1]}function B(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*i+u*c,t[1]=o*i+a*c,t[2]=e*f+u*s,t[3]=o*f+a*s,t}function j(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+u*i,t[1]=o*c+a*i,t[2]=e*-i+u*c,t[3]=o*-i+a*c,t}function F(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=r[0],c=r[1];return t[0]=e*i,t[1]=o*i,t[2]=u*c,t[3]=a*c,t}function I(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t}function D(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t}function k(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function U(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function C(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]}function L(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function O(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function G(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function z(t,n){var r=t[0],e=t[1],o=t[2],u=t[3],a=n[0],i=n[1],c=n[2],f=n[3];return Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(e-i)<=h*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(u-f)<=h*Math.max(1,Math.abs(u),Math.abs(f))}function q(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function N(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t}var V=B,X=O;function W(){var t=new v(6);return v!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Y(t){var n=new v(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function Q(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function H(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,n,r,e,o,u){var a=new v(6);return a[0]=t,a[1]=n,a[2]=r,a[3]=e,a[4]=o,a[5]=u,a}function $(t,n,r,e,o,u,a){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=u,t[5]=a,t}function K(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],i=n[5],c=r*u-e*o;return c?(c=1/c,t[0]=u*c,t[1]=-e*c,t[2]=-o*c,t[3]=r*c,t[4]=(o*i-u*a)*c,t[5]=(e*a-r*i)*c,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=r[0],s=r[1],l=r[2],d=r[3],h=r[4],v=r[5];return t[0]=e*f+u*s,t[1]=o*f+a*s,t[2]=e*l+u*d,t[3]=o*l+a*d,t[4]=e*h+u*v+i,t[5]=o*h+a*v+c,t}function nt(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=Math.sin(r),s=Math.cos(r);return t[0]=e*s+u*f,t[1]=o*s+a*f,t[2]=e*-f+u*s,t[3]=o*-f+a*s,t[4]=i,t[5]=c,t}function rt(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e*f,t[1]=o*f,t[2]=u*s,t[3]=a*s,t[4]=i,t[5]=c,t}function et(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e,t[1]=o,t[2]=u,t[3]=a,t[4]=e*f+u*s+i,t[5]=o*f+a*s+c,t}function ot(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t[4]=0,t[5]=0,t}function ut(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t}function at(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t}function it(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ct(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ft(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t}function st(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t}function lt(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t}function dt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t}function ht(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]}function vt(t,n){var r=t[0],e=t[1],o=t[2],u=t[3],a=t[4],i=t[5],c=n[0],f=n[1],s=n[2],l=n[3],d=n[4],v=n[5];return Math.abs(r-c)<=h*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(e-f)<=h*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-s)<=h*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(u-l)<=h*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(a-d)<=h*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-v)<=h*Math.max(1,Math.abs(i),Math.abs(v))}var pt=tt,mt=st;function Mt(){var t=new v(9);return v!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function gt(t){var n=new v(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function xt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function yt(t,n,r,e,o,u,a,i,c){var f=new v(9);return f[0]=t,f[1]=n,f[2]=r,f[3]=e,f[4]=o,f[5]=u,f[6]=a,f[7]=i,f[8]=c,f}function _t(t,n,r,e,o,u,a,i,c,f){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=u,t[5]=a,t[6]=i,t[7]=c,t[8]=f,t}function Rt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Et(t,n){if(t===n){var r=n[1],e=n[2],o=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=e,t[7]=o}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function At(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],i=n[5],c=n[6],f=n[7],s=n[8],l=s*a-i*f,d=-s*u+i*c,h=f*u-a*c,v=r*l+e*d+o*h;return v?(v=1/v,t[0]=l*v,t[1]=(-s*e+o*f)*v,t[2]=(i*e-o*a)*v,t[3]=d*v,t[4]=(s*r-o*c)*v,t[5]=(-i*r+o*u)*v,t[6]=h*v,t[7]=(-f*r+e*c)*v,t[8]=(a*r-e*u)*v,t):null}function wt(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],i=n[5],c=n[6],f=n[7],s=n[8];return t[0]=a*s-i*f,t[1]=o*f-e*s,t[2]=e*i-o*a,t[3]=i*c-u*s,t[4]=r*s-o*c,t[5]=o*u-r*i,t[6]=u*f-a*c,t[7]=e*c-r*f,t[8]=r*a-e*u,t}function Tt(t){var n=t[0],r=t[1],e=t[2],o=t[3],u=t[4],a=t[5],i=t[6],c=t[7],f=t[8];return n*(f*u-a*c)+r*(-f*o+a*i)+e*(c*o-u*i)}function St(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=r[0],h=r[1],v=r[2],p=r[3],m=r[4],M=r[5],b=r[6],g=r[7],x=r[8];return t[0]=d*e+h*a+v*f,t[1]=d*o+h*i+v*s,t[2]=d*u+h*c+v*l,t[3]=p*e+m*a+M*f,t[4]=p*o+m*i+M*s,t[5]=p*u+m*c+M*l,t[6]=b*e+g*a+x*f,t[7]=b*o+g*i+x*s,t[8]=b*u+g*c+x*l,t}function Pt(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=r[0],h=r[1];return t[0]=e,t[1]=o,t[2]=u,t[3]=a,t[4]=i,t[5]=c,t[6]=d*e+h*a+f,t[7]=d*o+h*i+s,t[8]=d*u+h*c+l,t}function Bt(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*e+d*a,t[1]=h*o+d*i,t[2]=h*u+d*c,t[3]=h*a-d*e,t[4]=h*i-d*o,t[5]=h*c-d*u,t[6]=f,t[7]=s,t[8]=l,t}function jt(t,n,r){var e=r[0],o=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function Ft(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function It(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Dt(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t}function Ut(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=r+r,i=e+e,c=o+o,f=r*a,s=e*a,l=e*i,d=o*a,h=o*i,v=o*c,p=u*a,m=u*i,M=u*c;return t[0]=1-l-v,t[3]=s-M,t[6]=d+m,t[1]=s+M,t[4]=1-f-v,t[7]=h-p,t[2]=d-m,t[5]=h+p,t[8]=1-f-l,t}function Ct(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],i=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],h=n[11],v=n[12],p=n[13],m=n[14],M=n[15],b=r*i-e*a,g=r*c-o*a,x=r*f-u*a,y=e*c-o*i,_=e*f-u*i,R=o*f-u*c,E=s*p-l*v,A=s*m-d*v,w=s*M-h*v,T=l*m-d*p,S=l*M-h*p,P=d*M-h*m,B=b*P-g*S+x*T+y*w-_*A+R*E;return B?(B=1/B,t[0]=(i*P-c*S+f*T)*B,t[1]=(c*w-a*P-f*A)*B,t[2]=(a*S-i*w+f*E)*B,t[3]=(o*S-e*P-u*T)*B,t[4]=(r*P-o*w+u*A)*B,t[5]=(e*w-r*S-u*E)*B,t[6]=(p*R-m*_+M*y)*B,t[7]=(m*x-v*R-M*g)*B,t[8]=(v*_-p*x+M*b)*B,t):null}function Lt(t,n,r){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ot(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Gt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function zt(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t}function qt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t}function Nt(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t}function Vt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t}function Xt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]}function Wt(t,n){var r=t[0],e=t[1],o=t[2],u=t[3],a=t[4],i=t[5],c=t[6],f=t[7],s=t[8],l=n[0],d=n[1],v=n[2],p=n[3],m=n[4],M=n[5],b=n[6],g=n[7],x=n[8];return Math.abs(r-l)<=h*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(e-d)<=h*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(o-v)<=h*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-p)<=h*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(a-m)<=h*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-M)<=h*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(c-b)<=h*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-g)<=h*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(s-x)<=h*Math.max(1,Math.abs(s),Math.abs(x))}var Yt=St,Qt=qt;function Ht(){var t=new v(16);return v!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var n=new v(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function $t(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function Kt(t,n,r,e,o,u,a,i,c,f,s,l,d,h,p,m){var M=new v(16);return M[0]=t,M[1]=n,M[2]=r,M[3]=e,M[4]=o,M[5]=u,M[6]=a,M[7]=i,M[8]=c,M[9]=f,M[10]=s,M[11]=l,M[12]=d,M[13]=h,M[14]=p,M[15]=m,M}function Jt(t,n,r,e,o,u,a,i,c,f,s,l,d,h,v,p,m){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=u,t[5]=a,t[6]=i,t[7]=c,t[8]=f,t[9]=s,t[10]=l,t[11]=d,t[12]=h,t[13]=v,t[14]=p,t[15]=m,t}function tn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nn(t,n){if(t===n){var r=n[1],e=n[2],o=n[3],u=n[6],a=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=u,t[11]=n[14],t[12]=o,t[13]=a,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function rn(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],i=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],h=n[11],v=n[12],p=n[13],m=n[14],M=n[15],b=r*i-e*a,g=r*c-o*a,x=r*f-u*a,y=e*c-o*i,_=e*f-u*i,R=o*f-u*c,E=s*p-l*v,A=s*m-d*v,w=s*M-h*v,T=l*m-d*p,S=l*M-h*p,P=d*M-h*m,B=b*P-g*S+x*T+y*w-_*A+R*E;return B?(B=1/B,t[0]=(i*P-c*S+f*T)*B,t[1]=(o*S-e*P-u*T)*B,t[2]=(p*R-m*_+M*y)*B,t[3]=(d*_-l*R-h*y)*B,t[4]=(c*w-a*P-f*A)*B,t[5]=(r*P-o*w+u*A)*B,t[6]=(m*x-v*R-M*g)*B,t[7]=(s*R-d*x+h*g)*B,t[8]=(a*S-i*w+f*E)*B,t[9]=(e*w-r*S-u*E)*B,t[10]=(v*_-p*x+M*b)*B,t[11]=(l*x-s*_-h*b)*B,t[12]=(i*A-a*T-c*E)*B,t[13]=(r*T-e*A+o*E)*B,t[14]=(p*g-v*y-m*b)*B,t[15]=(s*y-l*g+d*b)*B,t):null}function en(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=n[4],i=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],h=n[11],v=n[12],p=n[13],m=n[14],M=n[15];return t[0]=i*(d*M-h*m)-l*(c*M-f*m)+p*(c*h-f*d),t[1]=-(e*(d*M-h*m)-l*(o*M-u*m)+p*(o*h-u*d)),t[2]=e*(c*M-f*m)-i*(o*M-u*m)+p*(o*f-u*c),t[3]=-(e*(c*h-f*d)-i*(o*h-u*d)+l*(o*f-u*c)),t[4]=-(a*(d*M-h*m)-s*(c*M-f*m)+v*(c*h-f*d)),t[5]=r*(d*M-h*m)-s*(o*M-u*m)+v*(o*h-u*d),t[6]=-(r*(c*M-f*m)-a*(o*M-u*m)+v*(o*f-u*c)),t[7]=r*(c*h-f*d)-a*(o*h-u*d)+s*(o*f-u*c),t[8]=a*(l*M-h*p)-s*(i*M-f*p)+v*(i*h-f*l),t[9]=-(r*(l*M-h*p)-s*(e*M-u*p)+v*(e*h-u*l)),t[10]=r*(i*M-f*p)-a*(e*M-u*p)+v*(e*f-u*i),t[11]=-(r*(i*h-f*l)-a*(e*h-u*l)+s*(e*f-u*i)),t[12]=-(a*(l*m-d*p)-s*(i*m-c*p)+v*(i*d-c*l)),t[13]=r*(l*m-d*p)-s*(e*m-o*p)+v*(e*d-o*l),t[14]=-(r*(i*m-c*p)-a*(e*m-o*p)+v*(e*c-o*i)),t[15]=r*(i*d-c*l)-a*(e*d-o*l)+s*(e*c-o*i),t}function on(t){var n=t[0],r=t[1],e=t[2],o=t[3],u=t[4],a=t[5],i=t[6],c=t[7],f=t[8],s=t[9],l=t[10],d=t[11],h=t[12],v=t[13],p=t[14],m=t[15];return(n*a-r*u)*(l*m-d*p)-(n*i-e*u)*(s*m-d*v)+(n*c-o*u)*(s*p-l*v)+(r*i-e*a)*(f*m-d*h)-(r*c-o*a)*(f*p-l*h)+(e*c-o*i)*(f*v-s*h)}function un(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=n[9],h=n[10],v=n[11],p=n[12],m=n[13],M=n[14],b=n[15],g=r[0],x=r[1],y=r[2],_=r[3];return t[0]=g*e+x*i+y*l+_*p,t[1]=g*o+x*c+y*d+_*m,t[2]=g*u+x*f+y*h+_*M,t[3]=g*a+x*s+y*v+_*b,g=r[4],x=r[5],y=r[6],_=r[7],t[4]=g*e+x*i+y*l+_*p,t[5]=g*o+x*c+y*d+_*m,t[6]=g*u+x*f+y*h+_*M,t[7]=g*a+x*s+y*v+_*b,g=r[8],x=r[9],y=r[10],_=r[11],t[8]=g*e+x*i+y*l+_*p,t[9]=g*o+x*c+y*d+_*m,t[10]=g*u+x*f+y*h+_*M,t[11]=g*a+x*s+y*v+_*b,g=r[12],x=r[13],y=r[14],_=r[15],t[12]=g*e+x*i+y*l+_*p,t[13]=g*o+x*c+y*d+_*m,t[14]=g*u+x*f+y*h+_*M,t[15]=g*a+x*s+y*v+_*b,t}function an(t,n,r){var e,o,u,a,i,c,f,s,l,d,h,v,p=r[0],m=r[1],M=r[2];return n===t?(t[12]=n[0]*p+n[4]*m+n[8]*M+n[12],t[13]=n[1]*p+n[5]*m+n[9]*M+n[13],t[14]=n[2]*p+n[6]*m+n[10]*M+n[14],t[15]=n[3]*p+n[7]*m+n[11]*M+n[15]):(e=n[0],o=n[1],u=n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=n[9],h=n[10],v=n[11],t[0]=e,t[1]=o,t[2]=u,t[3]=a,t[4]=i,t[5]=c,t[6]=f,t[7]=s,t[8]=l,t[9]=d,t[10]=h,t[11]=v,t[12]=e*p+i*m+l*M+n[12],t[13]=o*p+c*m+d*M+n[13],t[14]=u*p+f*m+h*M+n[14],t[15]=a*p+s*m+v*M+n[15]),t}function cn(t,n,r){var e=r[0],o=r[1],u=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=n[11]*u,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function fn(t,n,r,e){var o,u,a,i,c,f,s,l,d,v,p,m,M,b,g,x,y,_,R,E,A,w,T,S,P=e[0],B=e[1],j=e[2],F=Math.sqrt(P*P+B*B+j*j);return F<h?null:(P*=F=1/F,B*=F,j*=F,o=Math.sin(r),a=1-(u=Math.cos(r)),i=n[0],c=n[1],f=n[2],s=n[3],l=n[4],d=n[5],v=n[6],p=n[7],m=n[8],M=n[9],b=n[10],g=n[11],x=P*P*a+u,y=B*P*a+j*o,_=j*P*a-B*o,R=P*B*a-j*o,E=B*B*a+u,A=j*B*a+P*o,w=P*j*a+B*o,T=B*j*a-P*o,S=j*j*a+u,t[0]=i*x+l*y+m*_,t[1]=c*x+d*y+M*_,t[2]=f*x+v*y+b*_,t[3]=s*x+p*y+g*_,t[4]=i*R+l*E+m*A,t[5]=c*R+d*E+M*A,t[6]=f*R+v*E+b*A,t[7]=s*R+p*E+g*A,t[8]=i*w+l*T+m*S,t[9]=c*w+d*T+M*S,t[10]=f*w+v*T+b*S,t[11]=s*w+p*T+g*S,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function sn(t,n,r){var e=Math.sin(r),o=Math.cos(r),u=n[4],a=n[5],i=n[6],c=n[7],f=n[8],s=n[9],l=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=u*o+f*e,t[5]=a*o+s*e,t[6]=i*o+l*e,t[7]=c*o+d*e,t[8]=f*o-u*e,t[9]=s*o-a*e,t[10]=l*o-i*e,t[11]=d*o-c*e,t}function ln(t,n,r){var e=Math.sin(r),o=Math.cos(r),u=n[0],a=n[1],i=n[2],c=n[3],f=n[8],s=n[9],l=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=u*o-f*e,t[1]=a*o-s*e,t[2]=i*o-l*e,t[3]=c*o-d*e,t[8]=u*e+f*o,t[9]=a*e+s*o,t[10]=i*e+l*o,t[11]=c*e+d*o,t}function dn(t,n,r){var e=Math.sin(r),o=Math.cos(r),u=n[0],a=n[1],i=n[2],c=n[3],f=n[4],s=n[5],l=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=u*o+f*e,t[1]=a*o+s*e,t[2]=i*o+l*e,t[3]=c*o+d*e,t[4]=f*o-u*e,t[5]=s*o-a*e,t[6]=l*o-i*e,t[7]=d*o-c*e,t}function hn(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function vn(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pn(t,n,r){var e,o,u,a=r[0],i=r[1],c=r[2],f=Math.sqrt(a*a+i*i+c*c);return f<h?null:(a*=f=1/f,i*=f,c*=f,e=Math.sin(n),u=1-(o=Math.cos(n)),t[0]=a*a*u+o,t[1]=i*a*u+c*e,t[2]=c*a*u-i*e,t[3]=0,t[4]=a*i*u-c*e,t[5]=i*i*u+o,t[6]=c*i*u+a*e,t[7]=0,t[8]=a*c*u+i*e,t[9]=i*c*u-a*e,t[10]=c*c*u+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mn(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mn(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bn(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gn(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=e+e,c=o+o,f=u+u,s=e*i,l=e*c,d=e*f,h=o*c,v=o*f,p=u*f,m=a*i,M=a*c,b=a*f;return t[0]=1-(h+p),t[1]=l+b,t[2]=d-M,t[3]=0,t[4]=l-b,t[5]=1-(s+p),t[6]=v+m,t[7]=0,t[8]=d+M,t[9]=v-m,t[10]=1-(s+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function xn(t,n){var r=new v(3),e=-n[0],o=-n[1],u=-n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=e*e+o*o+u*u+a*a;return l>0?(r[0]=2*(i*a+s*e+c*u-f*o)/l,r[1]=2*(c*a+s*o+f*e-i*u)/l,r[2]=2*(f*a+s*u+i*o-c*e)/l):(r[0]=2*(i*a+s*e+c*u-f*o),r[1]=2*(c*a+s*o+f*e-i*u),r[2]=2*(f*a+s*u+i*o-c*e)),gn(t,n,r),t}function yn(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function _n(t,n){var r=n[0],e=n[1],o=n[2],u=n[4],a=n[5],i=n[6],c=n[8],f=n[9],s=n[10];return t[0]=Math.sqrt(r*r+e*e+o*o),t[1]=Math.sqrt(u*u+a*a+i*i),t[2]=Math.sqrt(c*c+f*f+s*s),t}function Rn(t,n){var r=n[0]+n[5]+n[10],e=0;return r>0?(e=2*Math.sqrt(r+1),t[3]=.25*e,t[0]=(n[6]-n[9])/e,t[1]=(n[8]-n[2])/e,t[2]=(n[1]-n[4])/e):n[0]>n[5]&&n[0]>n[10]?(e=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/e,t[0]=.25*e,t[1]=(n[1]+n[4])/e,t[2]=(n[8]+n[2])/e):n[5]>n[10]?(e=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/e,t[0]=(n[1]+n[4])/e,t[1]=.25*e,t[2]=(n[6]+n[9])/e):(e=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/e,t[0]=(n[8]+n[2])/e,t[1]=(n[6]+n[9])/e,t[2]=.25*e),t}function En(t,n,r,e){var o=n[0],u=n[1],a=n[2],i=n[3],c=o+o,f=u+u,s=a+a,l=o*c,d=o*f,h=o*s,v=u*f,p=u*s,m=a*s,M=i*c,b=i*f,g=i*s,x=e[0],y=e[1],_=e[2];return t[0]=(1-(v+m))*x,t[1]=(d+g)*x,t[2]=(h-b)*x,t[3]=0,t[4]=(d-g)*y,t[5]=(1-(l+m))*y,t[6]=(p+M)*y,t[7]=0,t[8]=(h+b)*_,t[9]=(p-M)*_,t[10]=(1-(l+v))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function An(t,n,r,e,o){var u=n[0],a=n[1],i=n[2],c=n[3],f=u+u,s=a+a,l=i+i,d=u*f,h=u*s,v=u*l,p=a*s,m=a*l,M=i*l,b=c*f,g=c*s,x=c*l,y=e[0],_=e[1],R=e[2],E=o[0],A=o[1],w=o[2],T=(1-(p+M))*y,S=(h+x)*y,P=(v-g)*y,B=(h-x)*_,j=(1-(d+M))*_,F=(m+b)*_,I=(v+g)*R,D=(m-b)*R,k=(1-(d+p))*R;return t[0]=T,t[1]=S,t[2]=P,t[3]=0,t[4]=B,t[5]=j,t[6]=F,t[7]=0,t[8]=I,t[9]=D,t[10]=k,t[11]=0,t[12]=r[0]+E-(T*E+B*A+I*w),t[13]=r[1]+A-(S*E+j*A+D*w),t[14]=r[2]+w-(P*E+F*A+k*w),t[15]=1,t}function wn(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=r+r,i=e+e,c=o+o,f=r*a,s=e*a,l=e*i,d=o*a,h=o*i,v=o*c,p=u*a,m=u*i,M=u*c;return t[0]=1-l-v,t[1]=s+M,t[2]=d-m,t[3]=0,t[4]=s-M,t[5]=1-f-v,t[6]=h+p,t[7]=0,t[8]=d+m,t[9]=h-p,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tn(t,n,r,e,o,u,a){var i=1/(r-n),c=1/(o-e),f=1/(u-a);return t[0]=2*u*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*u*c,t[6]=0,t[7]=0,t[8]=(r+n)*i,t[9]=(o+e)*c,t[10]=(a+u)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*u*2*f,t[15]=0,t}function Sn(t,n,r,e,o){var u,a=1/Math.tan(n/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(u=1/(e-o),t[10]=(o+e)*u,t[14]=2*o*e*u):(t[10]=-1,t[14]=-2*e),t}function Pn(t,n,r,e){var o=Math.tan(n.upDegrees*Math.PI/180),u=Math.tan(n.downDegrees*Math.PI/180),a=Math.tan(n.leftDegrees*Math.PI/180),i=Math.tan(n.rightDegrees*Math.PI/180),c=2/(a+i),f=2/(o+u);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(a-i)*c*.5,t[9]=(o-u)*f*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function Bn(t,n,r,e,o,u,a){var i=1/(n-r),c=1/(e-o),f=1/(u-a);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+r)*i,t[13]=(o+e)*c,t[14]=(a+u)*f,t[15]=1,t}function jn(t,n,r,e){var o,u,a,i,c,f,s,l,d,v,p=n[0],m=n[1],M=n[2],b=e[0],g=e[1],x=e[2],y=r[0],_=r[1],R=r[2];return Math.abs(p-y)<h&&Math.abs(m-_)<h&&Math.abs(M-R)<h?tn(t):(s=p-y,l=m-_,d=M-R,o=g*(d*=v=1/Math.sqrt(s*s+l*l+d*d))-x*(l*=v),u=x*(s*=v)-b*d,a=b*l-g*s,(v=Math.sqrt(o*o+u*u+a*a))?(o*=v=1/v,u*=v,a*=v):(o=0,u=0,a=0),i=l*a-d*u,c=d*o-s*a,f=s*u-l*o,(v=Math.sqrt(i*i+c*c+f*f))?(i*=v=1/v,c*=v,f*=v):(i=0,c=0,f=0),t[0]=o,t[1]=i,t[2]=s,t[3]=0,t[4]=u,t[5]=c,t[6]=l,t[7]=0,t[8]=a,t[9]=f,t[10]=d,t[11]=0,t[12]=-(o*p+u*m+a*M),t[13]=-(i*p+c*m+f*M),t[14]=-(s*p+l*m+d*M),t[15]=1,t)}function Fn(t,n,r,e){var o=n[0],u=n[1],a=n[2],i=e[0],c=e[1],f=e[2],s=o-r[0],l=u-r[1],d=a-r[2],h=s*s+l*l+d*d;h>0&&(s*=h=1/Math.sqrt(h),l*=h,d*=h);var v=c*d-f*l,p=f*s-i*d,m=i*l-c*s;return(h=v*v+p*p+m*m)>0&&(v*=h=1/Math.sqrt(h),p*=h,m*=h),t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=l*m-d*p,t[5]=d*v-s*m,t[6]=s*p-l*v,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=o,t[13]=u,t[14]=a,t[15]=1,t}function In(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Dn(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function kn(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t}function Un(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}function Cn(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t}function Ln(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t}function On(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function Gn(t,n){var r=t[0],e=t[1],o=t[2],u=t[3],a=t[4],i=t[5],c=t[6],f=t[7],s=t[8],l=t[9],d=t[10],v=t[11],p=t[12],m=t[13],M=t[14],b=t[15],g=n[0],x=n[1],y=n[2],_=n[3],R=n[4],E=n[5],A=n[6],w=n[7],T=n[8],S=n[9],P=n[10],B=n[11],j=n[12],F=n[13],I=n[14],D=n[15];return Math.abs(r-g)<=h*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(e-x)<=h*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-y)<=h*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(u-_)<=h*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(a-R)<=h*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(i-E)<=h*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(c-A)<=h*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-w)<=h*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(s-T)<=h*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(l-S)<=h*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(d-P)<=h*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(v-B)<=h*Math.max(1,Math.abs(v),Math.abs(B))&&Math.abs(p-j)<=h*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(m-F)<=h*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(M-I)<=h*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(b-D)<=h*Math.max(1,Math.abs(b),Math.abs(D))}var zn=un,qn=Un;function Nn(){var t=new v(3);return v!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Vn(t){var n=new v(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function Xn(t){var n=t[0],r=t[1],e=t[2];return Math.sqrt(n*n+r*r+e*e)}function Wn(t,n,r){var e=new v(3);return e[0]=t,e[1]=n,e[2]=r,e}function Yn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Qn(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t}function Hn(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function Zn(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function $n(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function Kn(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function Jn(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function tr(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function nr(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t}function rr(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t}function er(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function or(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function ur(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t}function ar(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return Math.sqrt(r*r+e*e+o*o)}function ir(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return r*r+e*e+o*o}function cr(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e}function fr(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function sr(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function lr(t,n){var r=n[0],e=n[1],o=n[2],u=r*r+e*e+o*o;return u>0&&(u=1/Math.sqrt(u)),t[0]=n[0]*u,t[1]=n[1]*u,t[2]=n[2]*u,t}function dr(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function hr(t,n,r){var e=n[0],o=n[1],u=n[2],a=r[0],i=r[1],c=r[2];return t[0]=o*c-u*i,t[1]=u*a-e*c,t[2]=e*i-o*a,t}function vr(t,n,r,e){var o=n[0],u=n[1],a=n[2];return t[0]=o+e*(r[0]-o),t[1]=u+e*(r[1]-u),t[2]=a+e*(r[2]-a),t}function pr(t,n,r,e,o,u){var a=u*u,i=a*(2*u-3)+1,c=a*(u-2)+u,f=a*(u-1),s=a*(3-2*u);return t[0]=n[0]*i+r[0]*c+e[0]*f+o[0]*s,t[1]=n[1]*i+r[1]*c+e[1]*f+o[1]*s,t[2]=n[2]*i+r[2]*c+e[2]*f+o[2]*s,t}function mr(t,n,r,e,o,u){var a=1-u,i=a*a,c=u*u,f=i*a,s=3*u*i,l=3*c*a,d=c*u;return t[0]=n[0]*f+r[0]*s+e[0]*l+o[0]*d,t[1]=n[1]*f+r[1]*s+e[1]*l+o[1]*d,t[2]=n[2]*f+r[2]*s+e[2]*l+o[2]*d,t}function Mr(t,n){n=n||1;var r=2*p()*Math.PI,e=2*p()-1,o=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=e*n,t}function br(t,n,r){var e=n[0],o=n[1],u=n[2],a=r[3]*e+r[7]*o+r[11]*u+r[15];return a=a||1,t[0]=(r[0]*e+r[4]*o+r[8]*u+r[12])/a,t[1]=(r[1]*e+r[5]*o+r[9]*u+r[13])/a,t[2]=(r[2]*e+r[6]*o+r[10]*u+r[14])/a,t}function gr(t,n,r){var e=n[0],o=n[1],u=n[2];return t[0]=e*r[0]+o*r[3]+u*r[6],t[1]=e*r[1]+o*r[4]+u*r[7],t[2]=e*r[2]+o*r[5]+u*r[8],t}function xr(t,n,r){var e=r[0],o=r[1],u=r[2],a=r[3],i=n[0],c=n[1],f=n[2],s=o*f-u*c,l=u*i-e*f,d=e*c-o*i,h=o*d-u*l,v=u*s-e*d,p=e*l-o*s,m=2*a;return s*=m,l*=m,d*=m,h*=2,v*=2,p*=2,t[0]=i+s+h,t[1]=c+l+v,t[2]=f+d+p,t}function yr(t,n,r,e){var o=[],u=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],u[0]=o[0],u[1]=o[1]*Math.cos(e)-o[2]*Math.sin(e),u[2]=o[1]*Math.sin(e)+o[2]*Math.cos(e),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t}function _r(t,n,r,e){var o=[],u=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],u[0]=o[2]*Math.sin(e)+o[0]*Math.cos(e),u[1]=o[1],u[2]=o[2]*Math.cos(e)-o[0]*Math.sin(e),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t}function Rr(t,n,r,e){var o=[],u=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],u[0]=o[0]*Math.cos(e)-o[1]*Math.sin(e),u[1]=o[0]*Math.sin(e)+o[1]*Math.cos(e),u[2]=o[2],t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t}function Er(t,n){var r=Wn(t[0],t[1],t[2]),e=Wn(n[0],n[1],n[2]);lr(r,r),lr(e,e);var o=dr(r,e);return o>1?0:o<-1?Math.PI:Math.acos(o)}function Ar(t){return t[0]=0,t[1]=0,t[2]=0,t}function wr(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Tr(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function Sr(t,n){var r=t[0],e=t[1],o=t[2],u=n[0],a=n[1],i=n[2];return Math.abs(r-u)<=h*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(e-a)<=h*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(o-i)<=h*Math.max(1,Math.abs(o),Math.abs(i))}var Pr,Br=Zn,jr=$n,Fr=Kn,Ir=ar,Dr=ir,kr=Xn,Ur=cr,Cr=(Pr=Nn(),function(t,n,r,e,o,u){var a,i;for(n||(n=3),r||(r=0),i=e?Math.min(e*n+r,t.length):t.length,a=r;a<i;a+=n)Pr[0]=t[a],Pr[1]=t[a+1],Pr[2]=t[a+2],o(Pr,Pr,u),t[a]=Pr[0],t[a+1]=Pr[1],t[a+2]=Pr[2];return t});function Lr(){var t=new v(4);return v!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Or(t){var n=new v(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function Gr(t,n,r,e){var o=new v(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=e,o}function zr(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function qr(t,n,r,e,o){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t}function Nr(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function Vr(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function Xr(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function Wr(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function Yr(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function Qr(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function Hr(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t}function Zr(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t}function $r(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function Kr(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function Jr(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t}function te(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(r*r+e*e+o*o+u*u)}function ne(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],u=n[3]-t[3];return r*r+e*e+o*o+u*u}function re(t){var n=t[0],r=t[1],e=t[2],o=t[3];return Math.sqrt(n*n+r*r+e*e+o*o)}function ee(t){var n=t[0],r=t[1],e=t[2],o=t[3];return n*n+r*r+e*e+o*o}function oe(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function ue(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function ae(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=r*r+e*e+o*o+u*u;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=e*a,t[2]=o*a,t[3]=u*a,t}function ie(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function ce(t,n,r,e){var o=r[0]*e[1]-r[1]*e[0],u=r[0]*e[2]-r[2]*e[0],a=r[0]*e[3]-r[3]*e[0],i=r[1]*e[2]-r[2]*e[1],c=r[1]*e[3]-r[3]*e[1],f=r[2]*e[3]-r[3]*e[2],s=n[0],l=n[1],d=n[2],h=n[3];return t[0]=l*f-d*c+h*i,t[1]=-s*f+d*a-h*u,t[2]=s*c-l*a+h*o,t[3]=-s*i+l*u-d*o,t}function fe(t,n,r,e){var o=n[0],u=n[1],a=n[2],i=n[3];return t[0]=o+e*(r[0]-o),t[1]=u+e*(r[1]-u),t[2]=a+e*(r[2]-a),t[3]=i+e*(r[3]-i),t}function se(t,n){var r,e,o,u,a,i;n=n||1;do{a=(r=2*p()-1)*r+(e=2*p()-1)*e}while(a>=1);do{i=(o=2*p()-1)*o+(u=2*p()-1)*u}while(i>=1);var c=Math.sqrt((1-a)/i);return t[0]=n*r,t[1]=n*e,t[2]=n*o*c,t[3]=n*u*c,t}function le(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3];return t[0]=r[0]*e+r[4]*o+r[8]*u+r[12]*a,t[1]=r[1]*e+r[5]*o+r[9]*u+r[13]*a,t[2]=r[2]*e+r[6]*o+r[10]*u+r[14]*a,t[3]=r[3]*e+r[7]*o+r[11]*u+r[15]*a,t}function de(t,n,r){var e=n[0],o=n[1],u=n[2],a=r[0],i=r[1],c=r[2],f=r[3],s=f*e+i*u-c*o,l=f*o+c*e-a*u,d=f*u+a*o-i*e,h=-a*e-i*o-c*u;return t[0]=s*f+h*-a+l*-c-d*-i,t[1]=l*f+h*-i+d*-a-s*-c,t[2]=d*f+h*-c+s*-i-l*-a,t[3]=n[3],t}function he(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function ve(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function pe(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function me(t,n){var r=t[0],e=t[1],o=t[2],u=t[3],a=n[0],i=n[1],c=n[2],f=n[3];return Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(e-i)<=h*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(u-f)<=h*Math.max(1,Math.abs(u),Math.abs(f))}var Me=Vr,be=Xr,ge=Wr,xe=te,ye=ne,_e=re,Re=ee,Ee=function(){var t=Lr();return function(n,r,e,o,u,a){var i,c;for(r||(r=4),e||(e=0),c=o?Math.min(o*r+e,n.length):n.length,i=e;i<c;i+=r)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],t[3]=n[i+3],u(t,t,a),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3];return n}}();function Ae(){var t=new v(4);return v!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function we(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Te(t,n,r){r*=.5;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t}function Se(t,n){var r=2*Math.acos(n[3]),e=Math.sin(r/2);return e>h?(t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e):(t[0]=1,t[1]=0,t[2]=0),r}function Pe(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*s+a*i+o*f-u*c,t[1]=o*s+a*c+u*i-e*f,t[2]=u*s+a*f+e*c-o*i,t[3]=a*s-e*i-o*c-u*f,t}function Be(t,n,r){r*=.5;var e=n[0],o=n[1],u=n[2],a=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+a*i,t[1]=o*c+u*i,t[2]=u*c-o*i,t[3]=a*c-e*i,t}function je(t,n,r){r*=.5;var e=n[0],o=n[1],u=n[2],a=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c-u*i,t[1]=o*c+a*i,t[2]=u*c+e*i,t[3]=a*c-o*i,t}function Fe(t,n,r){r*=.5;var e=n[0],o=n[1],u=n[2],a=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+o*i,t[1]=o*c-e*i,t[2]=u*c+a*i,t[3]=a*c-u*i,t}function Ie(t,n){var r=n[0],e=n[1],o=n[2];return t[0]=r,t[1]=e,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-o*o)),t}function De(t,n,r,e){var o,u,a,i,c,f=n[0],s=n[1],l=n[2],d=n[3],v=r[0],p=r[1],m=r[2],M=r[3];return(u=f*v+s*p+l*m+d*M)<0&&(u=-u,v=-v,p=-p,m=-m,M=-M),1-u>h?(o=Math.acos(u),a=Math.sin(o),i=Math.sin((1-e)*o)/a,c=Math.sin(e*o)/a):(i=1-e,c=e),t[0]=i*f+c*v,t[1]=i*s+c*p,t[2]=i*l+c*m,t[3]=i*d+c*M,t}function ke(t){var n=p(),r=p(),e=p(),o=Math.sqrt(1-n),u=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=u*Math.sin(2*Math.PI*e),t[3]=u*Math.cos(2*Math.PI*e),t}function Ue(t,n){var r=n[0],e=n[1],o=n[2],u=n[3],a=r*r+e*e+o*o+u*u,i=a?1/a:0;return t[0]=-r*i,t[1]=-e*i,t[2]=-o*i,t[3]=u*i,t}function Ce(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function Le(t,n){var r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var u=(o+1)%3,a=(o+2)%3;r=Math.sqrt(n[3*o+o]-n[3*u+u]-n[3*a+a]+1),t[o]=.5*r,r=.5/r,t[3]=(n[3*u+a]-n[3*a+u])*r,t[u]=(n[3*u+o]+n[3*o+u])*r,t[a]=(n[3*a+o]+n[3*o+a])*r}return t}function Oe(t,n,r,e){var o=.5*Math.PI/180;n*=o,r*=o,e*=o;var u=Math.sin(n),a=Math.cos(n),i=Math.sin(r),c=Math.cos(r),f=Math.sin(e),s=Math.cos(e);return t[0]=u*c*s-a*i*f,t[1]=a*i*s+u*c*f,t[2]=a*c*f-u*i*s,t[3]=a*c*s+u*i*f,t}function Ge(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var ze,qe,Ne,Ve,Xe,We,Ye=Or,Qe=Gr,He=zr,Ze=qr,$e=Nr,Ke=Pe,Je=Kr,to=ie,no=fe,ro=re,eo=ro,oo=ee,uo=oo,ao=ae,io=pe,co=me,fo=(ze=Nn(),qe=Wn(1,0,0),Ne=Wn(0,1,0),function(t,n,r){var e=dr(n,r);return e<-.999999?(hr(ze,qe,n),kr(ze)<1e-6&&hr(ze,Ne,n),lr(ze,ze),Te(t,ze,Math.PI),t):e>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(hr(ze,n,r),t[0]=ze[0],t[1]=ze[1],t[2]=ze[2],t[3]=1+e,ao(t,t))}),so=(Ve=Ae(),Xe=Ae(),function(t,n,r,e,o,u){return De(Ve,n,o,u),De(Xe,r,e,u),De(t,Ve,Xe,2*u*(1-u)),t}),lo=(We=Mt(),function(t,n,r,e){return We[0]=r[0],We[3]=r[1],We[6]=r[2],We[1]=e[0],We[4]=e[1],We[7]=e[2],We[2]=-n[0],We[5]=-n[1],We[8]=-n[2],ao(t,Le(t,We))});function ho(){var t=new v(8);return v!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function vo(t){var n=new v(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n}function po(t,n,r,e,o,u,a,i){var c=new v(8);return c[0]=t,c[1]=n,c[2]=r,c[3]=e,c[4]=o,c[5]=u,c[6]=a,c[7]=i,c}function mo(t,n,r,e,o,u,a){var i=new v(8);i[0]=t,i[1]=n,i[2]=r,i[3]=e;var c=.5*o,f=.5*u,s=.5*a;return i[4]=c*e+f*r-s*n,i[5]=f*e+s*t-c*r,i[6]=s*e+c*n-f*t,i[7]=-c*t-f*n-s*r,i}function Mo(t,n,r){var e=.5*r[0],o=.5*r[1],u=.5*r[2],a=n[0],i=n[1],c=n[2],f=n[3];return t[0]=a,t[1]=i,t[2]=c,t[3]=f,t[4]=e*f+o*c-u*i,t[5]=o*f+u*a-e*c,t[6]=u*f+e*i-o*a,t[7]=-e*a-o*i-u*c,t}function bo(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t}function go(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function xo(t,n){var r=Ae();Rn(r,n);var e=new v(3);return yn(e,n),Mo(t,r,e),t}function yo(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}function _o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ro(t,n,r,e,o,u,a,i,c){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=u,t[5]=a,t[6]=i,t[7]=c,t}var Eo=He;function Ao(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t}var wo=He;function To(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t}function So(t,n){var r=n[4],e=n[5],o=n[6],u=n[7],a=-n[0],i=-n[1],c=-n[2],f=n[3];return t[0]=2*(r*f+u*a+e*c-o*i),t[1]=2*(e*f+u*i+o*a-r*c),t[2]=2*(o*f+u*c+r*i-e*a),t}function Po(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=.5*r[0],c=.5*r[1],f=.5*r[2],s=n[4],l=n[5],d=n[6],h=n[7];return t[0]=e,t[1]=o,t[2]=u,t[3]=a,t[4]=a*i+o*f-u*c+s,t[5]=a*c+u*i-e*f+l,t[6]=a*f+e*c-o*i+d,t[7]=-e*i-o*c-u*f+h,t}function Bo(t,n,r){var e=-n[0],o=-n[1],u=-n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=i*a+s*e+c*u-f*o,d=c*a+s*o+f*e-i*u,h=f*a+s*u+i*o-c*e,v=s*a-i*e-c*o-f*u;return Be(t,n,r),e=t[0],o=t[1],u=t[2],a=t[3],t[4]=l*a+v*e+d*u-h*o,t[5]=d*a+v*o+h*e-l*u,t[6]=h*a+v*u+l*o-d*e,t[7]=v*a-l*e-d*o-h*u,t}function jo(t,n,r){var e=-n[0],o=-n[1],u=-n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=i*a+s*e+c*u-f*o,d=c*a+s*o+f*e-i*u,h=f*a+s*u+i*o-c*e,v=s*a-i*e-c*o-f*u;return je(t,n,r),e=t[0],o=t[1],u=t[2],a=t[3],t[4]=l*a+v*e+d*u-h*o,t[5]=d*a+v*o+h*e-l*u,t[6]=h*a+v*u+l*o-d*e,t[7]=v*a-l*e-d*o-h*u,t}function Fo(t,n,r){var e=-n[0],o=-n[1],u=-n[2],a=n[3],i=n[4],c=n[5],f=n[6],s=n[7],l=i*a+s*e+c*u-f*o,d=c*a+s*o+f*e-i*u,h=f*a+s*u+i*o-c*e,v=s*a-i*e-c*o-f*u;return Fe(t,n,r),e=t[0],o=t[1],u=t[2],a=t[3],t[4]=l*a+v*e+d*u-h*o,t[5]=d*a+v*o+h*e-l*u,t[6]=h*a+v*u+l*o-d*e,t[7]=v*a-l*e-d*o-h*u,t}function Io(t,n,r){var e=r[0],o=r[1],u=r[2],a=r[3],i=n[0],c=n[1],f=n[2],s=n[3];return t[0]=i*a+s*e+c*u-f*o,t[1]=c*a+s*o+f*e-i*u,t[2]=f*a+s*u+i*o-c*e,t[3]=s*a-i*e-c*o-f*u,i=n[4],c=n[5],f=n[6],s=n[7],t[4]=i*a+s*e+c*u-f*o,t[5]=c*a+s*o+f*e-i*u,t[6]=f*a+s*u+i*o-c*e,t[7]=s*a-i*e-c*o-f*u,t}function Do(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*s+a*i+o*f-u*c,t[1]=o*s+a*c+u*i-e*f,t[2]=u*s+a*f+e*c-o*i,t[3]=a*s-e*i-o*c-u*f,i=r[4],c=r[5],f=r[6],s=r[7],t[4]=e*s+a*i+o*f-u*c,t[5]=o*s+a*c+u*i-e*f,t[6]=u*s+a*f+e*c-o*i,t[7]=a*s-e*i-o*c-u*f,t}function ko(t,n,r,e){if(Math.abs(e)<h)return yo(t,n);var o=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);e*=.5;var u=Math.sin(e),a=u*r[0]/o,i=u*r[1]/o,c=u*r[2]/o,f=Math.cos(e),s=n[0],l=n[1],d=n[2],v=n[3];t[0]=s*f+v*a+l*c-d*i,t[1]=l*f+v*i+d*a-s*c,t[2]=d*f+v*c+s*i-l*a,t[3]=v*f-s*a-l*i-d*c;var p=n[4],m=n[5],M=n[6],b=n[7];return t[4]=p*f+b*a+m*c-M*i,t[5]=m*f+b*i+M*a-p*c,t[6]=M*f+b*c+p*i-m*a,t[7]=b*f-p*a-m*i-M*c,t}function Uo(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t}function Co(t,n,r){var e=n[0],o=n[1],u=n[2],a=n[3],i=r[4],c=r[5],f=r[6],s=r[7],l=n[4],d=n[5],h=n[6],v=n[7],p=r[0],m=r[1],M=r[2],b=r[3];return t[0]=e*b+a*p+o*M-u*m,t[1]=o*b+a*m+u*p-e*M,t[2]=u*b+a*M+e*m-o*p,t[3]=a*b-e*p-o*m-u*M,t[4]=e*s+a*i+o*f-u*c+l*b+v*p+d*M-h*m,t[5]=o*s+a*c+u*i-e*f+d*b+v*m+h*p-l*M,t[6]=u*s+a*f+e*c-o*i+h*b+v*M+l*m-d*p,t[7]=a*s-e*i-o*c-u*f+v*b-l*p-d*m-h*M,t}var Lo=Co;function Oo(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t}var Go=to;function zo(t,n,r,e){var o=1-e;return Go(n,r)<0&&(e=-e),t[0]=n[0]*o+r[0]*e,t[1]=n[1]*o+r[1]*e,t[2]=n[2]*o+r[2]*e,t[3]=n[3]*o+r[3]*e,t[4]=n[4]*o+r[4]*e,t[5]=n[5]*o+r[5]*e,t[6]=n[6]*o+r[6]*e,t[7]=n[7]*o+r[7]*e,t}function qo(t,n){var r=Wo(n);return t[0]=-n[0]/r,t[1]=-n[1]/r,t[2]=-n[2]/r,t[3]=n[3]/r,t[4]=-n[4]/r,t[5]=-n[5]/r,t[6]=-n[6]/r,t[7]=n[7]/r,t}function No(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t}var Vo=ro,Xo=Vo,Wo=oo,Yo=Wo;function Qo(t,n){var r=Wo(n);if(r>0){r=Math.sqrt(r);var e=n[0]/r,o=n[1]/r,u=n[2]/r,a=n[3]/r,i=n[4],c=n[5],f=n[6],s=n[7],l=e*i+o*c+u*f+a*s;t[0]=e,t[1]=o,t[2]=u,t[3]=a,t[4]=(i-e*l)/r,t[5]=(c-o*l)/r,t[6]=(f-u*l)/r,t[7]=(s-a*l)/r}return t}function Ho(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Zo(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]}function $o(t,n){var r=t[0],e=t[1],o=t[2],u=t[3],a=t[4],i=t[5],c=t[6],f=t[7],s=n[0],l=n[1],d=n[2],v=n[3],p=n[4],m=n[5],M=n[6],b=n[7];return Math.abs(r-s)<=h*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(e-l)<=h*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-d)<=h*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-v)<=h*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(a-p)<=h*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-m)<=h*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-M)<=h*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(f-b)<=h*Math.max(1,Math.abs(f),Math.abs(b))}function Ko(){var t=new v(2);return v!=Float32Array&&(t[0]=0,t[1]=0),t}function Jo(t){var n=new v(2);return n[0]=t[0],n[1]=t[1],n}function tu(t,n){var r=new v(2);return r[0]=t,r[1]=n,r}function nu(t,n){return t[0]=n[0],t[1]=n[1],t}function ru(t,n,r){return t[0]=n,t[1]=r,t}function eu(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t}function ou(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}function uu(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t}function au(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t}function iu(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function cu(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function fu(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t}function su(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t}function lu(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function du(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t}function hu(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t}function vu(t,n){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)}function pu(t,n){var r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e}function mu(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)}function Mu(t){var n=t[0],r=t[1];return n*n+r*r}function bu(t,n){return t[0]=-n[0],t[1]=-n[1],t}function gu(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function xu(t,n){var r=n[0],e=n[1],o=r*r+e*e;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t}function yu(t,n){return t[0]*n[0]+t[1]*n[1]}function _u(t,n,r){var e=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=e,t}function Ru(t,n,r,e){var o=n[0],u=n[1];return t[0]=o+e*(r[0]-o),t[1]=u+e*(r[1]-u),t}function Eu(t,n){n=n||1;var r=2*p()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t}function Au(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[2]*o,t[1]=r[1]*e+r[3]*o,t}function wu(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[2]*o+r[4],t[1]=r[1]*e+r[3]*o+r[5],t}function Tu(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[3]*o+r[6],t[1]=r[1]*e+r[4]*o+r[7],t}function Su(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[4]*o+r[12],t[1]=r[1]*e+r[5]*o+r[13],t}function Pu(t,n,r,e){var o=n[0]-r[0],u=n[1]-r[1],a=Math.sin(e),i=Math.cos(e);return t[0]=o*i-u*a+r[0],t[1]=o*a+u*i+r[1],t}function Bu(t,n){var r=t[0],e=t[1],o=n[0],u=n[1],a=r*r+e*e;a>0&&(a=1/Math.sqrt(a));var i=o*o+u*u;i>0&&(i=1/Math.sqrt(i));var c=(r*o+e*u)*a*i;return c>1?0:c<-1?Math.PI:Math.acos(c)}function ju(t){return t[0]=0,t[1]=0,t}function Fu(t){return"vec2("+t[0]+", "+t[1]+")"}function Iu(t,n){return t[0]===n[0]&&t[1]===n[1]}function Du(t,n){var r=t[0],e=t[1],o=n[0],u=n[1];return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-u)<=h*Math.max(1,Math.abs(e),Math.abs(u))}var ku=mu,Uu=ou,Cu=uu,Lu=au,Ou=vu,Gu=pu,zu=Mu,qu=function(){var t=Ko();return function(n,r,e,o,u,a){var i,c;for(r||(r=2),e||(e=0),c=o?Math.min(o*r+e,n.length):n.length,i=e;i<c;i+=r)t[0]=n[i],t[1]=n[i+1],u(t,t,a),n[i]=t[0],n[i+1]=t[1];return n}}();r.d(n,"glMatrix",function(){return e}),r.d(n,"mat2",function(){return o}),r.d(n,"mat2d",function(){return u}),r.d(n,"mat3",function(){return a}),r.d(n,"mat4",function(){return i}),r.d(n,"quat",function(){return s}),r.d(n,"quat2",function(){return l}),r.d(n,"vec2",function(){return d}),r.d(n,"vec3",function(){return c}),r.d(n,"vec4",function(){return f})},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){this.width=t,this.height=n,this.vals=new Array(t*n)}return t.prototype.write=function(t,n,r){this.vals[t+n*this.width]=r},t.prototype.at=function(t,n){return this.vals[t+n*this.width]},t.prototype.copyFrom=function(t){for(var n=0;n<this.width&&n<t.width;++n)for(var r=0;r<this.height&&r<t.height;++r)this.write(n,r,t.at(n,r))},t}();n.WriteGrid=e,n.safeOutOfBounds=function(t,n){return{width:t.width,height:t.height,at:function(r,e){return r<0||e<0||r>=t.width||e>=t.width?n:t.at(r,e)}}},n.Grid={find:function(t,n){for(var r=0;r<t.width;++r)for(var e=0;e<t.height;++e)if(n(r,e,t.at(r,e)))return{x:r,y:e};return null},forEach:function(t,n){for(var r=0;r<t.width;++r)for(var e=0;e<t.height;++e)n(r,e,t.at(r,e))},map:function(t,n){for(var r=new e(t.width,t.height),o=0;o<t.width;++o)for(var u=0;u<t.height;++u)r.write(o,u,n(o,u,t.at(o,u)));return r}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(36),o=r(37),u=r(38),a=r(39),i=r(40),c=r(41),f=r(42),s={};n.getShaders=function(t){return t.canvas.id in s||(s[t.canvas.id]=function(t){return{bufferCopy:d(t,"bufferCopy",e),cave:d(t,"cave",o),caveDemo:d(t,"caveDemo",u),flatWhite:d(t,"flatWhite",a),gaussianBlur:d(t,"gaussianBlur",i),normals:d(t,"normals",c),ship:d(t,"ship",f)}}(t)),s[t.canvas.id]};var l=function(t,n,r){return"\n    <h1>Error in "+t+' shader in "'+n+'.glsl"</h1>\n    <code>'+r.replace(/\n/g,"<br/>")+"</code>\n"},d=function(t,n,r){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"#define VERTEX\n"+r+"\n"),t.compileShader(e);var o=t.getShaderInfoLog(e);if(null===o||o.length>0)throw document.body.innerHTML=l("vertex",n,o),new Error("Error compiling shader: "+n);var u=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(u,"#define FRAGMENT\n"+r+"\n"),t.compileShader(u);var a=t.getShaderInfoLog(u);if(null===a||a.length>0)throw document.body.innerHTML=l("fragment",n,a),new Error("Error compiling shader: "+n);var i=t.createProgram();return t.attachShader(i,e),t.attachShader(i,u),t.linkProgram(i),i}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(9),o=r(0),u=r(4),a=o.mat4.create(),i=o.vec4.create(),c=o.vec3.create(),f=o.vec3.create(),s=o.vec3.create();n.Camera={create:function(){return{transform:e.Transform.create(),aspectRatio:1,fov:Math.PI/2,near:.01,far:100}},getViewMatrix:function(t,n){return e.Transform.toMatrix(t.transform,n),o.mat4.invert(n,n)},getProjectionMatrix:function(t,n){return o.mat4.perspective(n,t.fov,t.aspectRatio,t.near,t.far)},updateAspectRatio:function(t,n,r){t.aspectRatio=n/r},screenPointToWorldXYPlanePoint:function(t,r,l){o.vec4.set(i,2*r[0]-1,2*r[1]-1,-1,1),n.Camera.getProjectionMatrix(t,a),o.mat4.invert(a,a),o.vec4.transformMat4(i,i,a),i[2]=-1,i[3]=0,e.Transform.toMatrix(t.transform,a),o.vec4.transformMat4(i,i,a),o.vec3.set(c,i[0],i[1],i[2]),o.vec3.set(f,0,0,-1),o.vec3.set(s,0,0,0);var d=(o.vec3.dot(f,s)-o.vec3.dot(f,u.unconst(t.transform.position)))/o.vec3.dot(f,c);return o.vec3.scaleAndAdd(l,u.unconst(t.transform.position),c,d)}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unconst=function(t){return t}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createSimpleSerializer=function(){return{serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)}}},n.TICK_LENGTH_MS=33;var e=function(){function t(t,n){var r=this;this.toClientSerDe=t,this.toServerSerDe=n,this.toServerQueue=[],this.toClientQueues={},this.clients={},this.latency=100,this.server={id:"server",countAvailablePackets:function(){return r.toServerQueue.length},receiveAllPackets:function(){var t=r.toServerQueue.slice();return r.toServerQueue.length=0,t},receivePacket:function(){if(r.toServerQueue.length<1)return null;var t=r.toServerQueue[0];return r.toServerQueue.splice(0,1),t},sendPacket:function(t){var n=r.toClientSerDe.serialize(t);setTimeout(function(){for(var t in r.toClientQueues)r.toClientQueues[t].push({senderId:"server",packet:r.toClientSerDe.deserialize(n)})},r.latency)}}}return t.prototype.createClient=function(){var t=this,n=Math.random().toString(36).substr(2);return this.toClientQueues[n]=[],this.clients[n]={id:n,countAvailablePackets:function(){return t.toClientQueues[n].length},receiveAllPackets:function(){var r=t.toClientQueues[n].slice();return t.toClientQueues[n].length=0,r},receivePacket:function(){if(t.toClientQueues[n].length<1)return null;var r=t.toClientQueues[n][0];return t.toClientQueues[n].splice(0,1),r},sendPacket:function(r){setTimeout(function(){t.toServerQueue.push({senderId:n,packet:t.toServerSerDe.deserialize(t.toServerSerDe.serialize(r))})},t.latency)}},this.clients[n]},t}();n.LocalNetwork=e},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RectTool={area:function(t){return(t.xmax-t.xmin)*(t.ymax-t.ymin)}},n.smallestDifferenceRadians=function(t,n){return t%=2*Math.PI,n%=2*Math.PI,Math.abs(t-n)>Math.PI&&(t>0?t-=2*Math.PI:t+=2*Math.PI),t-n},n.lerpRadians=function(t,r,e){return t+e*n.smallestDifferenceRadians(r,t)},n.findBounds=function(t){var n={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};return t.forEach(function(t){t[0]<n.xmin&&(n.xmin=t[0]),t[1]<n.ymin&&(n.ymin=t[1]),t[0]>n.xmax&&(n.xmax=t[0]),t[1]>n.ymax&&(n.ymax=t[1])}),n}},function(t,n,r){var e=r(27).Symbol;t.exports=e},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){this.gl=t,this.shader=n,this.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,-1,1,-1,1,1,-1,1]),t.STATIC_DRAW)}return t.prototype.draw=function(t,n){var r=this.gl;r.useProgram(this.shader),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t);var e=r.getUniformLocation(this.shader,"u_tex");r.uniform1i(e,0),n&&n(r,this.shader),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer);var o=r.getAttribLocation(this.shader,"i_position");r.enableVertexAttribArray(o),r.vertexAttribPointer(o,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLES,0,6)},t.prototype.release=function(){var t=this.gl;t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexBuffer)},t}();n.BufferRenderer=e},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(0),o=r(4);n.Transform={create:function(){return{position:e.vec3.create(),rotation:e.quat.create(),scale:e.vec3.fromValues(1,1,1)}},toMatrix:function(t,n){return e.mat4.fromRotationTranslationScale(n,o.unconst(t.rotation),o.unconst(t.position),o.unconst(t.scale))}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(5),o=r(0),u=r(6),a=r(4),i=r(83),c=o.vec2.create();n.serverPacketSerializer=e.createSimpleSerializer(),n.clientPacketSerializer=e.createSimpleSerializer(),n.PlayerState={create:function(){return{position:o.vec2.create(),angle:0,lastInputUID:""}},lerp:function(t,n,r,e){return o.vec2.lerp(t.position,a.unconst(n.position),a.unconst(r.position),e),t.angle=u.lerpRadians(n.angle,r.angle,e),t.lastInputUID=r.lastInputUID,t},copy:function(t,n){return o.vec2.copy(t.position,a.unconst(n.position)),t.angle=n.angle,t.lastInputUID=n.lastInputUID,t}};var f=function(t,n,r,e){return o.vec2.sub(c,a.unconst(r.mouseWorldPos),a.unconst(n.position)),t.angle=Math.atan2(c[1],c[0]),r.pressing?(o.vec2.normalize(c,c),o.vec2.scale(c,c,.1),o.vec2.add(t.position,a.unconst(n.position),c)):o.vec2.copy(t.position,a.unconst(n.position)),t.lastInputUID=r.uid,t};n.GameState={create:function(){return{tick:0,predictedTick:0,players:{}}},clone:function(t){return i(t)},copy:function(t,r){for(var e in t.tick=r.tick,t.predictedTick=r.predictedTick,function(t,r){for(var e in t.players)e in r.players||delete t.players[e];for(var e in r.players)e in t.players||(t.players[e]=n.PlayerState.create())}(t,r),r.players)n.PlayerState.copy(t.players[e],r.players[e]);return t},lerpNew:function(t,r,e,o){for(var u in n.GameState.copy(t,e),e.players)u in r.players&&n.PlayerState.lerp(t.players[u],r.players[u],e.players[u],o);return t},step:function(t,r,e){for(var o in n.GameState.copy(t,r),t.tick++,t.predictedTick=t.tick,r.players)o in e&&f(t.players[o],r.players[o],e[o]);return t},predict:function(t,r,e,o){return n.GameState.copy(t,r),t.predictedTick++,f(t.players[o],r.players[o],e),t}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(1),o=r(20),u=r(13),a=r(21),i=r(6),c=r(22),f=r(0),s=function(t,n,r,e,o,u){if(n<0||r<0)return u;if(n>=t.width||r>=t.height)return u;var a=t.at(n,r);return a===o?u:a!==e?u:(t.write(n,r,o),u=s(t,n-1,r,e,o,++u),u=s(t,n+1,r,e,o,u),u=s(t,n,r-1,e,o,u),u=s(t,n,r+1,e,o,u))};n.generateCave=function(t){return n.generateCaveVerbose(t).cave},n.generatePartialAutomatonResult=function(t,n){return o.runCellularAutomaton(75,75,t,.48,5,4,n)},n.generateCaveVerbose=function(t){var n,r=o.runCellularAutomaton(75,75,t,.48,5,4,30),l=e.Grid.map(r,function(t,n,r){return r?-1:0}),d=function(t){for(var n=1,r=-1,o=0;;){var u=e.Grid.find(t,function(t,n,r){return 0===r});if(null===u)return r;var a=s(t,u.x,u.y,0,n,0);a>o&&(o=a,r=n),n++}}(l),h=e.Grid.map(l,function(t,n,r){return r!==d});n=h,e.Grid.forEach(e.safeOutOfBounds(n,!0),function(t,r,e){e&&(!e||n.at(t-1,r)||n.at(t+1,r)||n.write(t+1,r,!0),!e||n.at(t,r-1)||n.at(t,r+1)||n.write(t,r+1,!0))});var v=u.markEdges(h),p=u.findContours(v,2),m=p.contours.map(function(t,n){return{i:n,area:i.RectTool.area(i.findBounds(t))}}).sort(function(t,n){return n.area-t.area})[0].i,M=p.contours.map(function(t){return a.smoothCurve(t,10,.7)}),b=M[m].map(function(t,n){return{i:n,len:(t[0]+1)*(t[0]+1)+(t[1]+1)*(t[1]+1)}}).sort(function(t,n){return t.len-n.len})[0].i,g=M[m][b],x=M[m][0===b?M[m].length-1:b-1],y=Math.abs(g[1]-x[1]);M[m].splice(b,0,f.vec2.fromValues(-1,-1+y),f.vec2.fromValues(-1,1),f.vec2.fromValues(1,1),f.vec2.fromValues(1,-1),f.vec2.fromValues(-1,-1),f.vec2.fromValues((g[0]+x[0])/2,(g[1]+x[1])/2));var _=M.map(c.triangulate);return M[m][b][1]-=y,M[m][b+5][0]=x[0],M[m][b+5][1]=x[1],{cave:{edges:M,triangles:_},details:{automatonResult:r,coloredGrid:l,filledGrid:h,edgeMarkedGrid:v,findContoursResult:p,outerMostContourIndex:m,topLeftMostVertexIndex:b}}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=4294967296,o=function(){function t(n){this.seed=void 0!==n?Math.floor(n)%e:t.getRandomSeed()}return t.getRandomSeed=function(){return Math.floor(Math.random()*e)},t.prototype.next=function(){return this.seed=(1664525*this.seed+1013904223)%e,this.seed/e},t.MAX_SEED=e-1,t}();n.PRNG=o},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e,o=r(1),u=r(6),a=r(0);n.markEdges=function(t){for(var n=o.Grid.map(t,function(t,n,r){return{kind:r?"dirt":"air",normal:0}}),r=0;r<t.width;r++)for(var e=0;e<t.height;e++)if(t.at(r,e)){var u=r>0&&!t.at(r-1,e),a=r<t.width-2&&!t.at(r+1,e),i=e>0&&!t.at(r,e-1),c=e<t.height-2&&!t.at(r,e+1);if(u||a||i||c){var f=a&&c?45:c&&u?135:u&&i?-135:i&&a?-45:a?0:c?90:u?180:-90;n.write(r,e,{kind:"edge",normal:f})}}return n},function(t){t[t.Unwalked=0]="Unwalked",t[t.Walked=1]="Walked",t[t.WalkedImportant=2]="WalkedImportant"}(e=n.WalkedStatus||(n.WalkedStatus={})),n.findContours=function(t,n){var r=o.Grid.map(new o.WriteGrid(t.width,t.height),function(t){return e.Unwalked}),u=[],a=0,i=null;do{null!==(i=c(r,t,n))&&i.length>2&&u.push(i)}while(null!=i&&a++<100);return{contours:u,walkMap:r}};var i=function(t,n){for(var r=100,e=0,o=0;o<n.length;++o){var a=n[o],i=Math.abs(u.smallestDifferenceRadians(a.normal*Math.PI/180,t.normal*Math.PI/180));i<r&&(r=i,e=o)}return n[e]},c=function(t,n,r){var u=function(t,n){for(var r=0;r<n.width;r++)for(var o=0;o<n.height;o++)if("edge"===n.at(r,o).kind&&t.at(r,o)===e.Unwalked)return{x:r,y:o};return null}(t,n);if(null===u)return null;n=o.safeOutOfBounds(n,{kind:"dirt",normal:0});var c=[],f=u.x,s=u.y,l=0,d={dx:0,dy:0,normal:0},h=e.Walked,v=[];do{v=[];for(var p=-1;p<=1;p++)for(var m=-1;m<=1;m++)0===p&&0===m||"edge"===n.at(f+p,s+m).kind&&t.at(f+p,s+m)===e.Unwalked&&v.push({dx:p,dy:m,normal:n.at(f+p,s+m).normal});if(v.length>0){var M=i(d,v);f+=M.dx,s+=M.dy;var b=e.Walked;if(M.normal!==d.normal){(0===r||(1===r&&0!=M.dx&&0!=M.dy||h!=e.WalkedImportant))&&(b=e.WalkedImportant)}b===e.WalkedImportant&&c.push(a.vec2.fromValues(2*(f+.5)/n.width-1,2*(s+.5)/n.height-1)),t.write(f,s,b),h=b,d=M}}while(v.length>0&&l++<5e3);return c}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(23),o=r(2),u=r(8),a=r(43),i=r(16),c=r(0),f=r(3),s=r(4),l=c.mat4.create(),d=c.mat4.create(),h=function(t){return e(e(t.edges).map(function(t){return[t[0],-t[1]]}))},v=function(t){var n=0,r=[];return t.triangles.forEach(function(e,o){r=r.concat(e.map(function(t){return t+n})),n+=t.edges[o].length}),r.reverse(),r},p=function(){function t(n,r,e){this.gl=n,this.normalsTexture=e,this.vertexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(h(r)),n.STATIC_DRAW);var o=v(r);this.indexBufferLen=o.length,this.indexBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),n.STATIC_DRAW),this._surfaceInfoBuffers=this.buildSurfaceInfoBuffers(t.SURFACE_INFO_BUFFER_SIZE)}return t.prototype.buildSurfaceInfoBuffers=function(t){var n=this.gl,r=new u.BufferRenderer(n,o.getShaders(n).normals),e=new a.GaussianBlur(n,t,t),c=new a.GaussianBlur(n,t,t),f=new i.FrameBufferTexture(n,t,t),s=o.getShaders(n).flatWhite;n.bindFramebuffer(n.FRAMEBUFFER,f.framebuffer),n.viewport(0,0,t,t),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.useProgram(s),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer);var l=n.getAttribLocation(s,"i_position");return n.enableVertexAttribArray(l),n.vertexAttribPointer(l,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.drawElements(n.TRIANGLES,this.indexBufferLen,n.UNSIGNED_SHORT,0),e.run(f.texture,30),n.bindFramebuffer(n.FRAMEBUFFER,f.framebuffer),n.viewport(0,0,t,t),r.draw(e.resultTexture,function(n,r){n.uniform2f(n.getUniformLocation(r,"u_resolution"),t,t)}),c.run(f.texture,2),n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,n.canvas.width,n.canvas.height),r.release(),{depth:e.releaseTexture(),normal:c.releaseTexture()}},Object.defineProperty(t.prototype,"surfaceInfoBuffers",{get:function(){return this._surfaceInfoBuffers},enumerable:!0,configurable:!0}),t.prototype.drawDemo=function(t,n,r,e){var u=this.gl,a=o.getShaders(u).caveDemo;u.useProgram(a),u.uniform1f(u.getUniformLocation(a,"u_time"),t),u.uniform1f(u.getUniformLocation(a,"u_zoom"),n),u.uniform2f(u.getUniformLocation(a,"u_pointLightPos"),r,e),c.mat4.identity(l),c.mat4.perspective(l,Math.PI/2,1,.01,100),u.uniformMatrix4fv(u.getUniformLocation(a,"u_perspective"),!1,l),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,this._surfaceInfoBuffers.depth),u.uniform1i(u.getUniformLocation(a,"u_depth"),0),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._surfaceInfoBuffers.normal),u.uniform1i(u.getUniformLocation(a,"u_normal"),1),u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,this.normalsTexture),u.uniform1i(u.getUniformLocation(a,"u_normalRocks"),2),u.bindBuffer(u.ARRAY_BUFFER,this.vertexBuffer);var i=u.getAttribLocation(a,"i_position");u.enableVertexAttribArray(i),u.vertexAttribPointer(i,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,this.indexBuffer),u.drawElements(u.TRIANGLES,this.indexBufferLen,u.UNSIGNED_SHORT,0)},t.prototype.draw=function(n,r){var e=this.gl,u=o.getShaders(e).cave;e.useProgram(u),c.mat4.identity(l),c.mat4.scale(l,l,t.CAVE_SCALE),e.uniformMatrix4fv(e.getUniformLocation(u,"u_model"),!1,l),f.Camera.getViewMatrix(n,d),c.mat4.mul(l,d,l),f.Camera.getProjectionMatrix(n,d),c.mat4.mul(l,d,l),e.uniformMatrix4fv(e.getUniformLocation(u,"u_mvp"),!1,l),e.uniform1f(e.getUniformLocation(u,"u_time"),0),e.uniform3fv(e.getUniformLocation(u,"u_shipWorldPos"),s.unconst(r)),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._surfaceInfoBuffers.depth),e.uniform1i(e.getUniformLocation(u,"u_depth"),0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._surfaceInfoBuffers.normal),e.uniform1i(e.getUniformLocation(u,"u_normal"),1),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this.normalsTexture),e.uniform1i(e.getUniformLocation(u,"u_normalRocks"),2),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer);var a=e.getAttribLocation(u,"i_position");e.enableVertexAttribArray(a),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.drawElements(e.TRIANGLES,this.indexBufferLen,e.UNSIGNED_SHORT,0)},t.prototype.release=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this._surfaceInfoBuffers.depth),t.deleteTexture(this._surfaceInfoBuffers.normal)},t.SURFACE_INFO_BUFFER_SIZE=1024,t.CAVE_SIZE=20,t.CAVE_SCALE=c.vec3.fromValues(t.CAVE_SIZE,t.CAVE_SIZE,t.CAVE_SIZE),t}();n.CaveRenderer=p},function(t,n){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n,r){this.gl=t,this.framebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGB,n,r,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}return t.prototype.release=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(this.texture),t.deleteFramebuffer(this.framebuffer)},t.prototype.releaseTexture=function(){var t=this.gl;return t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),this.texture},t}();n.FrameBufferTexture=e},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.loadTexture=function(t,n,r){return new Promise(function(e,o){var u=new Image;u.onload=function(){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,u);var o=void 0===r?t.CLAMP_TO_EDGE:r;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,o),e(n)},u.src=n})}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(19),o=r(44),u={"vector-caves":e.initPost};window.initPost=function(t){return u[t]()},window.initGame=o.initGame,window.initLocalMultiGame=o.initLocalMultiGame},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(11),o=r(1),u=r(13),a=r(0),i=r(14),c=r(8),f=r(17),s=r(2),l=r(12);n.initPost=function(){var t,n,r=document.getElementById("gen-slider"),i=document.getElementById("zeroth-canvas").getContext("2d"),c=document.getElementById("first-canvas").getContext("2d"),f=document.getElementById("second-canvas").getContext("2d"),s=document.getElementById("third-canvas").getContext("2d"),h=document.getElementById("fourth-canvas").getContext("2d"),b=document.getElementById("fifth-canvas").getContext("2d"),g=document.getElementById("sixth-canvas").getContext("2d"),x=document.getElementById("seventh-canvas").getContext("2d"),y=document.getElementById("ninth-canvas").getContext("2d"),_=function(){var n=parseFloat(r.value),u=e.generatePartialAutomatonResult(t,n);o.Grid.forEach(u,function(t,n,r){i.fillStyle=r?"#000":"#FFF",i.fillRect(4*t,4*n,4,4)})};t=l.PRNG.getRandomSeed(),_();var R=e.generateCaveVerbose(t),E=R.cave,A=R.details;n=E,o.Grid.forEach(A.automatonResult,function(t,n,r){c.fillStyle=r?"#000":"#FFF",c.fillRect(4*t,4*n,4,4)}),o.Grid.forEach(A.coloredGrid,function(t,n,r){f.fillStyle=v(r),f.fillRect(4*t,4*n,4,4)}),o.Grid.forEach(A.filledGrid,function(t,n,r){s.fillStyle=r?"#000":"#FFF",s.fillRect(4*t,4*n,4,4)}),o.Grid.forEach(A.edgeMarkedGrid,function(t,n,r){h.fillStyle="edge"===r.kind?p(r.normal):"air"===r.kind?"#655":"#77f",h.fillRect(4*t,4*n,4,4)});var w=A.findContoursResult;o.Grid.forEach(w.walkMap,function(t,n,r){b.fillStyle=r===u.WalkedStatus.WalkedImportant?"#fff":r===u.WalkedStatus.Walked?"#333":"#000",b.fillRect(4*t,4*n,4,4),g.fillStyle=r===u.WalkedStatus.WalkedImportant?"#333":"#000",g.fillRect(9*t,9*n,9,9)});var T=function(t){return a.vec2.fromValues(337.5*(1+t[0]),337.5*(1+t[1]))};w.contours.forEach(function(t,n){g.strokeStyle=n===A.outerMostContourIndex?"#f00":"#933",g.beginPath();var r=T(t[0]);g.moveTo(r[0],r[1]);for(var e=1;e<t.length;++e){var o=T(t[e]);g.lineTo(o[0],o[1])}g.closePath(),g.stroke()}),x.strokeStyle="#0f0",x.fillStyle="#000",x.fillRect(0,0,675,675),E.edges.forEach(function(t,n){x.strokeStyle=n===A.outerMostContourIndex?"#0f0":"#393",x.beginPath();var r=T(t[0]);x.moveTo(r[0],r[1]);for(var e=1;e<t.length;++e){var o=T(t[e]);x.lineTo(o[0],o[1])}x.closePath(),x.stroke()}),y.fillStyle="#000",y.fillRect(0,0,675,675),E.triangles.forEach(function(t,n){for(var r=function(r){y.fillStyle=d(),y.beginPath();var e=T(E.edges[n][t[r]]);y.moveTo(e[0],e[1]),[1,2,0].forEach(function(e){var o=T(E.edges[n][t[r+e]]);y.lineTo(o[0],o[1])}),y.fill()},e=0;e<t.length-2;e+=3)r(e)}),r.oninput=r.onchange=_,document.getElementById("generate-new").onclick=function(){return location.reload()};var S=[0,1,2].map(function(t){return document.getElementById("canvas"+t).getContext("webgl")});m(n,"depth",S[0]),m(n,"normal",S[1]),M(n,S[2])};var d=function(){var t=function(){var t=Math.floor(256*Math.random()).toString(16);return t.length<2&&(t="0"+t),t};return"#"+t()+t()+t()},h=[0,0,0,0,0,0,0,0,0,0].map(function(t){return d()}),v=function(t){return t<0?"#000":h[t%h.length]},p=function(t){var n=Math.cos(t*Math.PI/180),r=Math.sin(t*Math.PI/180),e=Math.round(15*(.5*n+.5)),o=Math.round(15*(.5*r+.5));return"#"+e.toString(16)+o.toString(16)+"f"},m=function(t,n,r){var e=new i.CaveRenderer(r,t,null).surfaceInfoBuffers,o=new c.BufferRenderer(r,s.getShaders(r).bufferCopy);o.draw("depth"===n?e.depth:e.normal),o.release(),r.deleteTexture(e.depth),r.deleteTexture(e.normal)},M=function(t,n){var r={x:0,y:0},e=!1,o=0;n.canvas.onmousemove=function(t){var e=n.canvas.getBoundingClientRect();r.x=(t.clientX-e.left)/n.canvas.width,r.y=1-(t.clientY-e.top)/n.canvas.height},n.canvas.onmousedown=function(t){return e=!0},n.canvas.onmouseleave=n.canvas.onmouseout=n.canvas.onmouseup=function(t){return e=!1},f.loadTexture(n,"caveWalls.png",n.REPEAT).then(function(u){var a=new i.CaveRenderer(n,t,u),c=Date.now(),f=function(){n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);var t=Date.now()-c;e&&(o+=.02);var u=.55+.45*Math.cos(o);a.drawDemo(t,u,r.x,r.y),requestAnimationFrame(f)};requestAnimationFrame(f)})}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(12),o=r(1),u=function(t,n,r){for(var e=0,o=n-1;o<=n+1;++o)for(var u=r-1;u<=r+1;++u)o==n&&u==r||(o<1||u<1||o>=t.width-1||u>=t.height-1?e++:e+=t.at(o,u)?1:0);return e};n.runCellularAutomaton=function(t,n,r,a,i,c,f){for(var s=new o.WriteGrid(t,n),l=new o.WriteGrid(t,n),d=new e.PRNG(r),h=0;h<t;++h)for(var v=0;v<n;++v){var p=0===h||0===v||h===t-1||v===n-1||d.next()<a;s.write(h,v,p),l.write(h,v,p)}for(var m=0;m<f;++m){for(h=1;h<t-1;++h)for(v=1;v<n-1;++v){var M=u(s,h,v);l.write(h,v,M>=(s.at(h,v)?c:i))}s.copyFrom(l)}return s}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(0);n.smoothCurve=function(t,n,r){var o=[];n<1&&(n=1);for(var u=0;u<t.length;++u){var a=t[0==u?t.length-1:u-1],i=t[u],c=t[(u+1)%t.length],f=e.vec2.length(e.vec2.sub(e.vec2.create(),a,i)),s=e.vec2.length(e.vec2.sub(e.vec2.create(),i,c)),l=e.vec2.add(e.vec2.create(),a,i);e.vec2.scale(l,l,.5);var d=e.vec2.add(e.vec2.create(),i,c);e.vec2.scale(d,d,.5);var h=e.vec2.sub(e.vec2.create(),l,d);e.vec2.scale(h,h,r);var v=e.vec2.scale(e.vec2.create(),h,f/(f+s)),p=e.vec2.scale(e.vec2.create(),h,-s/(f+s));o.push({pt:i,controlA:e.vec2.add(e.vec2.create(),v,i),controlB:e.vec2.add(e.vec2.create(),p,i)})}var m=1/n,M=[];for(u=0;u<o.length;++u){i=o[u],c=o[(u+1)%o.length];for(var b=0;b<1-m/2;b+=m){var g=e.vec2.fromValues(0,0);e.vec2.scaleAndAdd(g,g,i.pt,(1-b)*(1-b)*(1-b)),e.vec2.scaleAndAdd(g,g,i.controlB,3*(1-b)*(1-b)*b),e.vec2.scaleAndAdd(g,g,c.controlA,3*(1-b)*b*b),e.vec2.scaleAndAdd(g,g,c.pt,b*b*b),M.push(g)}}return M}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.triangulate=function(t){var n=[],r=t.length;if(r<3)return n;var o=new Array(r);if(e(t)>0)for(var a=0;a<r;a++)o[a]=a;else for(a=0;a<r;a++)o[a]=r-1-a;var i=r,c=2*i;for(a=i-1;i>2;){if(c--<=0)return n;var f=a;i<=f&&(f=0),i<=(a=f+1)&&(a=0);var s=a+1;if(i<=s&&(s=0),u(t,f,a,s,i,o)){n.push(o[f]),n.push(o[a]),n.push(o[s]);for(var l=a,d=a+1;d<i;l++,d++)o[l]=o[d];c=2*--i}}return n};var e=function(t){for(var n=0,r=t.length-1,e=0;e<t.length;r=e++)n+=t[r][0]*t[e][1]-t[e][0]*t[r][1];return n/2},o=function(t,n,r,e){var o=r[0]-n[0],u=r[1]-n[1],a=t[0]-r[0],i=t[1]-r[1],c=n[0]-t[0],f=n[1]-t[1],s=e[0]-t[0],l=e[1]-t[1],d=e[0]-n[0],h=e[1]-n[1],v=e[0]-r[0],p=e[1]-r[1];return o*h-u*d>=0&&a*p-i*v>=0&&c*l-f*s>=0},u=function(t,n,r,e,u,a){var i=t[a[n]],c=t[a[r]],f=t[a[e]];if((c[0]-i[0])*(f[1]-i[1])-(c[1]-i[1])*(f[0]-i[0])<1e-7)return!1;for(var s=0;s<u;s++)if(s!=n&&s!=r&&s!=e){var l=t[a[s]];if(o(i,c,f,l))return!1}return!0}},function(t,n,r){var e=r(24);t.exports=function(t){return null!=t&&t.length?e(t,1):[]}},function(t,n,r){var e=r(25),o=r(26);t.exports=function t(n,r,u,a,i){var c=-1,f=n.length;for(u||(u=o),i||(i=[]);++c<f;){var s=n[c];r>0&&u(s)?r>1?t(s,r-1,u,a,i):e(i,s):a||(i[i.length]=s)}return i}},function(t,n){t.exports=function(t,n){for(var r=-1,e=n.length,o=t.length;++r<e;)t[o+r]=n[r];return t}},function(t,n,r){var e=r(7),o=r(30),u=r(35),a=e?e.isConcatSpreadable:void 0;t.exports=function(t){return u(t)||o(t)||!!(a&&t&&t[a])}},function(t,n,r){var e=r(28),o="object"==typeof self&&self&&self.Object===Object&&self,u=e||o||Function("return this")();t.exports=u},function(t,n,r){(function(n){var r="object"==typeof n&&n&&n.Object===Object&&n;t.exports=r}).call(this,r(29))},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){var e=r(31),o=r(15),u=Object.prototype,a=u.hasOwnProperty,i=u.propertyIsEnumerable,c=e(function(){return arguments}())?e:function(t){return o(t)&&a.call(t,"callee")&&!i.call(t,"callee")};t.exports=c},function(t,n,r){var e=r(32),o=r(15),u="[object Arguments]";t.exports=function(t){return o(t)&&e(t)==u}},function(t,n,r){var e=r(7),o=r(33),u=r(34),a="[object Null]",i="[object Undefined]",c=e?e.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?i:a:c&&c in Object(t)?o(t):u(t)}},function(t,n,r){var e=r(7),o=Object.prototype,u=o.hasOwnProperty,a=o.toString,i=e?e.toStringTag:void 0;t.exports=function(t){var n=u.call(t,i),r=t[i];try{t[i]=void 0;var e=!0}catch(t){}var o=a.call(t);return e&&(n?t[i]=r:delete t[i]),o}},function(t,n){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,n){var r=Array.isArray;t.exports=r},function(t,n){t.exports="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = texture2D(u_tex, v_uv);\r\n    }\r\n\r\n#endif\r\n"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform mat4 u_model;\r\nuniform mat4 u_mvp;\r\nuniform sampler2D u_depth;\r\nuniform sampler2D u_normal;\r\nuniform sampler2D u_normalRocks;\r\nuniform float u_time;\r\nuniform vec3 u_shipWorldPos;\r\n\r\nvarying vec2 v_uv;\r\nvarying vec4 v_worldPos;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        v_uv = i_position*0.5 + 0.5;\r\n        v_worldPos = u_model * vec4(i_position, 0, 1);\r\n        gl_Position = u_mvp * vec4(i_position, 0, 1);\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    #define BASE_RADIUS 0.25\r\n    #define FADE_RADIUS 2.75\r\n\r\n    mat3 axisAngle(vec3 normalizedAxis, float angle)\r\n    {\r\n        float x = normalizedAxis.x;\r\n        float y = normalizedAxis.y;\r\n        float z = normalizedAxis.z;\r\n        float s = sin(angle);\r\n        float c = cos(angle);\r\n        float t = 1. - c;\r\n\r\n        return mat3(\r\n            t*x*x + c   , t*x*y - z*s , t*x*z + y*s ,\r\n            t*x*y + z*s , t*y*y + c   , t*y*z - x*s ,\r\n            t*x*z - y*s , t*y*z + x*s , t*z*z + c\r\n        );\r\n    }\r\n\r\n    float ptLightAmount(vec2 pos, vec2 normal)\r\n    {\r\n        vec2 toPtLight = pos - u_shipWorldPos.xy;\r\n        float intensity = clamp((1. + BASE_RADIUS) - length(toPtLight) / FADE_RADIUS, 0., 1.);\r\n        float reflectedLight = clamp(dot(normalize(toPtLight), normal), 0., 1.);\r\n        return intensity * reflectedLight;\r\n    }\r\n\r\n    void main()\r\n    {\r\n        float sint = 1.;//0.5+0.5*sin(u_time/500.);\r\n\r\n        vec2 surfDir = 2.*texture2D(u_normal, v_uv).rg - 1.;\r\n        float surfDepth = clamp(1.- texture2D(u_depth, v_uv).r, 0., 1.);\r\n        surfDepth *= surfDepth;\r\n\r\n        vec2 uv1 = v_uv - sint*surfDir*asin(surfDepth*0.05);\r\n        vec2 lookup = uv1;\r\n        lookup.x = 1. - lookup.x;\r\n        lookup.y = 1. - lookup.y;\r\n        vec2 normalRocks2d = 2.*texture2D(u_normalRocks, 5.*lookup).rg - 1.;\r\n        normalRocks2d *= -1.;\r\n        vec3 normalRocks = normalize(vec3(normalRocks2d, 1. - length(normalRocks2d)));\r\n        normalRocks = axisAngle(normalize(vec3(surfDir.y, -surfDir.x, 0)), sint*3.14159*surfDepth) * normalRocks;\r\n\r\n        vec3 baseColor = vec3(1,1,1) * ptLightAmount(v_worldPos.xy, normalRocks.xy);\r\n        gl_FragColor = vec4(mix(baseColor, vec3(0), 1.-sqrt(surfDepth)), 1);\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform sampler2D u_depth;\r\nuniform sampler2D u_normal;\r\nuniform sampler2D u_normalRocks;\r\nuniform mat4 u_perspective;\r\nuniform float u_time;\r\nuniform float u_zoom;\r\nuniform vec2 u_pointLightPos;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        vec2 pospos = i_position - (2.*u_pointLightPos-1.)*(1. - u_zoom);\r\n        gl_Position = u_perspective * vec4(pospos, -u_zoom, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    mat3 axisAngle(vec3 normalizedAxis, float angle)\r\n    {\r\n        float x = normalizedAxis.x;\r\n        float y = normalizedAxis.y;\r\n        float z = normalizedAxis.z;\r\n        float s = sin(angle);\r\n        float c = cos(angle);\r\n        float t = 1. - c;\r\n\r\n        return mat3(\r\n            t*x*x + c   , t*x*y - z*s , t*x*z + y*s ,\r\n            t*x*y + z*s , t*y*y + c   , t*y*z - x*s ,\r\n            t*x*z - y*s , t*y*z + x*s , t*z*z + c\r\n        );\r\n    }\r\n\r\n    float ptLightAmount(vec2 uv, vec2 normal)\r\n    {\r\n        vec2 toPtLight = uv - u_pointLightPos;\r\n        float ptLightIntensity = 1.6 + .4 * sin(u_time/100.);\r\n        float LightAmount = clamp(dot(normalize(toPtLight), normal), 0., 1.);\r\n        float distToPtLight = 20. * length(toPtLight);\r\n        LightAmount *= ptLightIntensity / max(1., distToPtLight * distToPtLight);\r\n        return LightAmount;\r\n    }\r\n\r\n    float dirLightAmount(vec2 dir, vec2 normal)\r\n    {\r\n        return clamp(dot(normalize(dir), normal), 0., 1.);\r\n    }\r\n\r\n    void main()\r\n    {\r\n        float sint = 1.;//0.5+0.5*sin(u_time/500.);\r\n\r\n        vec2 surfDir = 2.*texture2D(u_normal, v_uv).rg - 1.;\r\n        float surfDepth = clamp(1.- texture2D(u_depth, v_uv).r, 0., 1.);\r\n        surfDepth *= surfDepth;\r\n\r\n        vec2 uv1 = v_uv - sint*surfDir*asin(surfDepth*0.05);\r\n        vec2 lookup = uv1;\r\n        lookup.x = 1. - lookup.x;\r\n        lookup.y = 1. - lookup.y;\r\n        vec2 normalRocks2d = 2.*texture2D(u_normalRocks, 5.*lookup).rg - 1.;\r\n        normalRocks2d *= -1.;\r\n        vec3 normalRocks = normalize(vec3(normalRocks2d, 1. - length(normalRocks2d)));\r\n\r\n        normalRocks = axisAngle(normalize(vec3(surfDir.y, -surfDir.x, 0)), sint*3.14159*surfDepth) * normalRocks;\r\n\r\n        vec3 baseColor = vec3(0,0,0);\r\n\r\n        // Point light\r\n        baseColor += vec3(1,1,1) * ptLightAmount(v_uv, normalRocks.xy);\r\n\r\n        // Dir lights\r\n        baseColor += vec3(1,.2,.1) * dirLightAmount(vec2(1,-.5), normalRocks.xy);\r\n        baseColor += vec3(.2,1,.1) * dirLightAmount(vec2(0,1), normalRocks.xy);\r\n        baseColor += vec3(.5,.5,1) * dirLightAmount(vec2(-1,-.5), normalRocks.xy);\r\n\r\n        gl_FragColor = mix(vec4(baseColor, 1), vec4(0,0,0,1), 1.-sqrt(surfDepth));\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = vec4(1, 1, 1, 1);\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform vec2 u_resolution;\r\nuniform vec2 u_direction;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    vec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction)\r\n    {\r\n        vec4 color = vec4(0.0);\r\n        vec2 off1 = vec2(1.411764705882353) * direction;\r\n        vec2 off2 = vec2(3.2941176470588234) * direction;\r\n        vec2 off3 = vec2(5.176470588235294) * direction;\r\n        color += texture2D(image, uv) * 0.1964825501511404;\r\n        color += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\r\n        color += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\r\n        color += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\r\n        color += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\r\n        color += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\r\n        color += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\r\n        return color;\r\n    }\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = blur13(u_tex, v_uv, u_resolution, u_direction);\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform vec2 u_resolution;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    vec2 sampleTap(vec4 tap, vec2 dir)\r\n    {\r\n        dir /= u_resolution;\r\n        vec4 outTap = texture2D(u_tex, v_uv + dir);\r\n        return (outTap - tap).r * dir;\r\n    }\r\n\r\n    void main()\r\n    {\r\n        vec4 tap = texture2D(u_tex, v_uv);\r\n\r\n        vec2 dir = normalize(\r\n              sampleTap(tap, vec2( 1.5, 0.))\r\n            + sampleTap(tap, vec2(-1.5, 0.))\r\n            + sampleTap(tap, vec2(0., -1.5))\r\n            + sampleTap(tap, vec2(0.,  1.5))\r\n            + sampleTap(tap, vec2( 1.5,  1.5))\r\n            + sampleTap(tap, vec2( 1.5, -1.5))\r\n            + sampleTap(tap, vec2(-1.5, -1.5))\r\n            + sampleTap(tap, vec2(-1.5,  1.5))\r\n        );\r\n\r\n        gl_FragColor = vec4(dir*0.5+0.5, 1, 1);\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform mat4 u_mvp;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(i_position, 0, 1);\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = vec4(0.4, 0.4, 0.4, 1);\r\n    }\r\n\r\n#endif\r\n"},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(16),o=r(8),u=r(2),a=function(){function t(t,n,r){this.gl=t,this.width=n,this.height=r,this.bufferRenderer=new o.BufferRenderer(t,u.getShaders(t).gaussianBlur),this.frameTex0=new e.FrameBufferTexture(t,n,r),this.frameTex1=new e.FrameBufferTexture(t,n,r)}return t.prototype.run=function(t,n){var r=this,e=this.gl;n<1&&(n=1);for(var o=0;o<n;++o)e.bindFramebuffer(e.FRAMEBUFFER,this.frameTex0.framebuffer),0===o&&e.viewport(0,0,this.width,this.height),this.bufferRenderer.draw(0===o?t:this.frameTex1.texture,function(t,n){t.uniform2f(t.getUniformLocation(n,"u_resolution"),r.width,r.height),t.uniform2f(t.getUniformLocation(n,"u_direction"),1,0)}),e.bindFramebuffer(e.FRAMEBUFFER,this.frameTex1.framebuffer),this.bufferRenderer.draw(this.frameTex0.texture,function(t,n){t.uniform2f(t.getUniformLocation(n,"u_resolution"),r.width,r.height),t.uniform2f(t.getUniformLocation(n,"u_direction"),0,1)})},Object.defineProperty(t.prototype,"resultTexture",{get:function(){return this.frameTex1.texture},enumerable:!0,configurable:!0}),t.prototype.release=function(){this.bufferRenderer.release(),this.frameTex0.release(),this.frameTex1.release()},t.prototype.releaseTexture=function(){return this.bufferRenderer.release(),this.frameTex0.release(),this.frameTex1.releaseTexture()},t}();n.GaussianBlur=a},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(5),o=r(45),u=r(46),a=r(10);n.initGame=function(){void 0===window.io?console.log("Socket.io not available."):console.log("Socket.io found!");var t=document.getElementById("game-canvas"),n=document.getElementById("game-span"),r=new e.LocalNetwork(a.serverPacketSerializer,a.clientPacketSerializer),i=r.createClient(),c=new o.GameServer(r.server),f=new u.GameClient(t,n,i,1338);c.notifyClientConnect(i.id);var s=function(){t.width=window.innerWidth,t.height=window.innerHeight,f.notifyCanvasResize()};window.addEventListener("resize",s),s()},n.initLocalMultiGame=function(){var t=document.getElementById("canvas-0"),n=document.getElementById("span-0"),r=document.getElementById("canvas-1"),i=document.getElementById("span-1"),c=new e.LocalNetwork(a.serverPacketSerializer,a.clientPacketSerializer),f=new o.GameServer(c.server),s=function(t,n,r){return setTimeout(function(){var r=c.createClient();new u.GameClient(t,n,r,1338),f.notifyClientConnect(r.id)},r)};s(t,n,500),s(r,i,1e3)}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(5),o=r(10),u=function(){function t(t){this.net=t,this.tickIntervalID=setInterval(this.tick.bind(this),e.TICK_LENGTH_MS),this.state=o.GameState.create(),this.latestPlayerInputs={}}return t.prototype.tick=function(){for(var t=this.net.receiveAllPackets(),n=0;n<t.length;++n){var r=t[n];this.latestPlayerInputs[r.senderId]=r.packet}o.GameState.step(this.state,this.state,this.latestPlayerInputs),this.net.sendPacket(this.state)},t.prototype.notifyClientConnect=function(t){this.state.players[t]=o.PlayerState.create()},t.prototype.notifyClientDisconnect=function(t){delete this.state.players[t]},t.prototype.release=function(){clearInterval(this.tickIntervalID)},t}();n.GameServer=u},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(5),o=r(10),u=r(47),a=r(11),i=r(17),c=r(49),f=r(0),s=r(3),l=r(51),d=o.GameState.create(),h=f.vec3.create(),v=function(t){return Promise.all([i.loadTexture(t,"caveWalls.png",t.REPEAT)]).then(function(t){return{caveTexture:t[0]}})},p=function(){function t(t,n,r,e){var i=this,f=t.getContext("webgl"),s=a.generateCave(e);this.gl=f,this.span=n,this.net=r,this.inputGrabber=new c.InputGrabber(t),this.running=!1,this.inputStack=[],this.curState=o.GameState.create(),v(f).then(function(t){i.gameRenderer=new u.GameRenderer(f,s,t.caveTexture),i.runUpdateLoop()})}return t.prototype.runUpdateLoop=function(){var t=this;this.running=!0;var n=function(){t.mainLoop(),t.running?requestAnimationFrame(n):t.stoppedRunning()};this.lastUpdateTime=Date.now(),this.tickAccumulator=0,n()},t.prototype.mainLoop=function(){var t=Date.now(),n=t-this.lastUpdateTime;this.lastUpdateTime=t,this.tickAccumulator+=n;var r=this.net.receivePacket();if(r&&this.receiveStateFromServer(r.packet),this.curState.players[this.net.id])for(;this.tickAccumulator>=e.TICK_LENGTH_MS;){this.tickAccumulator-=e.TICK_LENGTH_MS;var u=this.readInputs(this.curState.tick);o.GameState.predict(d,this.curState,u,this.net.id),this.inputStack.push(u),this.inputStack.length>100&&this.inputStack.splice(0,1),this.net.sendPacket(u),this.render()}},t.prototype.render=function(){this.gameRenderer.draw(this.curState,this.net.id)},t.prototype.receiveStateFromServer=function(t){if(t.players[this.net.id]){for(var n=this.inputStack.length;--n>=0&&t.players[this.net.id].lastInputUID!==this.inputStack[n].uid;);if(this.curState=t,n>=0)for(var r=n+1;r<this.inputStack.length;++r)this.curState=o.GameState.predict(o.GameState.create(),this.curState,this.inputStack[r],this.net.id)}},t.prototype.readInputs=function(t){return s.Camera.screenPointToWorldXYPlanePoint(this.gameRenderer.camera,this.inputGrabber.mouseScreenPoint,h),{tick:t,uid:l.generateUID(),pressing:this.inputGrabber.mouseDown,mouseWorldPos:f.vec2.fromValues(h[0],h[1])}},t.prototype.stoppedRunning=function(){this.gameRenderer.release(),this.inputGrabber.release(),this.gl.getExtension("WEBGL_lose_context").loseContext(),this.onStoppedRunningCallback&&this.onStoppedRunningCallback()},t.prototype.notifyCanvasResize=function(){this.gameRenderer&&this.gameRenderer.notifyCanvasResize()},t.prototype.release=function(t){this.onStoppedRunningCallback=t,this.running=!1},t}();n.GameClient=p},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(14),o=r(48),u=r(3),a=r(9),i=r(0),c=a.Transform.create(),f=function(){function t(t,n,r){this.gl=t,this.caveRenderer=new e.CaveRenderer(t,n,r),this.shipRenderer=new o.ShipRenderer(t),this._camera=u.Camera.create(),this._camera.transform.position[2]=5,t.clearColor(0,0,0,1),this.notifyCanvasResize()}return Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),t.prototype.draw=function(t,n){var r=this.gl;for(var e in r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),t.players){var o=t.players[e];c.position[0]=o.position[0],c.position[1]=o.position[1],e===n&&this.caveRenderer.draw(this._camera,c.position),i.quat.fromEuler(c.rotation,0,0,180/Math.PI*o.angle),this.shipRenderer.draw(this._camera,c)}},t.prototype.notifyCanvasResize=function(){var t=this.gl;t.viewport(0,0,t.canvas.width,t.canvas.height),u.Camera.updateAspectRatio(this._camera,t.canvas.width,t.canvas.height)},t.prototype.release=function(){this.caveRenderer.release(),this.shipRenderer.release()},t}();n.GameRenderer=f},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(0),o=r(2),u=r(9),a=r(3),i=e.mat4.create(),c=e.mat4.create(),f=[.2492,0,.1102,-.0237,.1333,-.081,.04749999,-.0506,.0031,-.0564,-.0337,-.1155,-.003200002,-.1747,-.09190001,-.149,-.1102,-.084,-.158,-.0931,-.158,-.0332,-.1347,0,-.158,.0332,-.158,.0931,-.1102,.084,-.09190001,.149,-.003200002,.1747,-.0337,.1155,.0031,.0564,.04749999,.0506,.1333,.081,.1102,.0237],s=[1,0,11,3,1,11,4,3,11,5,4,11,8,5,11,9,8,11,10,9,11,2,1,3,6,5,7,7,5,8,21,11,0,19,11,21,18,11,19,17,11,18,14,11,17,13,11,14,12,11,13,20,19,21,15,14,17,16,15,17],l=function(){function t(t){this.gl=t,this.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(f),t.STATIC_DRAW),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW)}return t.prototype.draw=function(t,n){var r=this.gl,f=o.getShaders(r).ship;r.useProgram(f),u.Transform.toMatrix(n,i),a.Camera.getViewMatrix(t,c),e.mat4.mul(i,c,i),a.Camera.getProjectionMatrix(t,c),e.mat4.mul(i,c,i),r.uniformMatrix4fv(r.getUniformLocation(f,"u_mvp"),!1,i),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer);var l=r.getAttribLocation(f,"i_position");r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.drawElements(r.TRIANGLES,s.length,r.UNSIGNED_SHORT,0)},t.prototype.release=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();n.ShipRenderer=l},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(0),o=r(50),u=function(){function t(t){this.eventBinder=new o.EventBinder(this),this.canvas=t,this._mouseDown=!1,this.mouseScreenPoint=e.vec2.create(),this.canvasBoundingRect={left:0,top:0},this.eventBinder.bind(t,"mousemove",this.onMouseMove),this.eventBinder.bind(t,"mousedown",this.onMouseDown),this.eventBinder.bind(t,"mouseup",this.onMouseButtonNegative),this.eventBinder.bind(t,"mouseout",this.onMouseButtonNegative),this.eventBinder.bind(t,"mouseleave",this.onMouseButtonNegative),this.eventBinder.bind(window,"scroll",this.onWindowChange),this.eventBinder.bind(window,"resize",this.onWindowChange),this.onWindowChange()}return Object.defineProperty(t.prototype,"mouseDown",{get:function(){return this._mouseDown},enumerable:!0,configurable:!0}),t.prototype.onMouseDown=function(){this._mouseDown=!0},t.prototype.onMouseButtonNegative=function(){this._mouseDown=!1},t.prototype.onWindowChange=function(){var t=this.canvas.getBoundingClientRect();this.canvasBoundingRect.left=t.left+this.canvas.clientLeft,this.canvasBoundingRect.top=t.top+this.canvas.clientTop},t.prototype.onMouseMove=function(t){this.mouseScreenPoint[0]=(t.clientX-this.canvasBoundingRect.left)/this.canvas.width,this.mouseScreenPoint[1]=1-(t.clientY-this.canvasBoundingRect.top)/this.canvas.height},t.prototype.release=function(){this.eventBinder.unbindAll()},t}();n.InputGrabber=u},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t){this.bindings=[],this.thisArg=t}return t.prototype.bind=function(t,n,r){var e={target:t,event:n,listener:r.bind(this.thisArg)};t.addEventListener(n,e.listener),this.bindings.push(e)},t.prototype.unbindAll=function(){this.bindings.forEach(function(t){return t.target.removeEventListener(t.event,t.listener)}),this.bindings.length=0},t}();n.EventBinder=e},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.generateUID=function(){return Math.random().toString(36).substr(2)}},function(t,n,r){var e=r(96),o=r(99);t.exports=function(t,n){var r=o(t,n);return e(r)?r:void 0}},function(t,n){t.exports=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}},function(t,n,r){var e=r(86),o=r(87),u=r(88),a=r(89),i=r(90);function c(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}c.prototype.clear=e,c.prototype.delete=o,c.prototype.get=u,c.prototype.has=a,c.prototype.set=i,t.exports=c},function(t,n,r){var e=r(68);t.exports=function(t,n){for(var r=t.length;r--;)if(e(t[r][0],n))return r;return-1}},function(t,n,r){var e=r(52)(Object,"create");t.exports=e},function(t,n,r){var e=r(109);t.exports=function(t,n){var r=t.__data__;return e(n)?r["string"==typeof n?"string":"hash"]:r.map}},function(t,n,r){var e=r(71),o=r(72);t.exports=function(t,n,r,u){var a=!r;r||(r={});for(var i=-1,c=n.length;++i<c;){var f=n[i],s=u?u(r[f],t[f],f,r,t):void 0;void 0===s&&(s=t[f]),a?o(r,f,s):e(r,f,s)}return r}},function(t,n,r){var e=r(52)(r(27),"Map");t.exports=e},function(t,n,r){var e=r(73),o=r(121),u=r(77);t.exports=function(t){return u(t)?e(t):o(t)}},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n){t.exports=function(t){return function(n){return t(n)}}},function(t,n,r){(function(t){var e=r(28),o=n&&!n.nodeType&&n,u=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=u&&u.exports===o&&e.process,i=function(){try{var t=u&&u.require&&u.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=i}).call(this,r(61)(t))},function(t,n){var r=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||r)}},function(t,n,r){var e=r(129),o=r(79),u=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(t){return null==t?[]:(t=Object(t),e(a(t),function(n){return u.call(t,n)}))}:o;t.exports=i},function(t,n,r){var e=r(133),o=r(59),u=r(134),a=r(135),i=r(136),c=r(32),f=r(70),s=f(e),l=f(o),d=f(u),h=f(a),v=f(i),p=c;(e&&"[object DataView]"!=p(new e(new ArrayBuffer(1)))||o&&"[object Map]"!=p(new o)||u&&"[object Promise]"!=p(u.resolve())||a&&"[object Set]"!=p(new a)||i&&"[object WeakMap]"!=p(new i))&&(p=function(t){var n=c(t),r="[object Object]"==n?t.constructor:void 0,e=r?f(r):"";if(e)switch(e){case s:return"[object DataView]";case l:return"[object Map]";case d:return"[object Promise]";case h:return"[object Set]";case v:return"[object WeakMap]"}return n}),t.exports=p},function(t,n,r){var e=r(139);t.exports=function(t){var n=new t.constructor(t.byteLength);return new e(n).set(new e(t)),n}},function(t,n){t.exports=function(t,n){return t===n||t!=t&&n!=n}},function(t,n,r){var e=r(32),o=r(53),u="[object AsyncFunction]",a="[object Function]",i="[object GeneratorFunction]",c="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var n=e(t);return n==a||n==i||n==u||n==c}},function(t,n){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,n,r){var e=r(72),o=r(68),u=Object.prototype.hasOwnProperty;t.exports=function(t,n,r){var a=t[n];u.call(t,n)&&o(a,r)&&(void 0!==r||n in t)||e(t,n,r)}},function(t,n,r){var e=r(114);t.exports=function(t,n,r){"__proto__"==n&&e?e(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}},function(t,n,r){var e=r(116),o=r(30),u=r(35),a=r(74),i=r(118),c=r(119),f=Object.prototype.hasOwnProperty;t.exports=function(t,n){var r=u(t),s=!r&&o(t),l=!r&&!s&&a(t),d=!r&&!s&&!l&&c(t),h=r||s||l||d,v=h?e(t.length,String):[],p=v.length;for(var m in t)!n&&!f.call(t,m)||h&&("length"==m||l&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||i(m,p))||v.push(m);return v}},function(t,n,r){(function(t){var e=r(27),o=r(117),u=n&&!n.nodeType&&n,a=u&&"object"==typeof t&&t&&!t.nodeType&&t,i=a&&a.exports===u?e.Buffer:void 0,c=(i?i.isBuffer:void 0)||o;t.exports=c}).call(this,r(61)(t))},function(t,n){var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,n){t.exports=function(t,n){return function(r){return t(n(r))}}},function(t,n,r){var e=r(69),o=r(75);t.exports=function(t){return null!=t&&o(t.length)&&!e(t)}},function(t,n,r){var e=r(73),o=r(124),u=r(77);t.exports=function(t){return u(t)?e(t,!0):o(t)}},function(t,n){t.exports=function(){return[]}},function(t,n,r){var e=r(25),o=r(81),u=r(65),a=r(79),i=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)e(n,u(t)),t=o(t);return n}:a;t.exports=i},function(t,n,r){var e=r(76)(Object.getPrototypeOf,Object);t.exports=e},function(t,n,r){var e=r(25),o=r(35);t.exports=function(t,n,r){var u=n(t);return o(t)?u:e(u,r(t))}},function(t,n,r){var e=r(84),o=1,u=4;t.exports=function(t){return e(t,o|u)}},function(t,n,r){var e=r(85),o=r(113),u=r(71),a=r(115),i=r(123),c=r(126),f=r(127),s=r(128),l=r(130),d=r(131),h=r(132),v=r(66),p=r(137),m=r(138),M=r(144),b=r(35),g=r(74),x=r(146),y=r(53),_=r(148),R=r(60),E=1,A=2,w=4,T="[object Arguments]",S="[object Function]",P="[object GeneratorFunction]",B="[object Object]",j={};j[T]=j["[object Array]"]=j["[object ArrayBuffer]"]=j["[object DataView]"]=j["[object Boolean]"]=j["[object Date]"]=j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Map]"]=j["[object Number]"]=j[B]=j["[object RegExp]"]=j["[object Set]"]=j["[object String]"]=j["[object Symbol]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j["[object Error]"]=j[S]=j["[object WeakMap]"]=!1,t.exports=function t(n,r,F,I,D,k){var U,C=r&E,L=r&A,O=r&w;if(F&&(U=D?F(n,I,D,k):F(n)),void 0!==U)return U;if(!y(n))return n;var G=b(n);if(G){if(U=p(n),!C)return f(n,U)}else{var z=v(n),q=z==S||z==P;if(g(n))return c(n,C);if(z==B||z==T||q&&!D){if(U=L||q?{}:M(n),!C)return L?l(n,i(U,n)):s(n,a(U,n))}else{if(!j[z])return D?n:{};U=m(n,z,C)}}k||(k=new e);var N=k.get(n);if(N)return N;if(k.set(n,U),_(n))return n.forEach(function(e){U.add(t(e,r,F,e,n,k))}),U;if(x(n))return n.forEach(function(e,o){U.set(o,t(e,r,F,o,n,k))}),U;var V=O?L?h:d:L?keysIn:R,X=G?void 0:V(n);return o(X||n,function(e,o){X&&(e=n[o=e]),u(U,o,t(e,r,F,o,n,k))}),U}},function(t,n,r){var e=r(54),o=r(91),u=r(92),a=r(93),i=r(94),c=r(95);function f(t){var n=this.__data__=new e(t);this.size=n.size}f.prototype.clear=o,f.prototype.delete=u,f.prototype.get=a,f.prototype.has=i,f.prototype.set=c,t.exports=f},function(t,n){t.exports=function(){this.__data__=[],this.size=0}},function(t,n,r){var e=r(55),o=Array.prototype.splice;t.exports=function(t){var n=this.__data__,r=e(n,t);return!(r<0||(r==n.length-1?n.pop():o.call(n,r,1),--this.size,0))}},function(t,n,r){var e=r(55);t.exports=function(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]}},function(t,n,r){var e=r(55);t.exports=function(t){return e(this.__data__,t)>-1}},function(t,n,r){var e=r(55);t.exports=function(t,n){var r=this.__data__,o=e(r,t);return o<0?(++this.size,r.push([t,n])):r[o][1]=n,this}},function(t,n,r){var e=r(54);t.exports=function(){this.__data__=new e,this.size=0}},function(t,n){t.exports=function(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}},function(t,n){t.exports=function(t){return this.__data__.get(t)}},function(t,n){t.exports=function(t){return this.__data__.has(t)}},function(t,n,r){var e=r(54),o=r(59),u=r(100),a=200;t.exports=function(t,n){var r=this.__data__;if(r instanceof e){var i=r.__data__;if(!o||i.length<a-1)return i.push([t,n]),this.size=++r.size,this;r=this.__data__=new u(i)}return r.set(t,n),this.size=r.size,this}},function(t,n,r){var e=r(69),o=r(97),u=r(53),a=r(70),i=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,s=c.toString,l=f.hasOwnProperty,d=RegExp("^"+s.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!u(t)||o(t))&&(e(t)?d:i).test(a(t))}},function(t,n,r){var e,o=r(98),u=(e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";t.exports=function(t){return!!u&&u in t}},function(t,n,r){var e=r(27)["__core-js_shared__"];t.exports=e},function(t,n){t.exports=function(t,n){return null==t?void 0:t[n]}},function(t,n,r){var e=r(101),o=r(108),u=r(110),a=r(111),i=r(112);function c(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}c.prototype.clear=e,c.prototype.delete=o,c.prototype.get=u,c.prototype.has=a,c.prototype.set=i,t.exports=c},function(t,n,r){var e=r(102),o=r(54),u=r(59);t.exports=function(){this.size=0,this.__data__={hash:new e,map:new(u||o),string:new e}}},function(t,n,r){var e=r(103),o=r(104),u=r(105),a=r(106),i=r(107);function c(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}c.prototype.clear=e,c.prototype.delete=o,c.prototype.get=u,c.prototype.has=a,c.prototype.set=i,t.exports=c},function(t,n,r){var e=r(56);t.exports=function(){this.__data__=e?e(null):{},this.size=0}},function(t,n){t.exports=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}},function(t,n,r){var e=r(56),o="__lodash_hash_undefined__",u=Object.prototype.hasOwnProperty;t.exports=function(t){var n=this.__data__;if(e){var r=n[t];return r===o?void 0:r}return u.call(n,t)?n[t]:void 0}},function(t,n,r){var e=r(56),o=Object.prototype.hasOwnProperty;t.exports=function(t){var n=this.__data__;return e?void 0!==n[t]:o.call(n,t)}},function(t,n,r){var e=r(56),o="__lodash_hash_undefined__";t.exports=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=e&&void 0===n?o:n,this}},function(t,n,r){var e=r(57);t.exports=function(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n}},function(t,n){t.exports=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}},function(t,n,r){var e=r(57);t.exports=function(t){return e(this,t).get(t)}},function(t,n,r){var e=r(57);t.exports=function(t){return e(this,t).has(t)}},function(t,n,r){var e=r(57);t.exports=function(t,n){var r=e(this,t),o=r.size;return r.set(t,n),this.size+=r.size==o?0:1,this}},function(t,n){t.exports=function(t,n){for(var r=-1,e=null==t?0:t.length;++r<e&&!1!==n(t[r],r,t););return t}},function(t,n,r){var e=r(52),o=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,n,r){var e=r(58),o=r(60);t.exports=function(t,n){return t&&e(n,o(n),t)}},function(t,n){t.exports=function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}},function(t,n){t.exports=function(){return!1}},function(t,n){var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var o=typeof t;return!!(n=null==n?r:n)&&("number"==o||"symbol"!=o&&e.test(t))&&t>-1&&t%1==0&&t<n}},function(t,n,r){var e=r(120),o=r(62),u=r(63),a=u&&u.isTypedArray,i=a?o(a):e;t.exports=i},function(t,n,r){var e=r(32),o=r(75),u=r(15),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return u(t)&&o(t.length)&&!!a[e(t)]}},function(t,n,r){var e=r(64),o=r(122),u=Object.prototype.hasOwnProperty;t.exports=function(t){if(!e(t))return o(t);var n=[];for(var r in Object(t))u.call(t,r)&&"constructor"!=r&&n.push(r);return n}},function(t,n,r){var e=r(76)(Object.keys,Object);t.exports=e},function(t,n,r){var e=r(58),o=r(78);t.exports=function(t,n){return t&&e(n,o(n),t)}},function(t,n,r){var e=r(53),o=r(64),u=r(125),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!e(t))return u(t);var n=o(t),r=[];for(var i in t)("constructor"!=i||!n&&a.call(t,i))&&r.push(i);return r}},function(t,n){t.exports=function(t){var n=[];if(null!=t)for(var r in Object(t))n.push(r);return n}},function(t,n,r){(function(t){var e=r(27),o=n&&!n.nodeType&&n,u=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=u&&u.exports===o?e.Buffer:void 0,i=a?a.allocUnsafe:void 0;t.exports=function(t,n){if(n)return t.slice();var r=t.length,e=i?i(r):new t.constructor(r);return t.copy(e),e}}).call(this,r(61)(t))},function(t,n){t.exports=function(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n}},function(t,n,r){var e=r(58),o=r(65);t.exports=function(t,n){return e(t,o(t),n)}},function(t,n){t.exports=function(t,n){for(var r=-1,e=null==t?0:t.length,o=0,u=[];++r<e;){var a=t[r];n(a,r,t)&&(u[o++]=a)}return u}},function(t,n,r){var e=r(58),o=r(80);t.exports=function(t,n){return e(t,o(t),n)}},function(t,n,r){var e=r(82),o=r(65),u=r(60);t.exports=function(t){return e(t,u,o)}},function(t,n,r){var e=r(82),o=r(80),u=r(78);t.exports=function(t){return e(t,u,o)}},function(t,n,r){var e=r(52)(r(27),"DataView");t.exports=e},function(t,n,r){var e=r(52)(r(27),"Promise");t.exports=e},function(t,n,r){var e=r(52)(r(27),"Set");t.exports=e},function(t,n,r){var e=r(52)(r(27),"WeakMap");t.exports=e},function(t,n){var r=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&r.call(t,"index")&&(e.index=t.index,e.input=t.input),e}},function(t,n,r){var e=r(67),o=r(140),u=r(141),a=r(142),i=r(143),c="[object Boolean]",f="[object Date]",s="[object Map]",l="[object Number]",d="[object RegExp]",h="[object Set]",v="[object String]",p="[object Symbol]",m="[object ArrayBuffer]",M="[object DataView]",b="[object Float32Array]",g="[object Float64Array]",x="[object Int8Array]",y="[object Int16Array]",_="[object Int32Array]",R="[object Uint8Array]",E="[object Uint8ClampedArray]",A="[object Uint16Array]",w="[object Uint32Array]";t.exports=function(t,n,r){var T=t.constructor;switch(n){case m:return e(t);case c:case f:return new T(+t);case M:return o(t,r);case b:case g:case x:case y:case _:case R:case E:case A:case w:return i(t,r);case s:return new T;case l:case v:return new T(t);case d:return u(t);case h:return new T;case p:return a(t)}}},function(t,n,r){var e=r(27).Uint8Array;t.exports=e},function(t,n,r){var e=r(67);t.exports=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},function(t,n){var r=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}},function(t,n,r){var e=r(7),o=e?e.prototype:void 0,u=o?o.valueOf:void 0;t.exports=function(t){return u?Object(u.call(t)):{}}},function(t,n,r){var e=r(67);t.exports=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},function(t,n,r){var e=r(145),o=r(81),u=r(64);t.exports=function(t){return"function"!=typeof t.constructor||u(t)?{}:e(o(t))}},function(t,n,r){var e=r(53),o=Object.create,u=function(){function t(){}return function(n){if(!e(n))return{};if(o)return o(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}();t.exports=u},function(t,n,r){var e=r(147),o=r(62),u=r(63),a=u&&u.isMap,i=a?o(a):e;t.exports=i},function(t,n,r){var e=r(66),o=r(15),u="[object Map]";t.exports=function(t){return o(t)&&e(t)==u}},function(t,n,r){var e=r(149),o=r(62),u=r(63),a=u&&u.isSet,i=a?o(a):e;t.exports=i},function(t,n,r){var e=r(66),o=r(15),u="[object Set]";t.exports=function(t){return o(t)&&e(t)==u}}]);
//# sourceMappingURL=bundle.js.map