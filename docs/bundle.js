!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=55)}([function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"EPSILON",function(){return v}),r.d(e,"ARRAY_TYPE",function(){return h}),r.d(e,"RANDOM",function(){return p}),r.d(e,"setMatrixArrayType",function(){return m}),r.d(e,"toRadian",function(){return b}),r.d(e,"equals",function(){return x});var o={};r.r(o),r.d(o,"create",function(){return g}),r.d(o,"clone",function(){return y}),r.d(o,"copy",function(){return _}),r.d(o,"identity",function(){return R}),r.d(o,"fromValues",function(){return E}),r.d(o,"set",function(){return w}),r.d(o,"transpose",function(){return A}),r.d(o,"invert",function(){return T}),r.d(o,"adjoint",function(){return S}),r.d(o,"determinant",function(){return P}),r.d(o,"multiply",function(){return j}),r.d(o,"rotate",function(){return B}),r.d(o,"scale",function(){return F}),r.d(o,"fromRotation",function(){return I}),r.d(o,"fromScaling",function(){return D}),r.d(o,"str",function(){return k}),r.d(o,"frob",function(){return C}),r.d(o,"LDU",function(){return U}),r.d(o,"add",function(){return L}),r.d(o,"subtract",function(){return O}),r.d(o,"exactEquals",function(){return z}),r.d(o,"equals",function(){return G}),r.d(o,"multiplyScalar",function(){return q}),r.d(o,"multiplyScalarAndAdd",function(){return N}),r.d(o,"mul",function(){return V}),r.d(o,"sub",function(){return X});var a={};r.r(a),r.d(a,"create",function(){return W}),r.d(a,"clone",function(){return Y}),r.d(a,"copy",function(){return H}),r.d(a,"identity",function(){return Q}),r.d(a,"fromValues",function(){return Z}),r.d(a,"set",function(){return $}),r.d(a,"invert",function(){return K}),r.d(a,"determinant",function(){return J}),r.d(a,"multiply",function(){return tt}),r.d(a,"rotate",function(){return nt}),r.d(a,"scale",function(){return rt}),r.d(a,"translate",function(){return et}),r.d(a,"fromRotation",function(){return ot}),r.d(a,"fromScaling",function(){return at}),r.d(a,"fromTranslation",function(){return it}),r.d(a,"str",function(){return ut}),r.d(a,"frob",function(){return ct}),r.d(a,"add",function(){return ft}),r.d(a,"subtract",function(){return st}),r.d(a,"multiplyScalar",function(){return lt}),r.d(a,"multiplyScalarAndAdd",function(){return dt}),r.d(a,"exactEquals",function(){return vt}),r.d(a,"equals",function(){return ht}),r.d(a,"mul",function(){return pt}),r.d(a,"sub",function(){return mt});var i={};r.r(i),r.d(i,"create",function(){return Mt}),r.d(i,"fromMat4",function(){return bt}),r.d(i,"clone",function(){return xt}),r.d(i,"copy",function(){return gt}),r.d(i,"fromValues",function(){return yt}),r.d(i,"set",function(){return _t}),r.d(i,"identity",function(){return Rt}),r.d(i,"transpose",function(){return Et}),r.d(i,"invert",function(){return wt}),r.d(i,"adjoint",function(){return At}),r.d(i,"determinant",function(){return Tt}),r.d(i,"multiply",function(){return St}),r.d(i,"translate",function(){return Pt}),r.d(i,"rotate",function(){return jt}),r.d(i,"scale",function(){return Bt}),r.d(i,"fromTranslation",function(){return Ft}),r.d(i,"fromRotation",function(){return It}),r.d(i,"fromScaling",function(){return Dt}),r.d(i,"fromMat2d",function(){return kt}),r.d(i,"fromQuat",function(){return Ct}),r.d(i,"normalFromMat4",function(){return Ut}),r.d(i,"projection",function(){return Lt}),r.d(i,"str",function(){return Ot}),r.d(i,"frob",function(){return zt}),r.d(i,"add",function(){return Gt}),r.d(i,"subtract",function(){return qt}),r.d(i,"multiplyScalar",function(){return Nt}),r.d(i,"multiplyScalarAndAdd",function(){return Vt}),r.d(i,"exactEquals",function(){return Xt}),r.d(i,"equals",function(){return Wt}),r.d(i,"mul",function(){return Yt}),r.d(i,"sub",function(){return Ht});var u={};r.r(u),r.d(u,"create",function(){return Qt}),r.d(u,"clone",function(){return Zt}),r.d(u,"copy",function(){return $t}),r.d(u,"fromValues",function(){return Kt}),r.d(u,"set",function(){return Jt}),r.d(u,"identity",function(){return tn}),r.d(u,"transpose",function(){return nn}),r.d(u,"invert",function(){return rn}),r.d(u,"adjoint",function(){return en}),r.d(u,"determinant",function(){return on}),r.d(u,"multiply",function(){return an}),r.d(u,"translate",function(){return un}),r.d(u,"scale",function(){return cn}),r.d(u,"rotate",function(){return fn}),r.d(u,"rotateX",function(){return sn}),r.d(u,"rotateY",function(){return ln}),r.d(u,"rotateZ",function(){return dn}),r.d(u,"fromTranslation",function(){return vn}),r.d(u,"fromScaling",function(){return hn}),r.d(u,"fromRotation",function(){return pn}),r.d(u,"fromXRotation",function(){return mn}),r.d(u,"fromYRotation",function(){return Mn}),r.d(u,"fromZRotation",function(){return bn}),r.d(u,"fromRotationTranslation",function(){return xn}),r.d(u,"fromQuat2",function(){return gn}),r.d(u,"getTranslation",function(){return yn}),r.d(u,"getScaling",function(){return _n}),r.d(u,"getRotation",function(){return Rn}),r.d(u,"fromRotationTranslationScale",function(){return En}),r.d(u,"fromRotationTranslationScaleOrigin",function(){return wn}),r.d(u,"fromQuat",function(){return An}),r.d(u,"frustum",function(){return Tn}),r.d(u,"perspective",function(){return Sn}),r.d(u,"perspectiveFromFieldOfView",function(){return Pn}),r.d(u,"ortho",function(){return jn}),r.d(u,"lookAt",function(){return Bn}),r.d(u,"targetTo",function(){return Fn}),r.d(u,"str",function(){return In}),r.d(u,"frob",function(){return Dn}),r.d(u,"add",function(){return kn}),r.d(u,"subtract",function(){return Cn}),r.d(u,"multiplyScalar",function(){return Un}),r.d(u,"multiplyScalarAndAdd",function(){return Ln}),r.d(u,"exactEquals",function(){return On}),r.d(u,"equals",function(){return zn}),r.d(u,"mul",function(){return Gn}),r.d(u,"sub",function(){return qn});var c={};r.r(c),r.d(c,"create",function(){return Nn}),r.d(c,"clone",function(){return Vn}),r.d(c,"length",function(){return Xn}),r.d(c,"fromValues",function(){return Wn}),r.d(c,"copy",function(){return Yn}),r.d(c,"set",function(){return Hn}),r.d(c,"add",function(){return Qn}),r.d(c,"subtract",function(){return Zn}),r.d(c,"multiply",function(){return $n}),r.d(c,"divide",function(){return Kn}),r.d(c,"ceil",function(){return Jn}),r.d(c,"floor",function(){return tr}),r.d(c,"min",function(){return nr}),r.d(c,"max",function(){return rr}),r.d(c,"round",function(){return er}),r.d(c,"scale",function(){return or}),r.d(c,"scaleAndAdd",function(){return ar}),r.d(c,"distance",function(){return ir}),r.d(c,"squaredDistance",function(){return ur}),r.d(c,"squaredLength",function(){return cr}),r.d(c,"negate",function(){return fr}),r.d(c,"inverse",function(){return sr}),r.d(c,"normalize",function(){return lr}),r.d(c,"dot",function(){return dr}),r.d(c,"cross",function(){return vr}),r.d(c,"lerp",function(){return hr}),r.d(c,"hermite",function(){return pr}),r.d(c,"bezier",function(){return mr}),r.d(c,"random",function(){return Mr}),r.d(c,"transformMat4",function(){return br}),r.d(c,"transformMat3",function(){return xr}),r.d(c,"transformQuat",function(){return gr}),r.d(c,"rotateX",function(){return yr}),r.d(c,"rotateY",function(){return _r}),r.d(c,"rotateZ",function(){return Rr}),r.d(c,"angle",function(){return Er}),r.d(c,"zero",function(){return wr}),r.d(c,"str",function(){return Ar}),r.d(c,"exactEquals",function(){return Tr}),r.d(c,"equals",function(){return Sr}),r.d(c,"sub",function(){return jr}),r.d(c,"mul",function(){return Br}),r.d(c,"div",function(){return Fr}),r.d(c,"dist",function(){return Ir}),r.d(c,"sqrDist",function(){return Dr}),r.d(c,"len",function(){return kr}),r.d(c,"sqrLen",function(){return Cr}),r.d(c,"forEach",function(){return Ur});var f={};r.r(f),r.d(f,"create",function(){return Lr}),r.d(f,"clone",function(){return Or}),r.d(f,"fromValues",function(){return zr}),r.d(f,"copy",function(){return Gr}),r.d(f,"set",function(){return qr}),r.d(f,"add",function(){return Nr}),r.d(f,"subtract",function(){return Vr}),r.d(f,"multiply",function(){return Xr}),r.d(f,"divide",function(){return Wr}),r.d(f,"ceil",function(){return Yr}),r.d(f,"floor",function(){return Hr}),r.d(f,"min",function(){return Qr}),r.d(f,"max",function(){return Zr}),r.d(f,"round",function(){return $r}),r.d(f,"scale",function(){return Kr}),r.d(f,"scaleAndAdd",function(){return Jr}),r.d(f,"distance",function(){return te}),r.d(f,"squaredDistance",function(){return ne}),r.d(f,"length",function(){return re}),r.d(f,"squaredLength",function(){return ee}),r.d(f,"negate",function(){return oe}),r.d(f,"inverse",function(){return ae}),r.d(f,"normalize",function(){return ie}),r.d(f,"dot",function(){return ue}),r.d(f,"cross",function(){return ce}),r.d(f,"lerp",function(){return fe}),r.d(f,"random",function(){return se}),r.d(f,"transformMat4",function(){return le}),r.d(f,"transformQuat",function(){return de}),r.d(f,"zero",function(){return ve}),r.d(f,"str",function(){return he}),r.d(f,"exactEquals",function(){return pe}),r.d(f,"equals",function(){return me}),r.d(f,"sub",function(){return Me}),r.d(f,"mul",function(){return be}),r.d(f,"div",function(){return xe}),r.d(f,"dist",function(){return ge}),r.d(f,"sqrDist",function(){return ye}),r.d(f,"len",function(){return _e}),r.d(f,"sqrLen",function(){return Re}),r.d(f,"forEach",function(){return Ee});var s={};r.r(s),r.d(s,"create",function(){return we}),r.d(s,"identity",function(){return Ae}),r.d(s,"setAxisAngle",function(){return Te}),r.d(s,"getAxisAngle",function(){return Se}),r.d(s,"multiply",function(){return Pe}),r.d(s,"rotateX",function(){return je}),r.d(s,"rotateY",function(){return Be}),r.d(s,"rotateZ",function(){return Fe}),r.d(s,"calculateW",function(){return Ie}),r.d(s,"slerp",function(){return De}),r.d(s,"random",function(){return ke}),r.d(s,"invert",function(){return Ce}),r.d(s,"conjugate",function(){return Ue}),r.d(s,"fromMat3",function(){return Le}),r.d(s,"fromEuler",function(){return Oe}),r.d(s,"str",function(){return ze}),r.d(s,"clone",function(){return Ye}),r.d(s,"fromValues",function(){return He}),r.d(s,"copy",function(){return Qe}),r.d(s,"set",function(){return Ze}),r.d(s,"add",function(){return $e}),r.d(s,"mul",function(){return Ke}),r.d(s,"scale",function(){return Je}),r.d(s,"dot",function(){return to}),r.d(s,"lerp",function(){return no}),r.d(s,"length",function(){return ro}),r.d(s,"len",function(){return eo}),r.d(s,"squaredLength",function(){return oo}),r.d(s,"sqrLen",function(){return ao}),r.d(s,"normalize",function(){return io}),r.d(s,"exactEquals",function(){return uo}),r.d(s,"equals",function(){return co}),r.d(s,"rotationTo",function(){return fo}),r.d(s,"sqlerp",function(){return so}),r.d(s,"setAxes",function(){return lo});var l={};r.r(l),r.d(l,"create",function(){return vo}),r.d(l,"clone",function(){return ho}),r.d(l,"fromValues",function(){return po}),r.d(l,"fromRotationTranslationValues",function(){return mo}),r.d(l,"fromRotationTranslation",function(){return Mo}),r.d(l,"fromTranslation",function(){return bo}),r.d(l,"fromRotation",function(){return xo}),r.d(l,"fromMat4",function(){return go}),r.d(l,"copy",function(){return yo}),r.d(l,"identity",function(){return _o}),r.d(l,"set",function(){return Ro}),r.d(l,"getReal",function(){return Eo}),r.d(l,"getDual",function(){return wo}),r.d(l,"setReal",function(){return Ao}),r.d(l,"setDual",function(){return To}),r.d(l,"getTranslation",function(){return So}),r.d(l,"translate",function(){return Po}),r.d(l,"rotateX",function(){return jo}),r.d(l,"rotateY",function(){return Bo}),r.d(l,"rotateZ",function(){return Fo}),r.d(l,"rotateByQuatAppend",function(){return Io}),r.d(l,"rotateByQuatPrepend",function(){return Do}),r.d(l,"rotateAroundAxis",function(){return ko}),r.d(l,"add",function(){return Co}),r.d(l,"multiply",function(){return Uo}),r.d(l,"mul",function(){return Lo}),r.d(l,"scale",function(){return Oo}),r.d(l,"dot",function(){return zo}),r.d(l,"lerp",function(){return Go}),r.d(l,"invert",function(){return qo}),r.d(l,"conjugate",function(){return No}),r.d(l,"length",function(){return Vo}),r.d(l,"len",function(){return Xo}),r.d(l,"squaredLength",function(){return Wo}),r.d(l,"sqrLen",function(){return Yo}),r.d(l,"normalize",function(){return Ho}),r.d(l,"str",function(){return Qo}),r.d(l,"exactEquals",function(){return Zo}),r.d(l,"equals",function(){return $o});var d={};r.r(d),r.d(d,"create",function(){return Ko}),r.d(d,"clone",function(){return Jo}),r.d(d,"fromValues",function(){return ta}),r.d(d,"copy",function(){return na}),r.d(d,"set",function(){return ra}),r.d(d,"add",function(){return ea}),r.d(d,"subtract",function(){return oa}),r.d(d,"multiply",function(){return aa}),r.d(d,"divide",function(){return ia}),r.d(d,"ceil",function(){return ua}),r.d(d,"floor",function(){return ca}),r.d(d,"min",function(){return fa}),r.d(d,"max",function(){return sa}),r.d(d,"round",function(){return la}),r.d(d,"scale",function(){return da}),r.d(d,"scaleAndAdd",function(){return va}),r.d(d,"distance",function(){return ha}),r.d(d,"squaredDistance",function(){return pa}),r.d(d,"length",function(){return ma}),r.d(d,"squaredLength",function(){return Ma}),r.d(d,"negate",function(){return ba}),r.d(d,"inverse",function(){return xa}),r.d(d,"normalize",function(){return ga}),r.d(d,"dot",function(){return ya}),r.d(d,"cross",function(){return _a}),r.d(d,"lerp",function(){return Ra}),r.d(d,"random",function(){return Ea}),r.d(d,"transformMat2",function(){return wa}),r.d(d,"transformMat2d",function(){return Aa}),r.d(d,"transformMat3",function(){return Ta}),r.d(d,"transformMat4",function(){return Sa}),r.d(d,"rotate",function(){return Pa}),r.d(d,"angle",function(){return ja}),r.d(d,"zero",function(){return Ba}),r.d(d,"str",function(){return Fa}),r.d(d,"exactEquals",function(){return Ia}),r.d(d,"equals",function(){return Da}),r.d(d,"len",function(){return ka}),r.d(d,"sub",function(){return Ca}),r.d(d,"mul",function(){return Ua}),r.d(d,"div",function(){return La}),r.d(d,"dist",function(){return Oa}),r.d(d,"sqrDist",function(){return za}),r.d(d,"sqrLen",function(){return Ga}),r.d(d,"forEach",function(){return qa});var v=1e-6,h="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;function m(t){h=t}var M=Math.PI/180;function b(t){return t*M}function x(t,n){return Math.abs(t-n)<=v*Math.max(1,Math.abs(t),Math.abs(n))}function g(){var t=new h(4);return h!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function y(t){var n=new h(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function _(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function R(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function E(t,n,r,e){var o=new h(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=e,o}function w(t,n,r,e,o){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t}function A(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t}function T(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r*a-o*e;return i?(i=1/i,t[0]=a*i,t[1]=-e*i,t[2]=-o*i,t[3]=r*i,t):null}function S(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t}function P(t){return t[0]*t[3]-t[2]*t[1]}function j(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*u+a*c,t[1]=o*u+i*c,t[2]=e*f+a*s,t[3]=o*f+i*s,t}function B(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),c=Math.cos(r);return t[0]=e*c+a*u,t[1]=o*c+i*u,t[2]=e*-u+a*c,t[3]=o*-u+i*c,t}function F(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],c=r[1];return t[0]=e*u,t[1]=o*u,t[2]=a*c,t[3]=i*c,t}function I(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t}function D(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t}function k(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function C(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function U(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]}function L(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function O(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function z(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function G(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=n[0],u=n[1],c=n[2],f=n[3];return Math.abs(r-i)<=v*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-u)<=v*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(o-c)<=v*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-f)<=v*Math.max(1,Math.abs(a),Math.abs(f))}function q(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function N(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t}var V=j,X=O;function W(){var t=new h(6);return h!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Y(t){var n=new h(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function H(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function Q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,n,r,e,o,a){var i=new h(6);return i[0]=t,i[1]=n,i[2]=r,i[3]=e,i[4]=o,i[5]=a,i}function $(t,n,r,e,o,a,i){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t}function K(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=r*a-e*o;return c?(c=1/c,t[0]=a*c,t[1]=-e*c,t[2]=-o*c,t[3]=r*c,t[4]=(o*u-a*i)*c,t[5]=(e*i-r*u)*c,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=r[0],s=r[1],l=r[2],d=r[3],v=r[4],h=r[5];return t[0]=e*f+a*s,t[1]=o*f+i*s,t[2]=e*l+a*d,t[3]=o*l+i*d,t[4]=e*v+a*h+u,t[5]=o*v+i*h+c,t}function nt(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=Math.sin(r),s=Math.cos(r);return t[0]=e*s+a*f,t[1]=o*s+i*f,t[2]=e*-f+a*s,t[3]=o*-f+i*s,t[4]=u,t[5]=c,t}function rt(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e*f,t[1]=o*f,t[2]=a*s,t[3]=i*s,t[4]=u,t[5]=c,t}function et(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=e*f+a*s+u,t[5]=o*f+i*s+c,t}function ot(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t[4]=0,t[5]=0,t}function at(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t}function it(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ct(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ft(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t}function st(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t}function lt(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t}function dt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t}function vt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]}function ht(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=n[0],f=n[1],s=n[2],l=n[3],d=n[4],h=n[5];return Math.abs(r-c)<=v*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(e-f)<=v*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-s)<=v*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-l)<=v*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-d)<=v*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-h)<=v*Math.max(1,Math.abs(u),Math.abs(h))}var pt=tt,mt=st;function Mt(){var t=new h(9);return h!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function xt(t){var n=new h(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function gt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function yt(t,n,r,e,o,a,i,u,c){var f=new h(9);return f[0]=t,f[1]=n,f[2]=r,f[3]=e,f[4]=o,f[5]=a,f[6]=i,f[7]=u,f[8]=c,f}function _t(t,n,r,e,o,a,i,u,c,f){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=c,t[8]=f,t}function Rt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Et(t,n){if(t===n){var r=n[1],e=n[2],o=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=e,t[7]=o}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function wt(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=s*i-u*f,d=-s*a+u*c,v=f*a-i*c,h=r*l+e*d+o*v;return h?(h=1/h,t[0]=l*h,t[1]=(-s*e+o*f)*h,t[2]=(u*e-o*i)*h,t[3]=d*h,t[4]=(s*r-o*c)*h,t[5]=(-u*r+o*a)*h,t[6]=v*h,t[7]=(-f*r+e*c)*h,t[8]=(i*r-e*a)*h,t):null}function At(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8];return t[0]=i*s-u*f,t[1]=o*f-e*s,t[2]=e*u-o*i,t[3]=u*c-a*s,t[4]=r*s-o*c,t[5]=o*a-r*u,t[6]=a*f-i*c,t[7]=e*c-r*f,t[8]=r*i-e*a,t}function Tt(t){var n=t[0],r=t[1],e=t[2],o=t[3],a=t[4],i=t[5],u=t[6],c=t[7],f=t[8];return n*(f*a-i*c)+r*(-f*o+i*u)+e*(c*o-a*u)}function St(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=r[0],v=r[1],h=r[2],p=r[3],m=r[4],M=r[5],b=r[6],x=r[7],g=r[8];return t[0]=d*e+v*i+h*f,t[1]=d*o+v*u+h*s,t[2]=d*a+v*c+h*l,t[3]=p*e+m*i+M*f,t[4]=p*o+m*u+M*s,t[5]=p*a+m*c+M*l,t[6]=b*e+x*i+g*f,t[7]=b*o+x*u+g*s,t[8]=b*a+x*c+g*l,t}function Pt(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=r[0],v=r[1];return t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=c,t[6]=d*e+v*i+f,t[7]=d*o+v*u+s,t[8]=d*a+v*c+l,t}function jt(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=Math.sin(r),v=Math.cos(r);return t[0]=v*e+d*i,t[1]=v*o+d*u,t[2]=v*a+d*c,t[3]=v*i-d*e,t[4]=v*u-d*o,t[5]=v*c-d*a,t[6]=f,t[7]=s,t[8]=l,t}function Bt(t,n,r){var e=r[0],o=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function Ft(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function It(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Dt(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t}function Ct(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r+r,u=e+e,c=o+o,f=r*i,s=e*i,l=e*u,d=o*i,v=o*u,h=o*c,p=a*i,m=a*u,M=a*c;return t[0]=1-l-h,t[3]=s-M,t[6]=d+m,t[1]=s+M,t[4]=1-f-h,t[7]=v-p,t[2]=d-m,t[5]=v+p,t[8]=1-f-l,t}function Ut(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],v=n[11],h=n[12],p=n[13],m=n[14],M=n[15],b=r*u-e*i,x=r*c-o*i,g=r*f-a*i,y=e*c-o*u,_=e*f-a*u,R=o*f-a*c,E=s*p-l*h,w=s*m-d*h,A=s*M-v*h,T=l*m-d*p,S=l*M-v*p,P=d*M-v*m,j=b*P-x*S+g*T+y*A-_*w+R*E;return j?(j=1/j,t[0]=(u*P-c*S+f*T)*j,t[1]=(c*A-i*P-f*w)*j,t[2]=(i*S-u*A+f*E)*j,t[3]=(o*S-e*P-a*T)*j,t[4]=(r*P-o*A+a*w)*j,t[5]=(e*A-r*S-a*E)*j,t[6]=(p*R-m*_+M*y)*j,t[7]=(m*g-h*R-M*x)*j,t[8]=(h*_-p*g+M*b)*j,t):null}function Lt(t,n,r){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ot(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function zt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Gt(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t}function qt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t}function Nt(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t}function Vt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t}function Xt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]}function Wt(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=t[6],f=t[7],s=t[8],l=n[0],d=n[1],h=n[2],p=n[3],m=n[4],M=n[5],b=n[6],x=n[7],g=n[8];return Math.abs(r-l)<=v*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(e-d)<=v*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(o-h)<=v*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-p)<=v*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-m)<=v*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-M)<=v*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-b)<=v*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-x)<=v*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(s-g)<=v*Math.max(1,Math.abs(s),Math.abs(g))}var Yt=St,Ht=qt;function Qt(){var t=new h(16);return h!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var n=new h(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function $t(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function Kt(t,n,r,e,o,a,i,u,c,f,s,l,d,v,p,m){var M=new h(16);return M[0]=t,M[1]=n,M[2]=r,M[3]=e,M[4]=o,M[5]=a,M[6]=i,M[7]=u,M[8]=c,M[9]=f,M[10]=s,M[11]=l,M[12]=d,M[13]=v,M[14]=p,M[15]=m,M}function Jt(t,n,r,e,o,a,i,u,c,f,s,l,d,v,h,p,m){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=c,t[8]=f,t[9]=s,t[10]=l,t[11]=d,t[12]=v,t[13]=h,t[14]=p,t[15]=m,t}function tn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nn(t,n){if(t===n){var r=n[1],e=n[2],o=n[3],a=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=a,t[11]=n[14],t[12]=o,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function rn(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],v=n[11],h=n[12],p=n[13],m=n[14],M=n[15],b=r*u-e*i,x=r*c-o*i,g=r*f-a*i,y=e*c-o*u,_=e*f-a*u,R=o*f-a*c,E=s*p-l*h,w=s*m-d*h,A=s*M-v*h,T=l*m-d*p,S=l*M-v*p,P=d*M-v*m,j=b*P-x*S+g*T+y*A-_*w+R*E;return j?(j=1/j,t[0]=(u*P-c*S+f*T)*j,t[1]=(o*S-e*P-a*T)*j,t[2]=(p*R-m*_+M*y)*j,t[3]=(d*_-l*R-v*y)*j,t[4]=(c*A-i*P-f*w)*j,t[5]=(r*P-o*A+a*w)*j,t[6]=(m*g-h*R-M*x)*j,t[7]=(s*R-d*g+v*x)*j,t[8]=(i*S-u*A+f*E)*j,t[9]=(e*A-r*S-a*E)*j,t[10]=(h*_-p*g+M*b)*j,t[11]=(l*g-s*_-v*b)*j,t[12]=(u*w-i*T-c*E)*j,t[13]=(r*T-e*w+o*E)*j,t[14]=(p*x-h*y-m*b)*j,t[15]=(s*y-l*x+d*b)*j,t):null}function en(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],v=n[11],h=n[12],p=n[13],m=n[14],M=n[15];return t[0]=u*(d*M-v*m)-l*(c*M-f*m)+p*(c*v-f*d),t[1]=-(e*(d*M-v*m)-l*(o*M-a*m)+p*(o*v-a*d)),t[2]=e*(c*M-f*m)-u*(o*M-a*m)+p*(o*f-a*c),t[3]=-(e*(c*v-f*d)-u*(o*v-a*d)+l*(o*f-a*c)),t[4]=-(i*(d*M-v*m)-s*(c*M-f*m)+h*(c*v-f*d)),t[5]=r*(d*M-v*m)-s*(o*M-a*m)+h*(o*v-a*d),t[6]=-(r*(c*M-f*m)-i*(o*M-a*m)+h*(o*f-a*c)),t[7]=r*(c*v-f*d)-i*(o*v-a*d)+s*(o*f-a*c),t[8]=i*(l*M-v*p)-s*(u*M-f*p)+h*(u*v-f*l),t[9]=-(r*(l*M-v*p)-s*(e*M-a*p)+h*(e*v-a*l)),t[10]=r*(u*M-f*p)-i*(e*M-a*p)+h*(e*f-a*u),t[11]=-(r*(u*v-f*l)-i*(e*v-a*l)+s*(e*f-a*u)),t[12]=-(i*(l*m-d*p)-s*(u*m-c*p)+h*(u*d-c*l)),t[13]=r*(l*m-d*p)-s*(e*m-o*p)+h*(e*d-o*l),t[14]=-(r*(u*m-c*p)-i*(e*m-o*p)+h*(e*c-o*u)),t[15]=r*(u*d-c*l)-i*(e*d-o*l)+s*(e*c-o*u),t}function on(t){var n=t[0],r=t[1],e=t[2],o=t[3],a=t[4],i=t[5],u=t[6],c=t[7],f=t[8],s=t[9],l=t[10],d=t[11],v=t[12],h=t[13],p=t[14],m=t[15];return(n*i-r*a)*(l*m-d*p)-(n*u-e*a)*(s*m-d*h)+(n*c-o*a)*(s*p-l*h)+(r*u-e*i)*(f*m-d*v)-(r*c-o*i)*(f*p-l*v)+(e*c-o*u)*(f*h-s*v)}function an(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=n[9],v=n[10],h=n[11],p=n[12],m=n[13],M=n[14],b=n[15],x=r[0],g=r[1],y=r[2],_=r[3];return t[0]=x*e+g*u+y*l+_*p,t[1]=x*o+g*c+y*d+_*m,t[2]=x*a+g*f+y*v+_*M,t[3]=x*i+g*s+y*h+_*b,x=r[4],g=r[5],y=r[6],_=r[7],t[4]=x*e+g*u+y*l+_*p,t[5]=x*o+g*c+y*d+_*m,t[6]=x*a+g*f+y*v+_*M,t[7]=x*i+g*s+y*h+_*b,x=r[8],g=r[9],y=r[10],_=r[11],t[8]=x*e+g*u+y*l+_*p,t[9]=x*o+g*c+y*d+_*m,t[10]=x*a+g*f+y*v+_*M,t[11]=x*i+g*s+y*h+_*b,x=r[12],g=r[13],y=r[14],_=r[15],t[12]=x*e+g*u+y*l+_*p,t[13]=x*o+g*c+y*d+_*m,t[14]=x*a+g*f+y*v+_*M,t[15]=x*i+g*s+y*h+_*b,t}function un(t,n,r){var e,o,a,i,u,c,f,s,l,d,v,h,p=r[0],m=r[1],M=r[2];return n===t?(t[12]=n[0]*p+n[4]*m+n[8]*M+n[12],t[13]=n[1]*p+n[5]*m+n[9]*M+n[13],t[14]=n[2]*p+n[6]*m+n[10]*M+n[14],t[15]=n[3]*p+n[7]*m+n[11]*M+n[15]):(e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=n[9],v=n[10],h=n[11],t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=c,t[6]=f,t[7]=s,t[8]=l,t[9]=d,t[10]=v,t[11]=h,t[12]=e*p+u*m+l*M+n[12],t[13]=o*p+c*m+d*M+n[13],t[14]=a*p+f*m+v*M+n[14],t[15]=i*p+s*m+h*M+n[15]),t}function cn(t,n,r){var e=r[0],o=r[1],a=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function fn(t,n,r,e){var o,a,i,u,c,f,s,l,d,h,p,m,M,b,x,g,y,_,R,E,w,A,T,S,P=e[0],j=e[1],B=e[2],F=Math.sqrt(P*P+j*j+B*B);return F<v?null:(P*=F=1/F,j*=F,B*=F,o=Math.sin(r),i=1-(a=Math.cos(r)),u=n[0],c=n[1],f=n[2],s=n[3],l=n[4],d=n[5],h=n[6],p=n[7],m=n[8],M=n[9],b=n[10],x=n[11],g=P*P*i+a,y=j*P*i+B*o,_=B*P*i-j*o,R=P*j*i-B*o,E=j*j*i+a,w=B*j*i+P*o,A=P*B*i+j*o,T=j*B*i-P*o,S=B*B*i+a,t[0]=u*g+l*y+m*_,t[1]=c*g+d*y+M*_,t[2]=f*g+h*y+b*_,t[3]=s*g+p*y+x*_,t[4]=u*R+l*E+m*w,t[5]=c*R+d*E+M*w,t[6]=f*R+h*E+b*w,t[7]=s*R+p*E+x*w,t[8]=u*A+l*T+m*S,t[9]=c*A+d*T+M*S,t[10]=f*A+h*T+b*S,t[11]=s*A+p*T+x*S,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function sn(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[4],i=n[5],u=n[6],c=n[7],f=n[8],s=n[9],l=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*o+f*e,t[5]=i*o+s*e,t[6]=u*o+l*e,t[7]=c*o+d*e,t[8]=f*o-a*e,t[9]=s*o-i*e,t[10]=l*o-u*e,t[11]=d*o-c*e,t}function ln(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[0],i=n[1],u=n[2],c=n[3],f=n[8],s=n[9],l=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*o-f*e,t[1]=i*o-s*e,t[2]=u*o-l*e,t[3]=c*o-d*e,t[8]=a*e+f*o,t[9]=i*e+s*o,t[10]=u*e+l*o,t[11]=c*e+d*o,t}function dn(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[0],i=n[1],u=n[2],c=n[3],f=n[4],s=n[5],l=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*o+f*e,t[1]=i*o+s*e,t[2]=u*o+l*e,t[3]=c*o+d*e,t[4]=f*o-a*e,t[5]=s*o-i*e,t[6]=l*o-u*e,t[7]=d*o-c*e,t}function vn(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function hn(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pn(t,n,r){var e,o,a,i=r[0],u=r[1],c=r[2],f=Math.sqrt(i*i+u*u+c*c);return f<v?null:(i*=f=1/f,u*=f,c*=f,e=Math.sin(n),a=1-(o=Math.cos(n)),t[0]=i*i*a+o,t[1]=u*i*a+c*e,t[2]=c*i*a-u*e,t[3]=0,t[4]=i*u*a-c*e,t[5]=u*u*a+o,t[6]=c*u*a+i*e,t[7]=0,t[8]=i*c*a+u*e,t[9]=u*c*a-i*e,t[10]=c*c*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mn(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mn(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bn(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xn(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=e+e,c=o+o,f=a+a,s=e*u,l=e*c,d=e*f,v=o*c,h=o*f,p=a*f,m=i*u,M=i*c,b=i*f;return t[0]=1-(v+p),t[1]=l+b,t[2]=d-M,t[3]=0,t[4]=l-b,t[5]=1-(s+p),t[6]=h+m,t[7]=0,t[8]=d+M,t[9]=h-m,t[10]=1-(s+v),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function gn(t,n){var r=new h(3),e=-n[0],o=-n[1],a=-n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=e*e+o*o+a*a+i*i;return l>0?(r[0]=2*(u*i+s*e+c*a-f*o)/l,r[1]=2*(c*i+s*o+f*e-u*a)/l,r[2]=2*(f*i+s*a+u*o-c*e)/l):(r[0]=2*(u*i+s*e+c*a-f*o),r[1]=2*(c*i+s*o+f*e-u*a),r[2]=2*(f*i+s*a+u*o-c*e)),xn(t,n,r),t}function yn(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function _n(t,n){var r=n[0],e=n[1],o=n[2],a=n[4],i=n[5],u=n[6],c=n[8],f=n[9],s=n[10];return t[0]=Math.sqrt(r*r+e*e+o*o),t[1]=Math.sqrt(a*a+i*i+u*u),t[2]=Math.sqrt(c*c+f*f+s*s),t}function Rn(t,n){var r=n[0]+n[5]+n[10],e=0;return r>0?(e=2*Math.sqrt(r+1),t[3]=.25*e,t[0]=(n[6]-n[9])/e,t[1]=(n[8]-n[2])/e,t[2]=(n[1]-n[4])/e):n[0]>n[5]&&n[0]>n[10]?(e=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/e,t[0]=.25*e,t[1]=(n[1]+n[4])/e,t[2]=(n[8]+n[2])/e):n[5]>n[10]?(e=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/e,t[0]=(n[1]+n[4])/e,t[1]=.25*e,t[2]=(n[6]+n[9])/e):(e=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/e,t[0]=(n[8]+n[2])/e,t[1]=(n[6]+n[9])/e,t[2]=.25*e),t}function En(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=n[3],c=o+o,f=a+a,s=i+i,l=o*c,d=o*f,v=o*s,h=a*f,p=a*s,m=i*s,M=u*c,b=u*f,x=u*s,g=e[0],y=e[1],_=e[2];return t[0]=(1-(h+m))*g,t[1]=(d+x)*g,t[2]=(v-b)*g,t[3]=0,t[4]=(d-x)*y,t[5]=(1-(l+m))*y,t[6]=(p+M)*y,t[7]=0,t[8]=(v+b)*_,t[9]=(p-M)*_,t[10]=(1-(l+h))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function wn(t,n,r,e,o){var a=n[0],i=n[1],u=n[2],c=n[3],f=a+a,s=i+i,l=u+u,d=a*f,v=a*s,h=a*l,p=i*s,m=i*l,M=u*l,b=c*f,x=c*s,g=c*l,y=e[0],_=e[1],R=e[2],E=o[0],w=o[1],A=o[2],T=(1-(p+M))*y,S=(v+g)*y,P=(h-x)*y,j=(v-g)*_,B=(1-(d+M))*_,F=(m+b)*_,I=(h+x)*R,D=(m-b)*R,k=(1-(d+p))*R;return t[0]=T,t[1]=S,t[2]=P,t[3]=0,t[4]=j,t[5]=B,t[6]=F,t[7]=0,t[8]=I,t[9]=D,t[10]=k,t[11]=0,t[12]=r[0]+E-(T*E+j*w+I*A),t[13]=r[1]+w-(S*E+B*w+D*A),t[14]=r[2]+A-(P*E+F*w+k*A),t[15]=1,t}function An(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r+r,u=e+e,c=o+o,f=r*i,s=e*i,l=e*u,d=o*i,v=o*u,h=o*c,p=a*i,m=a*u,M=a*c;return t[0]=1-l-h,t[1]=s+M,t[2]=d-m,t[3]=0,t[4]=s-M,t[5]=1-f-h,t[6]=v+p,t[7]=0,t[8]=d+m,t[9]=v-p,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tn(t,n,r,e,o,a,i){var u=1/(r-n),c=1/(o-e),f=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*c,t[6]=0,t[7]=0,t[8]=(r+n)*u,t[9]=(o+e)*c,t[10]=(i+a)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*f,t[15]=0,t}function Sn(t,n,r,e,o){var a,i=1/Math.tan(n/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(e-o),t[10]=(o+e)*a,t[14]=2*o*e*a):(t[10]=-1,t[14]=-2*e),t}function Pn(t,n,r,e){var o=Math.tan(n.upDegrees*Math.PI/180),a=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(i+u),f=2/(o+a);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(o-a)*f*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function jn(t,n,r,e,o,a,i){var u=1/(n-r),c=1/(e-o),f=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+r)*u,t[13]=(o+e)*c,t[14]=(i+a)*f,t[15]=1,t}function Bn(t,n,r,e){var o,a,i,u,c,f,s,l,d,h,p=n[0],m=n[1],M=n[2],b=e[0],x=e[1],g=e[2],y=r[0],_=r[1],R=r[2];return Math.abs(p-y)<v&&Math.abs(m-_)<v&&Math.abs(M-R)<v?tn(t):(s=p-y,l=m-_,d=M-R,o=x*(d*=h=1/Math.sqrt(s*s+l*l+d*d))-g*(l*=h),a=g*(s*=h)-b*d,i=b*l-x*s,(h=Math.sqrt(o*o+a*a+i*i))?(o*=h=1/h,a*=h,i*=h):(o=0,a=0,i=0),u=l*i-d*a,c=d*o-s*i,f=s*a-l*o,(h=Math.sqrt(u*u+c*c+f*f))?(u*=h=1/h,c*=h,f*=h):(u=0,c=0,f=0),t[0]=o,t[1]=u,t[2]=s,t[3]=0,t[4]=a,t[5]=c,t[6]=l,t[7]=0,t[8]=i,t[9]=f,t[10]=d,t[11]=0,t[12]=-(o*p+a*m+i*M),t[13]=-(u*p+c*m+f*M),t[14]=-(s*p+l*m+d*M),t[15]=1,t)}function Fn(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=e[0],c=e[1],f=e[2],s=o-r[0],l=a-r[1],d=i-r[2],v=s*s+l*l+d*d;v>0&&(s*=v=1/Math.sqrt(v),l*=v,d*=v);var h=c*d-f*l,p=f*s-u*d,m=u*l-c*s;return(v=h*h+p*p+m*m)>0&&(h*=v=1/Math.sqrt(v),p*=v,m*=v),t[0]=h,t[1]=p,t[2]=m,t[3]=0,t[4]=l*m-d*p,t[5]=d*h-s*m,t[6]=s*p-l*h,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t}function In(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Dn(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function kn(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t}function Cn(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}function Un(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t}function Ln(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t}function On(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function zn(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=t[6],f=t[7],s=t[8],l=t[9],d=t[10],h=t[11],p=t[12],m=t[13],M=t[14],b=t[15],x=n[0],g=n[1],y=n[2],_=n[3],R=n[4],E=n[5],w=n[6],A=n[7],T=n[8],S=n[9],P=n[10],j=n[11],B=n[12],F=n[13],I=n[14],D=n[15];return Math.abs(r-x)<=v*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(e-g)<=v*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(o-y)<=v*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-_)<=v*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-R)<=v*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(u-E)<=v*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-w)<=v*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-A)<=v*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(s-T)<=v*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(l-S)<=v*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(d-P)<=v*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(h-j)<=v*Math.max(1,Math.abs(h),Math.abs(j))&&Math.abs(p-B)<=v*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(m-F)<=v*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(M-I)<=v*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(b-D)<=v*Math.max(1,Math.abs(b),Math.abs(D))}var Gn=an,qn=Cn;function Nn(){var t=new h(3);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Vn(t){var n=new h(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function Xn(t){var n=t[0],r=t[1],e=t[2];return Math.sqrt(n*n+r*r+e*e)}function Wn(t,n,r){var e=new h(3);return e[0]=t,e[1]=n,e[2]=r,e}function Yn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Hn(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t}function Qn(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function Zn(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function $n(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function Kn(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function Jn(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function tr(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function nr(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t}function rr(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t}function er(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function or(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function ar(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t}function ir(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return Math.sqrt(r*r+e*e+o*o)}function ur(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return r*r+e*e+o*o}function cr(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e}function fr(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function sr(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function lr(t,n){var r=n[0],e=n[1],o=n[2],a=r*r+e*e+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t}function dr(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function vr(t,n,r){var e=n[0],o=n[1],a=n[2],i=r[0],u=r[1],c=r[2];return t[0]=o*c-a*u,t[1]=a*i-e*c,t[2]=e*u-o*i,t}function hr(t,n,r,e){var o=n[0],a=n[1],i=n[2];return t[0]=o+e*(r[0]-o),t[1]=a+e*(r[1]-a),t[2]=i+e*(r[2]-i),t}function pr(t,n,r,e,o,a){var i=a*a,u=i*(2*a-3)+1,c=i*(a-2)+a,f=i*(a-1),s=i*(3-2*a);return t[0]=n[0]*u+r[0]*c+e[0]*f+o[0]*s,t[1]=n[1]*u+r[1]*c+e[1]*f+o[1]*s,t[2]=n[2]*u+r[2]*c+e[2]*f+o[2]*s,t}function mr(t,n,r,e,o,a){var i=1-a,u=i*i,c=a*a,f=u*i,s=3*a*u,l=3*c*i,d=c*a;return t[0]=n[0]*f+r[0]*s+e[0]*l+o[0]*d,t[1]=n[1]*f+r[1]*s+e[1]*l+o[1]*d,t[2]=n[2]*f+r[2]*s+e[2]*l+o[2]*d,t}function Mr(t,n){n=n||1;var r=2*p()*Math.PI,e=2*p()-1,o=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=e*n,t}function br(t,n,r){var e=n[0],o=n[1],a=n[2],i=r[3]*e+r[7]*o+r[11]*a+r[15];return i=i||1,t[0]=(r[0]*e+r[4]*o+r[8]*a+r[12])/i,t[1]=(r[1]*e+r[5]*o+r[9]*a+r[13])/i,t[2]=(r[2]*e+r[6]*o+r[10]*a+r[14])/i,t}function xr(t,n,r){var e=n[0],o=n[1],a=n[2];return t[0]=e*r[0]+o*r[3]+a*r[6],t[1]=e*r[1]+o*r[4]+a*r[7],t[2]=e*r[2]+o*r[5]+a*r[8],t}function gr(t,n,r){var e=r[0],o=r[1],a=r[2],i=r[3],u=n[0],c=n[1],f=n[2],s=o*f-a*c,l=a*u-e*f,d=e*c-o*u,v=o*d-a*l,h=a*s-e*d,p=e*l-o*s,m=2*i;return s*=m,l*=m,d*=m,v*=2,h*=2,p*=2,t[0]=u+s+v,t[1]=c+l+h,t[2]=f+d+p,t}function yr(t,n,r,e){var o=[],a=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(e)-o[2]*Math.sin(e),a[2]=o[1]*Math.sin(e)+o[2]*Math.cos(e),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function _r(t,n,r,e){var o=[],a=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],a[0]=o[2]*Math.sin(e)+o[0]*Math.cos(e),a[1]=o[1],a[2]=o[2]*Math.cos(e)-o[0]*Math.sin(e),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Rr(t,n,r,e){var o=[],a=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],a[0]=o[0]*Math.cos(e)-o[1]*Math.sin(e),a[1]=o[0]*Math.sin(e)+o[1]*Math.cos(e),a[2]=o[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Er(t,n){var r=Wn(t[0],t[1],t[2]),e=Wn(n[0],n[1],n[2]);lr(r,r),lr(e,e);var o=dr(r,e);return o>1?0:o<-1?Math.PI:Math.acos(o)}function wr(t){return t[0]=0,t[1]=0,t[2]=0,t}function Ar(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Tr(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function Sr(t,n){var r=t[0],e=t[1],o=t[2],a=n[0],i=n[1],u=n[2];return Math.abs(r-a)<=v*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(e-i)<=v*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(o-u)<=v*Math.max(1,Math.abs(o),Math.abs(u))}var Pr,jr=Zn,Br=$n,Fr=Kn,Ir=ir,Dr=ur,kr=Xn,Cr=cr,Ur=(Pr=Nn(),function(t,n,r,e,o,a){var i,u;for(n||(n=3),r||(r=0),u=e?Math.min(e*n+r,t.length):t.length,i=r;i<u;i+=n)Pr[0]=t[i],Pr[1]=t[i+1],Pr[2]=t[i+2],o(Pr,Pr,a),t[i]=Pr[0],t[i+1]=Pr[1],t[i+2]=Pr[2];return t});function Lr(){var t=new h(4);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Or(t){var n=new h(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function zr(t,n,r,e){var o=new h(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=e,o}function Gr(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function qr(t,n,r,e,o){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t}function Nr(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function Vr(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function Xr(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function Wr(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function Yr(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function Hr(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function Qr(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t}function Zr(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t}function $r(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function Kr(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function Jr(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t}function te(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],a=n[3]-t[3];return Math.sqrt(r*r+e*e+o*o+a*a)}function ne(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],a=n[3]-t[3];return r*r+e*e+o*o+a*a}function re(t){var n=t[0],r=t[1],e=t[2],o=t[3];return Math.sqrt(n*n+r*r+e*e+o*o)}function ee(t){var n=t[0],r=t[1],e=t[2],o=t[3];return n*n+r*r+e*e+o*o}function oe(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function ae(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function ie(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r*r+e*e+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=e*i,t[2]=o*i,t[3]=a*i,t}function ue(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function ce(t,n,r,e){var o=r[0]*e[1]-r[1]*e[0],a=r[0]*e[2]-r[2]*e[0],i=r[0]*e[3]-r[3]*e[0],u=r[1]*e[2]-r[2]*e[1],c=r[1]*e[3]-r[3]*e[1],f=r[2]*e[3]-r[3]*e[2],s=n[0],l=n[1],d=n[2],v=n[3];return t[0]=l*f-d*c+v*u,t[1]=-s*f+d*i-v*a,t[2]=s*c-l*i+v*o,t[3]=-s*u+l*a-d*o,t}function fe(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=n[3];return t[0]=o+e*(r[0]-o),t[1]=a+e*(r[1]-a),t[2]=i+e*(r[2]-i),t[3]=u+e*(r[3]-u),t}function se(t,n){var r,e,o,a,i,u;n=n||1;do{i=(r=2*p()-1)*r+(e=2*p()-1)*e}while(i>=1);do{u=(o=2*p()-1)*o+(a=2*p()-1)*a}while(u>=1);var c=Math.sqrt((1-i)/u);return t[0]=n*r,t[1]=n*e,t[2]=n*o*c,t[3]=n*a*c,t}function le(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3];return t[0]=r[0]*e+r[4]*o+r[8]*a+r[12]*i,t[1]=r[1]*e+r[5]*o+r[9]*a+r[13]*i,t[2]=r[2]*e+r[6]*o+r[10]*a+r[14]*i,t[3]=r[3]*e+r[7]*o+r[11]*a+r[15]*i,t}function de(t,n,r){var e=n[0],o=n[1],a=n[2],i=r[0],u=r[1],c=r[2],f=r[3],s=f*e+u*a-c*o,l=f*o+c*e-i*a,d=f*a+i*o-u*e,v=-i*e-u*o-c*a;return t[0]=s*f+v*-i+l*-c-d*-u,t[1]=l*f+v*-u+d*-i-s*-c,t[2]=d*f+v*-c+s*-u-l*-i,t[3]=n[3],t}function ve(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function he(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function pe(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function me(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=n[0],u=n[1],c=n[2],f=n[3];return Math.abs(r-i)<=v*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-u)<=v*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(o-c)<=v*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-f)<=v*Math.max(1,Math.abs(a),Math.abs(f))}var Me=Vr,be=Xr,xe=Wr,ge=te,ye=ne,_e=re,Re=ee,Ee=function(){var t=Lr();return function(n,r,e,o,a,i){var u,c;for(r||(r=4),e||(e=0),c=o?Math.min(o*r+e,n.length):n.length,u=e;u<c;u+=r)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],t[3]=n[u+3],a(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2],n[u+3]=t[3];return n}}();function we(){var t=new h(4);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ae(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Te(t,n,r){r*=.5;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t}function Se(t,n){var r=2*Math.acos(n[3]),e=Math.sin(r/2);return e>v?(t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e):(t[0]=1,t[1]=0,t[2]=0),r}function Pe(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*s+i*u+o*f-a*c,t[1]=o*s+i*c+a*u-e*f,t[2]=a*s+i*f+e*c-o*u,t[3]=i*s-e*u-o*c-a*f,t}function je(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),c=Math.cos(r);return t[0]=e*c+i*u,t[1]=o*c+a*u,t[2]=a*c-o*u,t[3]=i*c-e*u,t}function Be(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),c=Math.cos(r);return t[0]=e*c-a*u,t[1]=o*c+i*u,t[2]=a*c+e*u,t[3]=i*c-o*u,t}function Fe(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),c=Math.cos(r);return t[0]=e*c+o*u,t[1]=o*c-e*u,t[2]=a*c+i*u,t[3]=i*c-a*u,t}function Ie(t,n){var r=n[0],e=n[1],o=n[2];return t[0]=r,t[1]=e,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-o*o)),t}function De(t,n,r,e){var o,a,i,u,c,f=n[0],s=n[1],l=n[2],d=n[3],h=r[0],p=r[1],m=r[2],M=r[3];return(a=f*h+s*p+l*m+d*M)<0&&(a=-a,h=-h,p=-p,m=-m,M=-M),1-a>v?(o=Math.acos(a),i=Math.sin(o),u=Math.sin((1-e)*o)/i,c=Math.sin(e*o)/i):(u=1-e,c=e),t[0]=u*f+c*h,t[1]=u*s+c*p,t[2]=u*l+c*m,t[3]=u*d+c*M,t}function ke(t){var n=p(),r=p(),e=p(),o=Math.sqrt(1-n),a=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*e),t[3]=a*Math.cos(2*Math.PI*e),t}function Ce(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r*r+e*e+o*o+a*a,u=i?1/i:0;return t[0]=-r*u,t[1]=-e*u,t[2]=-o*u,t[3]=a*u,t}function Ue(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function Le(t,n){var r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(n[3*o+o]-n[3*a+a]-n[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(n[3*a+i]-n[3*i+a])*r,t[a]=(n[3*a+o]+n[3*o+a])*r,t[i]=(n[3*i+o]+n[3*o+i])*r}return t}function Oe(t,n,r,e){var o=.5*Math.PI/180;n*=o,r*=o,e*=o;var a=Math.sin(n),i=Math.cos(n),u=Math.sin(r),c=Math.cos(r),f=Math.sin(e),s=Math.cos(e);return t[0]=a*c*s-i*u*f,t[1]=i*u*s+a*c*f,t[2]=i*c*f-a*u*s,t[3]=i*c*s+a*u*f,t}function ze(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Ge,qe,Ne,Ve,Xe,We,Ye=Or,He=zr,Qe=Gr,Ze=qr,$e=Nr,Ke=Pe,Je=Kr,to=ue,no=fe,ro=re,eo=ro,oo=ee,ao=oo,io=ie,uo=pe,co=me,fo=(Ge=Nn(),qe=Wn(1,0,0),Ne=Wn(0,1,0),function(t,n,r){var e=dr(n,r);return e<-.999999?(vr(Ge,qe,n),kr(Ge)<1e-6&&vr(Ge,Ne,n),lr(Ge,Ge),Te(t,Ge,Math.PI),t):e>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(vr(Ge,n,r),t[0]=Ge[0],t[1]=Ge[1],t[2]=Ge[2],t[3]=1+e,io(t,t))}),so=(Ve=we(),Xe=we(),function(t,n,r,e,o,a){return De(Ve,n,o,a),De(Xe,r,e,a),De(t,Ve,Xe,2*a*(1-a)),t}),lo=(We=Mt(),function(t,n,r,e){return We[0]=r[0],We[3]=r[1],We[6]=r[2],We[1]=e[0],We[4]=e[1],We[7]=e[2],We[2]=-n[0],We[5]=-n[1],We[8]=-n[2],io(t,Le(t,We))});function vo(){var t=new h(8);return h!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function ho(t){var n=new h(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n}function po(t,n,r,e,o,a,i,u){var c=new h(8);return c[0]=t,c[1]=n,c[2]=r,c[3]=e,c[4]=o,c[5]=a,c[6]=i,c[7]=u,c}function mo(t,n,r,e,o,a,i){var u=new h(8);u[0]=t,u[1]=n,u[2]=r,u[3]=e;var c=.5*o,f=.5*a,s=.5*i;return u[4]=c*e+f*r-s*n,u[5]=f*e+s*t-c*r,u[6]=s*e+c*n-f*t,u[7]=-c*t-f*n-s*r,u}function Mo(t,n,r){var e=.5*r[0],o=.5*r[1],a=.5*r[2],i=n[0],u=n[1],c=n[2],f=n[3];return t[0]=i,t[1]=u,t[2]=c,t[3]=f,t[4]=e*f+o*c-a*u,t[5]=o*f+a*i-e*c,t[6]=a*f+e*u-o*i,t[7]=-e*i-o*u-a*c,t}function bo(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t}function xo(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function go(t,n){var r=we();Rn(r,n);var e=new h(3);return yn(e,n),Mo(t,r,e),t}function yo(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}function _o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ro(t,n,r,e,o,a,i,u,c){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=c,t}var Eo=Qe;function wo(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t}var Ao=Qe;function To(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t}function So(t,n){var r=n[4],e=n[5],o=n[6],a=n[7],i=-n[0],u=-n[1],c=-n[2],f=n[3];return t[0]=2*(r*f+a*i+e*c-o*u),t[1]=2*(e*f+a*u+o*i-r*c),t[2]=2*(o*f+a*c+r*u-e*i),t}function Po(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=.5*r[0],c=.5*r[1],f=.5*r[2],s=n[4],l=n[5],d=n[6],v=n[7];return t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=i*u+o*f-a*c+s,t[5]=i*c+a*u-e*f+l,t[6]=i*f+e*c-o*u+d,t[7]=-e*u-o*c-a*f+v,t}function jo(t,n,r){var e=-n[0],o=-n[1],a=-n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=u*i+s*e+c*a-f*o,d=c*i+s*o+f*e-u*a,v=f*i+s*a+u*o-c*e,h=s*i-u*e-c*o-f*a;return je(t,n,r),e=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+h*e+d*a-v*o,t[5]=d*i+h*o+v*e-l*a,t[6]=v*i+h*a+l*o-d*e,t[7]=h*i-l*e-d*o-v*a,t}function Bo(t,n,r){var e=-n[0],o=-n[1],a=-n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=u*i+s*e+c*a-f*o,d=c*i+s*o+f*e-u*a,v=f*i+s*a+u*o-c*e,h=s*i-u*e-c*o-f*a;return Be(t,n,r),e=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+h*e+d*a-v*o,t[5]=d*i+h*o+v*e-l*a,t[6]=v*i+h*a+l*o-d*e,t[7]=h*i-l*e-d*o-v*a,t}function Fo(t,n,r){var e=-n[0],o=-n[1],a=-n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=u*i+s*e+c*a-f*o,d=c*i+s*o+f*e-u*a,v=f*i+s*a+u*o-c*e,h=s*i-u*e-c*o-f*a;return Fe(t,n,r),e=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+h*e+d*a-v*o,t[5]=d*i+h*o+v*e-l*a,t[6]=v*i+h*a+l*o-d*e,t[7]=h*i-l*e-d*o-v*a,t}function Io(t,n,r){var e=r[0],o=r[1],a=r[2],i=r[3],u=n[0],c=n[1],f=n[2],s=n[3];return t[0]=u*i+s*e+c*a-f*o,t[1]=c*i+s*o+f*e-u*a,t[2]=f*i+s*a+u*o-c*e,t[3]=s*i-u*e-c*o-f*a,u=n[4],c=n[5],f=n[6],s=n[7],t[4]=u*i+s*e+c*a-f*o,t[5]=c*i+s*o+f*e-u*a,t[6]=f*i+s*a+u*o-c*e,t[7]=s*i-u*e-c*o-f*a,t}function Do(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*s+i*u+o*f-a*c,t[1]=o*s+i*c+a*u-e*f,t[2]=a*s+i*f+e*c-o*u,t[3]=i*s-e*u-o*c-a*f,u=r[4],c=r[5],f=r[6],s=r[7],t[4]=e*s+i*u+o*f-a*c,t[5]=o*s+i*c+a*u-e*f,t[6]=a*s+i*f+e*c-o*u,t[7]=i*s-e*u-o*c-a*f,t}function ko(t,n,r,e){if(Math.abs(e)<v)return yo(t,n);var o=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);e*=.5;var a=Math.sin(e),i=a*r[0]/o,u=a*r[1]/o,c=a*r[2]/o,f=Math.cos(e),s=n[0],l=n[1],d=n[2],h=n[3];t[0]=s*f+h*i+l*c-d*u,t[1]=l*f+h*u+d*i-s*c,t[2]=d*f+h*c+s*u-l*i,t[3]=h*f-s*i-l*u-d*c;var p=n[4],m=n[5],M=n[6],b=n[7];return t[4]=p*f+b*i+m*c-M*u,t[5]=m*f+b*u+M*i-p*c,t[6]=M*f+b*c+p*u-m*i,t[7]=b*f-p*i-m*u-M*c,t}function Co(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t}function Uo(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[4],c=r[5],f=r[6],s=r[7],l=n[4],d=n[5],v=n[6],h=n[7],p=r[0],m=r[1],M=r[2],b=r[3];return t[0]=e*b+i*p+o*M-a*m,t[1]=o*b+i*m+a*p-e*M,t[2]=a*b+i*M+e*m-o*p,t[3]=i*b-e*p-o*m-a*M,t[4]=e*s+i*u+o*f-a*c+l*b+h*p+d*M-v*m,t[5]=o*s+i*c+a*u-e*f+d*b+h*m+v*p-l*M,t[6]=a*s+i*f+e*c-o*u+v*b+h*M+l*m-d*p,t[7]=i*s-e*u-o*c-a*f+h*b-l*p-d*m-v*M,t}var Lo=Uo;function Oo(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t}var zo=to;function Go(t,n,r,e){var o=1-e;return zo(n,r)<0&&(e=-e),t[0]=n[0]*o+r[0]*e,t[1]=n[1]*o+r[1]*e,t[2]=n[2]*o+r[2]*e,t[3]=n[3]*o+r[3]*e,t[4]=n[4]*o+r[4]*e,t[5]=n[5]*o+r[5]*e,t[6]=n[6]*o+r[6]*e,t[7]=n[7]*o+r[7]*e,t}function qo(t,n){var r=Wo(n);return t[0]=-n[0]/r,t[1]=-n[1]/r,t[2]=-n[2]/r,t[3]=n[3]/r,t[4]=-n[4]/r,t[5]=-n[5]/r,t[6]=-n[6]/r,t[7]=n[7]/r,t}function No(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t}var Vo=ro,Xo=Vo,Wo=oo,Yo=Wo;function Ho(t,n){var r=Wo(n);if(r>0){r=Math.sqrt(r);var e=n[0]/r,o=n[1]/r,a=n[2]/r,i=n[3]/r,u=n[4],c=n[5],f=n[6],s=n[7],l=e*u+o*c+a*f+i*s;t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=(u-e*l)/r,t[5]=(c-o*l)/r,t[6]=(f-a*l)/r,t[7]=(s-i*l)/r}return t}function Qo(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Zo(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]}function $o(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=t[6],f=t[7],s=n[0],l=n[1],d=n[2],h=n[3],p=n[4],m=n[5],M=n[6],b=n[7];return Math.abs(r-s)<=v*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(e-l)<=v*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-d)<=v*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-h)<=v*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-p)<=v*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-m)<=v*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-M)<=v*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(f-b)<=v*Math.max(1,Math.abs(f),Math.abs(b))}function Ko(){var t=new h(2);return h!=Float32Array&&(t[0]=0,t[1]=0),t}function Jo(t){var n=new h(2);return n[0]=t[0],n[1]=t[1],n}function ta(t,n){var r=new h(2);return r[0]=t,r[1]=n,r}function na(t,n){return t[0]=n[0],t[1]=n[1],t}function ra(t,n,r){return t[0]=n,t[1]=r,t}function ea(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t}function oa(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}function aa(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t}function ia(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t}function ua(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function ca(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function fa(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t}function sa(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t}function la(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function da(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t}function va(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t}function ha(t,n){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)}function pa(t,n){var r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e}function ma(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)}function Ma(t){var n=t[0],r=t[1];return n*n+r*r}function ba(t,n){return t[0]=-n[0],t[1]=-n[1],t}function xa(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function ga(t,n){var r=n[0],e=n[1],o=r*r+e*e;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t}function ya(t,n){return t[0]*n[0]+t[1]*n[1]}function _a(t,n,r){var e=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=e,t}function Ra(t,n,r,e){var o=n[0],a=n[1];return t[0]=o+e*(r[0]-o),t[1]=a+e*(r[1]-a),t}function Ea(t,n){n=n||1;var r=2*p()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t}function wa(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[2]*o,t[1]=r[1]*e+r[3]*o,t}function Aa(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[2]*o+r[4],t[1]=r[1]*e+r[3]*o+r[5],t}function Ta(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[3]*o+r[6],t[1]=r[1]*e+r[4]*o+r[7],t}function Sa(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[4]*o+r[12],t[1]=r[1]*e+r[5]*o+r[13],t}function Pa(t,n,r,e){var o=n[0]-r[0],a=n[1]-r[1],i=Math.sin(e),u=Math.cos(e);return t[0]=o*u-a*i+r[0],t[1]=o*i+a*u+r[1],t}function ja(t,n){var r=t[0],e=t[1],o=n[0],a=n[1],i=r*r+e*e;i>0&&(i=1/Math.sqrt(i));var u=o*o+a*a;u>0&&(u=1/Math.sqrt(u));var c=(r*o+e*a)*i*u;return c>1?0:c<-1?Math.PI:Math.acos(c)}function Ba(t){return t[0]=0,t[1]=0,t}function Fa(t){return"vec2("+t[0]+", "+t[1]+")"}function Ia(t,n){return t[0]===n[0]&&t[1]===n[1]}function Da(t,n){var r=t[0],e=t[1],o=n[0],a=n[1];return Math.abs(r-o)<=v*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-a)<=v*Math.max(1,Math.abs(e),Math.abs(a))}var ka=ma,Ca=oa,Ua=aa,La=ia,Oa=ha,za=pa,Ga=Ma,qa=function(){var t=Ko();return function(n,r,e,o,a,i){var u,c;for(r||(r=2),e||(e=0),c=o?Math.min(o*r+e,n.length):n.length,u=e;u<c;u+=r)t[0]=n[u],t[1]=n[u+1],a(t,t,i),n[u]=t[0],n[u+1]=t[1];return n}}();r.d(n,"glMatrix",function(){return e}),r.d(n,"mat2",function(){return o}),r.d(n,"mat2d",function(){return a}),r.d(n,"mat3",function(){return i}),r.d(n,"mat4",function(){return u}),r.d(n,"quat",function(){return s}),r.d(n,"quat2",function(){return l}),r.d(n,"vec2",function(){return d}),r.d(n,"vec3",function(){return c}),r.d(n,"vec4",function(){return f})},function(t,n,r){var e=r(36),o="object"==typeof self&&self&&self.Object===Object&&self,a=e||o||Function("return this")();t.exports=a},function(t,n,r){var e=r(91),o=r(94);t.exports=function(t,n){var r=o(t,n);return e(r)?r:void 0}},function(t,n){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,n){t.exports=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){this.width=t,this.height=n,this.vals=new Array(t*n)}return t.prototype.write=function(t,n,r){this.vals[t+n*this.width]=r},t.prototype.at=function(t,n){return this.vals[t+n*this.width]},t.prototype.copyFrom=function(t){for(var n=0;n<this.width&&n<t.width;++n)for(var r=0;r<this.height&&r<t.height;++r)this.write(n,r,t.at(n,r))},t}();n.WriteGrid=e,n.safeOutOfBounds=function(t,n){return{width:t.width,height:t.height,at:function(r,e){return r<0||e<0||r>=t.width||e>=t.width?n:t.at(r,e)}}},n.Grid={find:function(t,n){for(var r=0;r<t.width;++r)for(var e=0;e<t.height;++e)if(n(r,e,t.at(r,e)))return{x:r,y:e};return null},forEach:function(t,n){for(var r=0;r<t.width;++r)for(var e=0;e<t.height;++e)n(r,e,t.at(r,e))},map:function(t,n){for(var r=new e(t.width,t.height),o=0;o<t.width;++o)for(var a=0;a<t.height;++a)r.write(o,a,n(o,a,t.at(o,a)));return r}}},function(t,n,r){var e=r(1).Symbol;t.exports=e},function(t,n,r){var e=r(6),o=r(65),a=r(66),i="[object Null]",u="[object Undefined]",c=e?e.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?u:i:c&&c in Object(t)?o(t):a(t)}},function(t,n){var r=Array.isArray;t.exports=r},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(67),o=r(68),a=r(69),i=r(70),u=r(71),c=r(72),f=r(73),s=r(74),l={};n.getShaders=function(t){return t.canvas.id in l||(l[t.canvas.id]=function(t){return{bufferCopy:v(t,"bufferCopy",e),cave:v(t,"cave",o),caveDemo:v(t,"caveDemo",a),flatWhite:v(t,"flatWhite",i),gaussianBlur:v(t,"gaussianBlur",u),generateRockTexture:v(t,"generateRockTexture",c),normals:v(t,"normals",f),ship:v(t,"ship",s)}}(t)),l[t.canvas.id]};var d=function(t,n,r){return"\n    <h1>Error in "+t+' shader in "'+n+'.glsl"</h1>\n    <code>'+r.replace(/\n/g,"<br/>")+"</code>\n"},v=function(t,n,r){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"#define VERTEX\n"+r+"\n"),t.compileShader(e);var o=t.getShaderInfoLog(e);if(null===o||o.length>0)throw document.body.innerHTML=d("vertex",n,o),new Error("Error compiling shader: "+n);var a=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(a,"#define FRAGMENT\n"+r+"\n"),t.compileShader(a);var i=t.getShaderInfoLog(a);if(null===i||i.length>0)throw document.body.innerHTML=d("fragment",n,i),new Error("Error compiling shader: "+n);var u=t.createProgram();return t.attachShader(u,e),t.attachShader(u,a),t.linkProgram(u),u}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(21),o=r(0),a=r(11),i=o.mat4.create(),u=o.vec4.create(),c=o.vec3.create(),f=o.vec3.create(),s=o.vec3.create();n.Camera={create:function(){return{transform:e.Transform.create(),aspectRatio:1,fov:Math.PI/2,near:.01,far:100}},getViewMatrix:function(t,n){return e.Transform.toMatrix(t.transform,n),o.mat4.invert(n,n)},getProjectionMatrix:function(t,n){return o.mat4.perspective(n,t.fov,t.aspectRatio,t.near,t.far)},updateAspectRatio:function(t,n,r){t.aspectRatio=n/r},screenPointToWorldXYPlanePoint:function(t,r,l){o.vec4.set(u,2*r[0]-1,2*r[1]-1,-1,1),n.Camera.getProjectionMatrix(t,i),o.mat4.invert(i,i),o.vec4.transformMat4(u,u,i),u[2]=-1,u[3]=0,e.Transform.toMatrix(t.transform,i),o.vec4.transformMat4(u,u,i),o.vec3.set(c,u[0],u[1],u[2]),o.vec3.set(f,0,0,-1),o.vec3.set(s,0,0,0);var d=(o.vec3.dot(f,s)-o.vec3.dot(f,a.unconst(t.transform.position)))/o.vec3.dot(f,c);return o.vec3.scaleAndAdd(l,a.unconst(t.transform.position),c,d)}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unconst=function(t){return t}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createSimpleSerializer=function(){return{serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)}}},n.TICK_LENGTH_MS=33;var e=function(){function t(t,n){var r=this;this.toClientSerDe=t,this.toServerSerDe=n,this.toServerQueue=[],this.toClientQueues={},this.clients={},this.latency=100,this.server={id:"server",countAvailablePackets:function(){return r.toServerQueue.length},receiveAllPackets:function(){var t=r.toServerQueue.slice();return r.toServerQueue.length=0,t},receivePacket:function(){if(r.toServerQueue.length<1)return null;var t=r.toServerQueue[0];return r.toServerQueue.splice(0,1),t},sendPacket:function(t){var n=r.toClientSerDe.serialize(t);setTimeout(function(){for(var t in r.toClientQueues)r.toClientQueues[t].push({senderId:"server",packet:r.toClientSerDe.deserialize(n)})},r.latency)}}}return t.prototype.createClient=function(){var t=this,n=Math.random().toString(36).substr(2);return this.toClientQueues[n]=[],this.clients[n]={id:n,countAvailablePackets:function(){return t.toClientQueues[n].length},receiveAllPackets:function(){var r=t.toClientQueues[n].slice();return t.toClientQueues[n].length=0,r},receivePacket:function(){if(t.toClientQueues[n].length<1)return null;var r=t.toClientQueues[n][0];return t.toClientQueues[n].splice(0,1),r},sendPacket:function(r){setTimeout(function(){t.toServerQueue.push({senderId:n,packet:t.toServerSerDe.deserialize(t.toServerSerDe.serialize(r))})},t.latency)}},this.clients[n]},t}();n.LocalNetwork=e},function(t,n,r){var e=r(81),o=r(82),a=r(83),i=r(84),u=r(85);function c(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}c.prototype.clear=e,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=u,t.exports=c},function(t,n,r){var e=r(40);t.exports=function(t,n){for(var r=t.length;r--;)if(e(t[r][0],n))return r;return-1}},function(t,n,r){var e=r(2)(Object,"create");t.exports=e},function(t,n,r){var e=r(104);t.exports=function(t,n){var r=t.__data__;return e(n)?r["string"==typeof n?"string":"hash"]:r.map}},function(t,n,r){var e=r(43),o=r(44);t.exports=function(t,n,r,a){var i=!r;r||(r={});for(var u=-1,c=n.length;++u<c;){var f=n[u],s=a?a(r[f],t[f],f,r,t):void 0;void 0===s&&(s=t[f]),i?o(r,f,s):e(r,f,s)}return r}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RectTool={area:function(t){return(t.xmax-t.xmin)*(t.ymax-t.ymin)}},n.smallestDifferenceRadians=function(t,n){return t%=2*Math.PI,n%=2*Math.PI,Math.abs(t-n)>Math.PI&&(t>0?t-=2*Math.PI:t+=2*Math.PI),t-n},n.lerpRadians=function(t,r,e){return t+e*n.smallestDifferenceRadians(r,t)},n.findBounds=function(t){var n={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};return t.forEach(function(t){t[0]<n.xmin&&(n.xmin=t[0]),t[1]<n.ymin&&(n.ymin=t[1]),t[0]>n.xmax&&(n.xmax=t[0]),t[1]>n.ymax&&(n.ymax=t[1])}),n}},function(t,n){t.exports=function(t,n){for(var r=-1,e=n.length,o=t.length;++r<e;)t[o+r]=n[r];return t}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n){this.gl=t,this.shader=n,this.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,-1,1,-1,1,1,-1,1]),t.STATIC_DRAW)}return t.prototype.draw=function(t,n){var r=this.gl;if(r.useProgram(this.shader),t){r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t);var e=r.getUniformLocation(this.shader,"u_tex");r.uniform1i(e,0)}n&&n(r,this.shader),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer);var o=r.getAttribLocation(this.shader,"i_position");r.enableVertexAttribArray(o),r.vertexAttribPointer(o,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLES,0,6)},t.prototype.release=function(){var t=this.gl;t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexBuffer)},t}();n.BufferRenderer=e},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(0),o=r(11);n.Transform={create:function(){return{position:e.vec3.create(),rotation:e.quat.create(),scale:e.vec3.fromValues(1,1,1)}},toMatrix:function(t,n){return e.mat4.fromRotationTranslationScale(n,o.unconst(t.rotation),o.unconst(t.position),o.unconst(t.scale))}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(12),o=r(0),a=r(18),i=r(11),u=r(78),c=o.vec2.create();n.serverPacketSerializer=e.createSimpleSerializer(),n.clientPacketSerializer=e.createSimpleSerializer(),n.PlayerState={create:function(){return{position:o.vec2.create(),angle:0,lastInputUID:""}},clone:function(t){return u(t)},lerp:function(t,r,e){var u=n.PlayerState.clone(r);return o.vec2.lerp(u.position,i.unconst(t.position),i.unconst(r.position),e),u.angle=a.lerpRadians(t.angle,r.angle,e),u}};var f=function(t,n,r,e){return o.vec2.sub(c,i.unconst(r.mouseWorldPos),i.unconst(n.position)),t.angle=Math.atan2(c[1],c[0]),r.pressing?(o.vec2.normalize(c,c),o.vec2.scale(c,c,.1),o.vec2.add(t.position,i.unconst(n.position),c)):o.vec2.copy(t.position,i.unconst(n.position)),t.lastInputUID=r.uid,t};n.GameState={create:function(){return{tick:0,predictedTick:0,players:{}}},clone:function(t){return u(t)},lerp:function(t,r,e){var o=n.GameState.clone(r);for(var a in r.players)a in t.players&&(o.players[a]=n.PlayerState.lerp(t.players[a],r.players[a],e));return o},step:function(t,r){var e=n.GameState.clone(t);for(var o in e.tick++,e.predictedTick=e.tick,t.players)o in r&&f(e.players[o],t.players[o],r[o]);return e},predict:function(t,r,e){var o=n.GameState.clone(t);return o.predictedTick++,f(o.players[e],t.players[e],r),o}}},function(t,n,r){var e=r(2)(r(1),"Map");t.exports=e},function(t,n,r){var e=r(45),o=r(116),a=r(49);t.exports=function(t){return a(t)?e(t):o(t)}},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n){t.exports=function(t){return function(n){return t(n)}}},function(t,n,r){(function(t){var e=r(36),o=n&&!n.nodeType&&n,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,i=a&&a.exports===o&&e.process,u=function(){try{var t=a&&a.require&&a.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=u}).call(this,r(25)(t))},function(t,n){var r=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||r)}},function(t,n,r){var e=r(124),o=r(51),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,u=i?function(t){return null==t?[]:(t=Object(t),e(i(t),function(n){return a.call(t,n)}))}:o;t.exports=u},function(t,n,r){var e=r(128),o=r(23),a=r(129),i=r(130),u=r(131),c=r(7),f=r(42),s=f(e),l=f(o),d=f(a),v=f(i),h=f(u),p=c;(e&&"[object DataView]"!=p(new e(new ArrayBuffer(1)))||o&&"[object Map]"!=p(new o)||a&&"[object Promise]"!=p(a.resolve())||i&&"[object Set]"!=p(new i)||u&&"[object WeakMap]"!=p(new u))&&(p=function(t){var n=c(t),r="[object Object]"==n?t.constructor:void 0,e=r?f(r):"";if(e)switch(e){case s:return"[object DataView]";case l:return"[object Map]";case d:return"[object Promise]";case v:return"[object Set]";case h:return"[object WeakMap]"}return n}),t.exports=p},function(t,n,r){var e=r(134);t.exports=function(t){var n=new t.constructor(t.byteLength);return new e(n).set(new e(t)),n}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(5),o=r(57),a=r(34),i=r(58),u=r(18),c=r(59),f=r(0),s=function(t,n,r,e,o,a){if(n<0||r<0)return a;if(n>=t.width||r>=t.height)return a;var i=t.at(n,r);return i===o?a:i!==e?a:(t.write(n,r,o),a=s(t,n-1,r,e,o,++a),a=s(t,n+1,r,e,o,a),a=s(t,n,r-1,e,o,a),a=s(t,n,r+1,e,o,a))};n.generateCave=function(t){return n.generateCaveVerbose(t).cave},n.generatePartialAutomatonResult=function(t,n){return o.runCellularAutomaton(75,75,t,.48,5,4,n)},n.generateCaveVerbose=function(t){var n,r=o.runCellularAutomaton(75,75,t,.48,5,4,30),l=e.Grid.map(r,function(t,n,r){return r?-1:0}),d=function(t){for(var n=1,r=-1,o=0;;){var a=e.Grid.find(t,function(t,n,r){return 0===r});if(null===a)return r;var i=s(t,a.x,a.y,0,n,0);i>o&&(o=i,r=n),n++}}(l),v=e.Grid.map(l,function(t,n,r){return r!==d});n=v,e.Grid.forEach(e.safeOutOfBounds(n,!0),function(t,r,e){e&&(!e||n.at(t-1,r)||n.at(t+1,r)||n.write(t+1,r,!0),!e||n.at(t,r-1)||n.at(t,r+1)||n.write(t,r+1,!0))});var h=a.markEdges(v),p=a.findContours(h,2),m=p.contours.map(function(t,n){return{i:n,area:u.RectTool.area(u.findBounds(t))}}).sort(function(t,n){return n.area-t.area})[0].i,M=p.contours.map(function(t){return i.smoothCurve(t,10,.7)}),b=M[m].map(function(t,n){return{i:n,len:(t[0]+1)*(t[0]+1)+(t[1]+1)*(t[1]+1)}}).sort(function(t,n){return t.len-n.len})[0].i,x=M[m][b],g=M[m][0===b?M[m].length-1:b-1],y=Math.abs(x[1]-g[1]);M[m].splice(b,0,f.vec2.fromValues(-1,-1+y),f.vec2.fromValues(-1,1),f.vec2.fromValues(1,1),f.vec2.fromValues(1,-1),f.vec2.fromValues(-1,-1),f.vec2.fromValues((x[0]+g[0])/2,(x[1]+g[1])/2));var _=M.map(c.triangulate);return M[m][b][1]-=y,M[m][b+5][0]=g[0],M[m][b+5][1]=g[1],{cave:{edges:M,triangles:_},details:{automatonResult:r,coloredGrid:l,filledGrid:v,edgeMarkedGrid:h,findContoursResult:p,outerMostContourIndex:m,topLeftMostVertexIndex:b}}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=4294967296,o=function(){function t(n){this.seed=void 0!==n?Math.floor(n)%e:t.getRandomSeed()}return t.getRandomSeed=function(){return Math.floor(Math.random()*e)},t.prototype.next=function(){return this.seed=(1664525*this.seed+1013904223)%e,this.seed/e},t.MAX_SEED=e-1,t}();n.PRNG=o},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e,o=r(5),a=r(18),i=r(0);n.markEdges=function(t){for(var n=o.Grid.map(t,function(t,n,r){return{kind:r?"dirt":"air",normal:0}}),r=0;r<t.width;r++)for(var e=0;e<t.height;e++)if(t.at(r,e)){var a=r>0&&!t.at(r-1,e),i=r<t.width-2&&!t.at(r+1,e),u=e>0&&!t.at(r,e-1),c=e<t.height-2&&!t.at(r,e+1);if(a||i||u||c){var f=i&&c?45:c&&a?135:a&&u?-135:u&&i?-45:i?0:c?90:a?180:-90;n.write(r,e,{kind:"edge",normal:f})}}return n},function(t){t[t.Unwalked=0]="Unwalked",t[t.Walked=1]="Walked",t[t.WalkedImportant=2]="WalkedImportant"}(e=n.WalkedStatus||(n.WalkedStatus={})),n.findContours=function(t,n){var r=o.Grid.map(new o.WriteGrid(t.width,t.height),function(t){return e.Unwalked}),a=[],i=0,u=null;do{null!==(u=c(r,t,n))&&u.length>2&&a.push(u)}while(null!=u&&i++<100);return{contours:a,walkMap:r}};var u=function(t,n){for(var r=100,e=0,o=0;o<n.length;++o){var i=n[o],u=Math.abs(a.smallestDifferenceRadians(i.normal*Math.PI/180,t.normal*Math.PI/180));u<r&&(r=u,e=o)}return n[e]},c=function(t,n,r){var a=function(t,n){for(var r=0;r<n.width;r++)for(var o=0;o<n.height;o++)if("edge"===n.at(r,o).kind&&t.at(r,o)===e.Unwalked)return{x:r,y:o};return null}(t,n);if(null===a)return null;n=o.safeOutOfBounds(n,{kind:"dirt",normal:0});var c=[],f=a.x,s=a.y,l=0,d={dx:0,dy:0,normal:0},v=e.Walked,h=[];do{h=[];for(var p=-1;p<=1;p++)for(var m=-1;m<=1;m++)0===p&&0===m||"edge"===n.at(f+p,s+m).kind&&t.at(f+p,s+m)===e.Unwalked&&h.push({dx:p,dy:m,normal:n.at(f+p,s+m).normal});if(h.length>0){var M=u(d,h);f+=M.dx,s+=M.dy;var b=e.Walked;if(M.normal!==d.normal){(0===r||(1===r&&0!=M.dx&&0!=M.dy||v!=e.WalkedImportant))&&(b=e.WalkedImportant)}b===e.WalkedImportant&&c.push(i.vec2.fromValues(2*(f+.5)/n.width-1,2*(s+.5)/n.height-1)),t.write(f,s,b),v=b,d=M}}while(h.length>0&&l++<5e3);return c}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(60),o=r(9),a=r(20),i=r(75),u=r(38),c=r(0),f=r(10),s=r(11),l=c.mat4.create(),d=c.mat4.create(),v=function(t){return e(e(t.edges).map(function(t){return[t[0],-t[1]]}))},h=function(t){var n=0,r=[];return t.triangles.forEach(function(e,o){r=r.concat(e.map(function(t){return t+n})),n+=t.edges[o].length}),r.reverse(),r},p=function(){function t(n,r,e){this.gl=n,this.normalsTexture=e,this.vertexBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(v(r)),n.STATIC_DRAW);var o=h(r);this.indexBufferLen=o.length,this.indexBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),n.STATIC_DRAW),this._surfaceInfoBuffers=this.buildSurfaceInfoBuffers(t.SURFACE_INFO_BUFFER_SIZE)}return t.prototype.buildSurfaceInfoBuffers=function(t){var n=this.gl,r=new a.BufferRenderer(n,o.getShaders(n).normals),e=new i.GaussianBlur(n,t,t),c=new i.GaussianBlur(n,t,t),f=new u.FrameBufferTexture(n,t,t),s=o.getShaders(n).flatWhite;n.bindFramebuffer(n.FRAMEBUFFER,f.framebuffer),n.viewport(0,0,t,t),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.useProgram(s),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer);var l=n.getAttribLocation(s,"i_position");return n.enableVertexAttribArray(l),n.vertexAttribPointer(l,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.drawElements(n.TRIANGLES,this.indexBufferLen,n.UNSIGNED_SHORT,0),e.run(f.texture,30),n.bindFramebuffer(n.FRAMEBUFFER,f.framebuffer),n.viewport(0,0,t,t),r.draw(e.resultTexture,function(n,r){n.uniform2f(n.getUniformLocation(r,"u_resolution"),t,t)}),c.run(f.texture,2),n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,n.canvas.width,n.canvas.height),r.release(),{depth:e.releaseTexture(),normal:c.releaseTexture()}},Object.defineProperty(t.prototype,"surfaceInfoBuffers",{get:function(){return this._surfaceInfoBuffers},enumerable:!0,configurable:!0}),t.prototype.drawDemo=function(t,n,r,e){var a=this.gl,i=o.getShaders(a).caveDemo;a.useProgram(i),a.uniform1f(a.getUniformLocation(i,"u_time"),t),a.uniform1f(a.getUniformLocation(i,"u_zoom"),n),a.uniform2f(a.getUniformLocation(i,"u_pointLightPos"),r,e),c.mat4.identity(l),c.mat4.perspective(l,Math.PI/2,1,.01,100),a.uniformMatrix4fv(a.getUniformLocation(i,"u_perspective"),!1,l),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this._surfaceInfoBuffers.depth),a.uniform1i(a.getUniformLocation(i,"u_depth"),0),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this._surfaceInfoBuffers.normal),a.uniform1i(a.getUniformLocation(i,"u_normal"),1),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,this.normalsTexture),a.uniform1i(a.getUniformLocation(i,"u_normalRocks"),2),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);var u=a.getAttribLocation(i,"i_position");a.enableVertexAttribArray(u),a.vertexAttribPointer(u,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.drawElements(a.TRIANGLES,this.indexBufferLen,a.UNSIGNED_SHORT,0)},t.prototype.draw=function(n,r){var e=this.gl,a=o.getShaders(e).cave;e.useProgram(a),c.mat4.identity(l),c.mat4.scale(l,l,t.CAVE_SCALE),e.uniformMatrix4fv(e.getUniformLocation(a,"u_model"),!1,l),f.Camera.getViewMatrix(n,d),c.mat4.mul(l,d,l),f.Camera.getProjectionMatrix(n,d),c.mat4.mul(l,d,l),e.uniformMatrix4fv(e.getUniformLocation(a,"u_mvp"),!1,l),e.uniform1f(e.getUniformLocation(a,"u_time"),0),e.uniform3fv(e.getUniformLocation(a,"u_shipWorldPos"),s.unconst(r)),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._surfaceInfoBuffers.depth),e.uniform1i(e.getUniformLocation(a,"u_depth"),0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this._surfaceInfoBuffers.normal),e.uniform1i(e.getUniformLocation(a,"u_normal"),1),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this.normalsTexture),e.uniform1i(e.getUniformLocation(a,"u_normalRocks"),2),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer);var i=e.getAttribLocation(a,"i_position");e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.drawElements(e.TRIANGLES,this.indexBufferLen,e.UNSIGNED_SHORT,0)},t.prototype.release=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this._surfaceInfoBuffers.depth),t.deleteTexture(this._surfaceInfoBuffers.normal)},t.SURFACE_INFO_BUFFER_SIZE=1024,t.CAVE_SIZE=20,t.CAVE_SCALE=c.vec3.fromValues(t.CAVE_SIZE,t.CAVE_SIZE,t.CAVE_SIZE),t}();n.CaveRenderer=p},function(t,n,r){(function(n){var r="object"==typeof n&&n&&n.Object===Object&&n;t.exports=r}).call(this,r(63))},function(t,n,r){var e=r(64),o=r(3),a=Object.prototype,i=a.hasOwnProperty,u=a.propertyIsEnumerable,c=e(function(){return arguments}())?e:function(t){return o(t)&&i.call(t,"callee")&&!u.call(t,"callee")};t.exports=c},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,n,r){this.gl=t,this.framebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGB,n,r,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}return t.prototype.release=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(this.texture),t.deleteFramebuffer(this.framebuffer)},t.prototype.releaseTexture=function(){var t=this.gl;return t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),this.texture},t}();n.FrameBufferTexture=e},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.loadTexture=function(t,n,r){return new Promise(function(e,o){var a=new Image;a.onload=function(){var n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a);var o=void 0===r?t.CLAMP_TO_EDGE:r;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,o),e(n)},a.src=n})}},function(t,n){t.exports=function(t,n){return t===n||t!=t&&n!=n}},function(t,n,r){var e=r(7),o=r(4),a="[object AsyncFunction]",i="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var n=e(t);return n==i||n==u||n==a||n==c}},function(t,n){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,n,r){var e=r(44),o=r(40),a=Object.prototype.hasOwnProperty;t.exports=function(t,n,r){var i=t[n];a.call(t,n)&&o(i,r)&&(void 0!==r||n in t)||e(t,n,r)}},function(t,n,r){var e=r(109);t.exports=function(t,n,r){"__proto__"==n&&e?e(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}},function(t,n,r){var e=r(111),o=r(37),a=r(8),i=r(46),u=r(113),c=r(114),f=Object.prototype.hasOwnProperty;t.exports=function(t,n){var r=a(t),s=!r&&o(t),l=!r&&!s&&i(t),d=!r&&!s&&!l&&c(t),v=r||s||l||d,h=v?e(t.length,String):[],p=h.length;for(var m in t)!n&&!f.call(t,m)||v&&("length"==m||l&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,p))||h.push(m);return h}},function(t,n,r){(function(t){var e=r(1),o=r(112),a=n&&!n.nodeType&&n,i=a&&"object"==typeof t&&t&&!t.nodeType&&t,u=i&&i.exports===a?e.Buffer:void 0,c=(u?u.isBuffer:void 0)||o;t.exports=c}).call(this,r(25)(t))},function(t,n){var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,n){t.exports=function(t,n){return function(r){return t(n(r))}}},function(t,n,r){var e=r(41),o=r(47);t.exports=function(t){return null!=t&&o(t.length)&&!e(t)}},function(t,n,r){var e=r(45),o=r(119),a=r(49);t.exports=function(t){return a(t)?e(t,!0):o(t)}},function(t,n){t.exports=function(){return[]}},function(t,n,r){var e=r(19),o=r(53),a=r(29),i=r(51),u=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)e(n,a(t)),t=o(t);return n}:i;t.exports=u},function(t,n,r){var e=r(48)(Object.getPrototypeOf,Object);t.exports=e},function(t,n,r){var e=r(19),o=r(8);t.exports=function(t,n,r){var a=n(t);return o(t)?a:e(a,r(t))}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(56),o=r(76),a={"vector-caves":e.initPost};window.initPost=function(t){return a[t]()},window.initGame=o.initGame,window.initLocalMultiGame=o.initLocalMultiGame},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(32),o=r(5),a=r(34),i=r(0),u=r(35),c=r(20),f=r(39),s=r(9),l=r(33);n.initPost=function(){var t,n,r=document.getElementById("gen-slider"),u=document.getElementById("zeroth-canvas").getContext("2d"),c=document.getElementById("first-canvas").getContext("2d"),f=document.getElementById("second-canvas").getContext("2d"),s=document.getElementById("third-canvas").getContext("2d"),v=document.getElementById("fourth-canvas").getContext("2d"),x=document.getElementById("fifth-canvas").getContext("2d"),g=document.getElementById("sixth-canvas").getContext("2d"),y=document.getElementById("seventh-canvas").getContext("2d"),_=document.getElementById("ninth-canvas").getContext("2d"),R=function(){var n=parseFloat(r.value),a=e.generatePartialAutomatonResult(t,n);o.Grid.forEach(a,function(t,n,r){u.fillStyle=r?"#000":"#FFF",u.fillRect(4*t,4*n,4,4)})};t=l.PRNG.getRandomSeed(),R();var E=e.generateCaveVerbose(t),w=E.cave,A=E.details;n=w,o.Grid.forEach(A.automatonResult,function(t,n,r){c.fillStyle=r?"#000":"#FFF",c.fillRect(4*t,4*n,4,4)}),o.Grid.forEach(A.coloredGrid,function(t,n,r){f.fillStyle=h(r),f.fillRect(4*t,4*n,4,4)}),o.Grid.forEach(A.filledGrid,function(t,n,r){s.fillStyle=r?"#000":"#FFF",s.fillRect(4*t,4*n,4,4)}),o.Grid.forEach(A.edgeMarkedGrid,function(t,n,r){v.fillStyle="edge"===r.kind?p(r.normal):"air"===r.kind?"#655":"#77f",v.fillRect(4*t,4*n,4,4)});var T=A.findContoursResult;o.Grid.forEach(T.walkMap,function(t,n,r){x.fillStyle=r===a.WalkedStatus.WalkedImportant?"#fff":r===a.WalkedStatus.Walked?"#333":"#000",x.fillRect(4*t,4*n,4,4),g.fillStyle=r===a.WalkedStatus.WalkedImportant?"#333":"#000",g.fillRect(9*t,9*n,9,9)});var S=function(t){return i.vec2.fromValues(337.5*(1+t[0]),337.5*(1+t[1]))};T.contours.forEach(function(t,n){g.strokeStyle=n===A.outerMostContourIndex?"#f00":"#933",g.beginPath();var r=S(t[0]);g.moveTo(r[0],r[1]);for(var e=1;e<t.length;++e){var o=S(t[e]);g.lineTo(o[0],o[1])}g.closePath(),g.stroke()}),y.strokeStyle="#0f0",y.fillStyle="#000",y.fillRect(0,0,675,675),w.edges.forEach(function(t,n){y.strokeStyle=n===A.outerMostContourIndex?"#0f0":"#393",y.beginPath();var r=S(t[0]);y.moveTo(r[0],r[1]);for(var e=1;e<t.length;++e){var o=S(t[e]);y.lineTo(o[0],o[1])}y.closePath(),y.stroke()}),_.fillStyle="#000",_.fillRect(0,0,675,675),w.triangles.forEach(function(t,n){for(var r=function(r){_.fillStyle=d(),_.beginPath();var e=S(w.edges[n][t[r]]);_.moveTo(e[0],e[1]),[1,2,0].forEach(function(e){var o=S(w.edges[n][t[r+e]]);_.lineTo(o[0],o[1])}),_.fill()},e=0;e<t.length-2;e+=3)r(e)}),r.oninput=r.onchange=R,document.getElementById("generate-new").onclick=function(){return location.reload()};var P=[0,1,2,3].map(function(t){return document.getElementById("canvas"+t).getContext("webgl")});m(n,"depth",P[0]),m(n,"normal",P[1]),M(P[2]),b(n,P[3])};var d=function(){var t=function(){var t=Math.floor(256*Math.random()).toString(16);return t.length<2&&(t="0"+t),t};return"#"+t()+t()+t()},v=[0,0,0,0,0,0,0,0,0,0].map(function(t){return d()}),h=function(t){return t<0?"#000":v[t%v.length]},p=function(t){var n=Math.cos(t*Math.PI/180),r=Math.sin(t*Math.PI/180),e=Math.round(15*(.5*n+.5)),o=Math.round(15*(.5*r+.5));return"#"+e.toString(16)+o.toString(16)+"f"},m=function(t,n,r){var e=new u.CaveRenderer(r,t,null).surfaceInfoBuffers,o=new c.BufferRenderer(r,s.getShaders(r).bufferCopy);o.draw("depth"===n?e.depth:e.normal),o.release(),r.deleteTexture(e.depth),r.deleteTexture(e.normal)},M=function(t){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,1,0,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);var n=new c.BufferRenderer(t,s.getShaders(t).generateRockTexture);n.draw(null,function(t,n){t.uniform2f(t.getUniformLocation(n,"u_resolution"),t.canvas.width,t.canvas.height)}),n.release()},b=function(t,n){var r={x:0,y:0},e=!1,o=0;n.canvas.onmousemove=function(t){var e=n.canvas.getBoundingClientRect();r.x=(t.clientX-e.left)/n.canvas.width,r.y=1-(t.clientY-e.top)/n.canvas.height},n.canvas.onmousedown=function(t){return e=!0},n.canvas.onmouseleave=n.canvas.onmouseout=n.canvas.onmouseup=function(t){return e=!1},f.loadTexture(n,"caveWalls.png",n.REPEAT).then(function(a){var i=new u.CaveRenderer(n,t,a),c=Date.now(),f=function(){n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);var t=Date.now()-c;e&&(o+=.02);var a=.55+.45*Math.cos(o);i.drawDemo(t,a,r.x,r.y),requestAnimationFrame(f)};requestAnimationFrame(f)})}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(33),o=r(5),a=function(t,n,r){for(var e=0,o=n-1;o<=n+1;++o)for(var a=r-1;a<=r+1;++a)o==n&&a==r||(o<1||a<1||o>=t.width-1||a>=t.height-1?e++:e+=t.at(o,a)?1:0);return e};n.runCellularAutomaton=function(t,n,r,i,u,c,f){for(var s=new o.WriteGrid(t,n),l=new o.WriteGrid(t,n),d=new e.PRNG(r),v=0;v<t;++v)for(var h=0;h<n;++h){var p=0===v||0===h||v===t-1||h===n-1||d.next()<i;s.write(v,h,p),l.write(v,h,p)}for(var m=0;m<f;++m){for(v=1;v<t-1;++v)for(h=1;h<n-1;++h){var M=a(s,v,h);l.write(v,h,M>=(s.at(v,h)?c:u))}s.copyFrom(l)}return s}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(0);n.smoothCurve=function(t,n,r){var o=[];n<1&&(n=1);for(var a=0;a<t.length;++a){var i=t[0==a?t.length-1:a-1],u=t[a],c=t[(a+1)%t.length],f=e.vec2.length(e.vec2.sub(e.vec2.create(),i,u)),s=e.vec2.length(e.vec2.sub(e.vec2.create(),u,c)),l=e.vec2.add(e.vec2.create(),i,u);e.vec2.scale(l,l,.5);var d=e.vec2.add(e.vec2.create(),u,c);e.vec2.scale(d,d,.5);var v=e.vec2.sub(e.vec2.create(),l,d);e.vec2.scale(v,v,r);var h=e.vec2.scale(e.vec2.create(),v,f/(f+s)),p=e.vec2.scale(e.vec2.create(),v,-s/(f+s));o.push({pt:u,controlA:e.vec2.add(e.vec2.create(),h,u),controlB:e.vec2.add(e.vec2.create(),p,u)})}var m=1/n,M=[];for(a=0;a<o.length;++a){u=o[a],c=o[(a+1)%o.length];for(var b=0;b<1-m/2;b+=m){var x=e.vec2.fromValues(0,0);e.vec2.scaleAndAdd(x,x,u.pt,(1-b)*(1-b)*(1-b)),e.vec2.scaleAndAdd(x,x,u.controlB,3*(1-b)*(1-b)*b),e.vec2.scaleAndAdd(x,x,c.controlA,3*(1-b)*b*b),e.vec2.scaleAndAdd(x,x,c.pt,b*b*b),M.push(x)}}return M}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.triangulate=function(t){var n=[],r=t.length;if(r<3)return n;var o=new Array(r);if(e(t)>0)for(var i=0;i<r;i++)o[i]=i;else for(i=0;i<r;i++)o[i]=r-1-i;var u=r,c=2*u;for(i=u-1;u>2;){if(c--<=0)return n;var f=i;u<=f&&(f=0),u<=(i=f+1)&&(i=0);var s=i+1;if(u<=s&&(s=0),a(t,f,i,s,u,o)){n.push(o[f]),n.push(o[i]),n.push(o[s]);for(var l=i,d=i+1;d<u;l++,d++)o[l]=o[d];c=2*--u}}return n};var e=function(t){for(var n=0,r=t.length-1,e=0;e<t.length;r=e++)n+=t[r][0]*t[e][1]-t[e][0]*t[r][1];return n/2},o=function(t,n,r,e){var o=r[0]-n[0],a=r[1]-n[1],i=t[0]-r[0],u=t[1]-r[1],c=n[0]-t[0],f=n[1]-t[1],s=e[0]-t[0],l=e[1]-t[1],d=e[0]-n[0],v=e[1]-n[1],h=e[0]-r[0],p=e[1]-r[1];return o*v-a*d>=0&&i*p-u*h>=0&&c*l-f*s>=0},a=function(t,n,r,e,a,i){var u=t[i[n]],c=t[i[r]],f=t[i[e]];if((c[0]-u[0])*(f[1]-u[1])-(c[1]-u[1])*(f[0]-u[0])<1e-7)return!1;for(var s=0;s<a;s++)if(s!=n&&s!=r&&s!=e){var l=t[i[s]];if(o(u,c,f,l))return!1}return!0}},function(t,n,r){var e=r(61);t.exports=function(t){return null!=t&&t.length?e(t,1):[]}},function(t,n,r){var e=r(19),o=r(62);t.exports=function t(n,r,a,i,u){var c=-1,f=n.length;for(a||(a=o),u||(u=[]);++c<f;){var s=n[c];r>0&&a(s)?r>1?t(s,r-1,a,i,u):e(u,s):i||(u[u.length]=s)}return u}},function(t,n,r){var e=r(6),o=r(37),a=r(8),i=e?e.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||o(t)||!!(i&&t&&t[i])}},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){var e=r(7),o=r(3),a="[object Arguments]";t.exports=function(t){return o(t)&&e(t)==a}},function(t,n,r){var e=r(6),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,u=e?e.toStringTag:void 0;t.exports=function(t){var n=a.call(t,u),r=t[u];try{t[u]=void 0;var e=!0}catch(t){}var o=i.call(t);return e&&(n?t[u]=r:delete t[u]),o}},function(t,n){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,n){t.exports="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = texture2D(u_tex, v_uv);\r\n    }\r\n\r\n#endif\r\n"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform mat4 u_model;\r\nuniform mat4 u_mvp;\r\nuniform sampler2D u_depth;\r\nuniform sampler2D u_normal;\r\nuniform sampler2D u_normalRocks;\r\nuniform float u_time;\r\nuniform vec3 u_shipWorldPos;\r\n\r\nvarying vec2 v_uv;\r\nvarying vec4 v_worldPos;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        v_uv = i_position*0.5 + 0.5;\r\n        v_worldPos = u_model * vec4(i_position, 0, 1);\r\n        gl_Position = u_mvp * vec4(i_position, 0, 1);\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    #define BASE_RADIUS 0.25\r\n    #define FADE_RADIUS 2.75\r\n\r\n    mat3 axisAngle(vec3 normalizedAxis, float angle)\r\n    {\r\n        float x = normalizedAxis.x;\r\n        float y = normalizedAxis.y;\r\n        float z = normalizedAxis.z;\r\n        float s = sin(angle);\r\n        float c = cos(angle);\r\n        float t = 1. - c;\r\n\r\n        return mat3(\r\n            t*x*x + c   , t*x*y - z*s , t*x*z + y*s ,\r\n            t*x*y + z*s , t*y*y + c   , t*y*z - x*s ,\r\n            t*x*z - y*s , t*y*z + x*s , t*z*z + c\r\n        );\r\n    }\r\n\r\n    float ptLightAmount(vec2 pos, vec2 normal)\r\n    {\r\n        vec2 toPtLight = pos - u_shipWorldPos.xy;\r\n        float intensity = clamp((1. + BASE_RADIUS) - length(toPtLight) / FADE_RADIUS, 0., 1.);\r\n        float reflectedLight = clamp(dot(normalize(toPtLight), normal), 0., 1.);\r\n        return intensity * reflectedLight;\r\n    }\r\n\r\n    void main()\r\n    {\r\n        float sint = 1.;//0.5+0.5*sin(u_time/500.);\r\n\r\n        vec2 surfDir = 2.*texture2D(u_normal, v_uv).rg - 1.;\r\n        float surfDepth = clamp(1.- texture2D(u_depth, v_uv).r, 0., 1.);\r\n        surfDepth *= surfDepth;\r\n\r\n        vec2 uv1 = v_uv - sint*surfDir*asin(surfDepth*0.05);\r\n        vec2 lookup = uv1;\r\n        lookup.x = 1. - lookup.x;\r\n        lookup.y = 1. - lookup.y;\r\n        vec2 normalRocks2d = 2.*texture2D(u_normalRocks, 5.*lookup).rg - 1.;\r\n        normalRocks2d *= -1.;\r\n        vec3 normalRocks = normalize(vec3(normalRocks2d, 1. - length(normalRocks2d)));\r\n        normalRocks = axisAngle(normalize(vec3(surfDir.y, -surfDir.x, 0)), sint*3.14159*surfDepth) * normalRocks;\r\n\r\n        vec3 baseColor = vec3(1,1,1) * ptLightAmount(v_worldPos.xy, normalRocks.xy);\r\n        gl_FragColor = vec4(mix(baseColor, vec3(0), 1.-sqrt(surfDepth)), 1);\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform sampler2D u_depth;\r\nuniform sampler2D u_normal;\r\nuniform sampler2D u_normalRocks;\r\nuniform mat4 u_perspective;\r\nuniform float u_time;\r\nuniform float u_zoom;\r\nuniform vec2 u_pointLightPos;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        vec2 pospos = i_position - (2.*u_pointLightPos-1.)*(1. - u_zoom);\r\n        gl_Position = u_perspective * vec4(pospos, -u_zoom, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    mat3 axisAngle(vec3 normalizedAxis, float angle)\r\n    {\r\n        float x = normalizedAxis.x;\r\n        float y = normalizedAxis.y;\r\n        float z = normalizedAxis.z;\r\n        float s = sin(angle);\r\n        float c = cos(angle);\r\n        float t = 1. - c;\r\n\r\n        return mat3(\r\n            t*x*x + c   , t*x*y - z*s , t*x*z + y*s ,\r\n            t*x*y + z*s , t*y*y + c   , t*y*z - x*s ,\r\n            t*x*z - y*s , t*y*z + x*s , t*z*z + c\r\n        );\r\n    }\r\n\r\n    float ptLightAmount(vec2 uv, vec2 normal)\r\n    {\r\n        vec2 toPtLight = uv - u_pointLightPos;\r\n        float ptLightIntensity = 1.6 + .4 * sin(u_time/100.);\r\n        float LightAmount = clamp(dot(normalize(toPtLight), normal), 0., 1.);\r\n        float distToPtLight = 20. * length(toPtLight);\r\n        LightAmount *= ptLightIntensity / max(1., distToPtLight * distToPtLight);\r\n        return LightAmount;\r\n    }\r\n\r\n    float dirLightAmount(vec2 dir, vec2 normal)\r\n    {\r\n        return clamp(dot(normalize(dir), normal), 0., 1.);\r\n    }\r\n\r\n    void main()\r\n    {\r\n        float sint = 1.;//0.5+0.5*sin(u_time/500.);\r\n\r\n        vec2 surfDir = 2.*texture2D(u_normal, v_uv).rg - 1.;\r\n        float surfDepth = clamp(1.- texture2D(u_depth, v_uv).r, 0., 1.);\r\n        surfDepth *= surfDepth;\r\n\r\n        vec2 uv1 = v_uv - sint*surfDir*asin(surfDepth*0.05);\r\n        vec2 lookup = uv1;\r\n        lookup.x = 1. - lookup.x;\r\n        lookup.y = 1. - lookup.y;\r\n        vec2 normalRocks2d = 2.*texture2D(u_normalRocks, 5.*lookup).rg - 1.;\r\n        normalRocks2d *= -1.;\r\n        vec3 normalRocks = normalize(vec3(normalRocks2d, 1. - length(normalRocks2d)));\r\n\r\n        normalRocks = axisAngle(normalize(vec3(surfDir.y, -surfDir.x, 0)), sint*3.14159*surfDepth) * normalRocks;\r\n\r\n        vec3 baseColor = vec3(0,0,0);\r\n\r\n        // Point light\r\n        baseColor += vec3(1,1,1) * ptLightAmount(v_uv, normalRocks.xy);\r\n\r\n        // Dir lights\r\n        baseColor += vec3(1,.2,.1) * dirLightAmount(vec2(1,-.5), normalRocks.xy);\r\n        baseColor += vec3(.2,1,.1) * dirLightAmount(vec2(0,1), normalRocks.xy);\r\n        baseColor += vec3(.5,.5,1) * dirLightAmount(vec2(-1,-.5), normalRocks.xy);\r\n\r\n        gl_FragColor = mix(vec4(baseColor, 1), vec4(0,0,0,1), 1.-sqrt(surfDepth));\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = vec4(1, 1, 1, 1);\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform vec2 u_resolution;\r\nuniform vec2 u_direction;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    vec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction)\r\n    {\r\n        vec4 color = vec4(0.0);\r\n        vec2 off1 = vec2(1.411764705882353) * direction;\r\n        vec2 off2 = vec2(3.2941176470588234) * direction;\r\n        vec2 off3 = vec2(5.176470588235294) * direction;\r\n        color += texture2D(image, uv) * 0.1964825501511404;\r\n        color += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\r\n        color += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\r\n        color += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\r\n        color += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\r\n        color += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\r\n        color += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\r\n        return color;\r\n    }\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = blur13(u_tex, v_uv, u_resolution, u_direction);\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform vec2 u_resolution;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    float snoise(vec3 v);\r\n    #define PI 3.14159265358979\r\n\r\n    float noiseHeight( vec2 pos, float t )\r\n    {\r\n        pos *= 15.;\r\n        float val = 0.\r\n            + 1.00 * snoise(vec3( 1.*(pos),     t*1.))\r\n            + .500 * snoise(vec3( 2.*(pos), 10.+t*2.))\r\n            + .250 * snoise(vec3( 4.*(pos), 20.+t*4.))\r\n            + .125 * snoise(vec3( 8.*(pos), 30.+t*8.))\r\n            + .0625* snoise(vec3(16.*(pos), 40.+t*16.))\r\n        ;\r\n        float maxValue = 1. + 0.5; // + 0.25 + 0.125 + 0.0625;\r\n\r\n        float normVal = 0.5 + 0.5 * val / maxValue;\r\n        return normVal;\r\n    }\r\n\r\n    void mainImage2( out vec4 fragColor, in vec2 fragCoord )\r\n    {\r\n        vec2 pt = fragCoord / u_resolution.xx;\r\n        float t = 0.; \r\n        float normVal = noiseHeight(pt, t);\r\n        fragColor = vec4(normVal);\r\n    }\r\n\r\n    // =======================================================================================\r\n\r\n    vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\r\n    vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\r\n    float snoise(vec3 v){\r\n      const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\r\n      const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\r\n      vec3 i  = floor(v + dot(v, C.yyy) );\r\n      vec3 x0 =   v - i + dot(i, C.xxx) ;\r\n      vec3 g = step(x0.yzx, x0.xyz);\r\n      vec3 l = 1.0 - g;\r\n      vec3 i1 = min( g.xyz, l.zxy );\r\n      vec3 i2 = max( g.xyz, l.zxy );\r\n      vec3 x1 = x0 - i1 + 1.0 * C.xxx;\r\n      vec3 x2 = x0 - i2 + 2.0 * C.xxx;\r\n      vec3 x3 = x0 - 1. + 3.0 * C.xxx;\r\n      i = mod(i, 289.0 );\r\n      vec4 p = permute( permute( permute(\r\n                 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\r\n               + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\r\n               + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\r\n      float n_ = 1.0/7.0; // N=7\r\n      vec3  ns = n_ * D.wyz - D.xzx;\r\n      vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\r\n      vec4 x_ = floor(j * ns.z);\r\n      vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\r\n      vec4 x = x_ *ns.x + ns.yyyy;\r\n      vec4 y = y_ *ns.x + ns.yyyy;\r\n      vec4 h = 1.0 - abs(x) - abs(y);\r\n      vec4 b0 = vec4( x.xy, y.xy );\r\n      vec4 b1 = vec4( x.zw, y.zw );\r\n      vec4 s0 = floor(b0)*2.0 + 1.0;\r\n      vec4 s1 = floor(b1)*2.0 + 1.0;\r\n      vec4 sh = -step(h, vec4(0.0));\r\n      vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\r\n      vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\r\n      vec3 p0 = vec3(a0.xy,h.x);\r\n      vec3 p1 = vec3(a0.zw,h.y);\r\n      vec3 p2 = vec3(a1.xy,h.z);\r\n      vec3 p3 = vec3(a1.zw,h.w);\r\n      vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\r\n      p0 *= norm.x;\r\n      p1 *= norm.y;\r\n      p2 *= norm.z;\r\n      p3 *= norm.w;\r\n      vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\r\n      m = m * m;\r\n      return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\r\n                                    dot(p2,x2), dot(p3,x3) ) );\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    vec2 hash2( vec2 p )\r\n    {\r\n        p = mod(p, 8.);\r\n        return fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\r\n    }\r\n\r\n    vec3 voronoi( in vec2 x )\r\n    {\r\n        vec2 n = floor(x);\r\n        vec2 f = fract(x);\r\n\r\n        //----------------------------------\r\n        // first pass: regular voronoi\r\n        //----------------------------------\r\n        vec2 mg, mr;\r\n\r\n        float md = 8.0;\r\n        for( int j=-1; j<=1; j++ )\r\n        for( int i=-1; i<=1; i++ )\r\n        {\r\n            vec2 g = vec2(float(i),float(j));\r\n            vec2 o = hash2( n + g );\r\n            vec2 r = g + o - f;\r\n            float d = dot(r,r);\r\n\r\n            if( d<md )\r\n            {\r\n                md = d;\r\n                mr = r;\r\n                mg = g;\r\n            }\r\n        }\r\n\r\n        //----------------------------------\r\n        // second pass: distance to borders\r\n        //----------------------------------\r\n        md = 8.0;\r\n        for( int j=-2; j<=2; j++ )\r\n        for( int i=-2; i<=2; i++ )\r\n        {\r\n            vec2 g = mg + vec2(float(i),float(j));\r\n            vec2 o = hash2( n + g );\r\n            vec2 r = g + o - f;\r\n\r\n            if( dot(mr-r,mr-r)>0.00001 )\r\n            md = min( md, dot( 0.5*(mr+r), normalize(r-mr) ) );\r\n        }\r\n\r\n        return vec3( md, mr );\r\n    }\r\n\r\n    float rocksHeight( vec2 pt, float scale )\r\n    {\r\n        return voronoi( scale*8.0*pt ).r;\r\n    }\r\n\r\n    float rocksCombo( vec2 pt )\r\n    {\r\n        float noiseHeight = 0.; // noiseHeight( 3.*pt, 0. );\r\n        float base = rocksHeight( pt, 1. );\r\n        float smol = rocksHeight( pt.yx + vec2(1.1,1.11), 2. );\r\n        return .7 * (base + .5*smol + .2*noiseHeight);\r\n    }\r\n\r\n    vec3 rocksNormal( vec2 pt )\r\n    {\r\n        vec2 dx = vec2(.1,0) / 500.;\r\n        vec2 dy = vec2(0,.1) / 500.;\r\n\r\n        float c  = rocksCombo( pt );\r\n        float cx = rocksCombo( pt+dx );\r\n        float cy = rocksCombo( pt+dy );\r\n\r\n        vec2 de = vec2(cx-c, cy-c);\r\n        de.y *= -1.;\r\n        de *= 120.;\r\n\r\n        return vec3(de, 1. - length(de));\r\n    }\r\n\r\n    vec3 noiseNormal( vec3 rocksNorm, vec2 pt )\r\n    {\r\n        vec2 dx = vec2(.1,0) / 500.;\r\n        vec2 dy = vec2(0,.1) / 500.;\r\n\r\n        pt += 2. * rocksNorm.xy * length(pt);\r\n\r\n        float c  = noiseHeight( pt ,0.);\r\n        float cx = noiseHeight( pt+dx ,0.);\r\n        float cy = noiseHeight( pt+dy ,0.);\r\n\r\n        vec2 de = vec2(cx-c, cy-c);\r\n        de.y *= -1.;\r\n        de *= 240.;\r\n\r\n        return vec3(de, 1. - length(de));\r\n\r\n        return rocksNorm;\r\n    }\r\n\r\n    vec3 normalToColor(vec3 normal)\r\n    {\r\n        return 0.5*normal + 0.5;\r\n    }\r\n\r\n    void main()\r\n    {\r\n        vec2 pt = v_uv * u_resolution / u_resolution.yy;\r\n        float heightMap = rocksCombo(pt);\r\n\r\n        vec3 normal = rocksNormal(pt);\r\n        vec3 noiseNorm = .05*noiseNormal(normal, pt);\r\n        vec3 combinedNorm = normalize(vec3(normal.xy + noiseNorm.xy, normal.z));\r\n        vec3 normalColor = normalToColor(combinedNorm);\r\n\r\n        gl_FragColor = vec4(normalColor, 1);\r\n    }\r\n\r\n#endif\r\n\r\n"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform vec2 u_resolution;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(i_position, 0, 1);\r\n        v_uv = i_position.xy*0.5 + 0.5;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    vec2 sampleTap(vec4 tap, vec2 dir)\r\n    {\r\n        dir /= u_resolution;\r\n        vec4 outTap = texture2D(u_tex, v_uv + dir);\r\n        return (outTap - tap).r * dir;\r\n    }\r\n\r\n    void main()\r\n    {\r\n        vec4 tap = texture2D(u_tex, v_uv);\r\n\r\n        vec2 dir = normalize(\r\n              sampleTap(tap, vec2( 1.5, 0.))\r\n            + sampleTap(tap, vec2(-1.5, 0.))\r\n            + sampleTap(tap, vec2(0., -1.5))\r\n            + sampleTap(tap, vec2(0.,  1.5))\r\n            + sampleTap(tap, vec2( 1.5,  1.5))\r\n            + sampleTap(tap, vec2( 1.5, -1.5))\r\n            + sampleTap(tap, vec2(-1.5, -1.5))\r\n            + sampleTap(tap, vec2(-1.5,  1.5))\r\n        );\r\n\r\n        gl_FragColor = vec4(dir*0.5+0.5, 1, 1);\r\n    }\r\n\r\n#endif"},function(t,n){t.exports="precision highp float;\r\n\r\nuniform mat4 u_mvp;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 i_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(i_position, 0, 1);\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = vec4(0.4, 0.4, 0.4, 1);\r\n    }\r\n\r\n#endif\r\n"},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(38),o=r(20),a=r(9),i=function(){function t(t,n,r){this.gl=t,this.width=n,this.height=r,this.bufferRenderer=new o.BufferRenderer(t,a.getShaders(t).gaussianBlur),this.frameTex0=new e.FrameBufferTexture(t,n,r),this.frameTex1=new e.FrameBufferTexture(t,n,r)}return t.prototype.run=function(t,n){var r=this,e=this.gl;n<1&&(n=1);for(var o=0;o<n;++o)e.bindFramebuffer(e.FRAMEBUFFER,this.frameTex0.framebuffer),0===o&&e.viewport(0,0,this.width,this.height),this.bufferRenderer.draw(0===o?t:this.frameTex1.texture,function(t,n){t.uniform2f(t.getUniformLocation(n,"u_resolution"),r.width,r.height),t.uniform2f(t.getUniformLocation(n,"u_direction"),1,0)}),e.bindFramebuffer(e.FRAMEBUFFER,this.frameTex1.framebuffer),this.bufferRenderer.draw(this.frameTex0.texture,function(t,n){t.uniform2f(t.getUniformLocation(n,"u_resolution"),r.width,r.height),t.uniform2f(t.getUniformLocation(n,"u_direction"),0,1)})},Object.defineProperty(t.prototype,"resultTexture",{get:function(){return this.frameTex1.texture},enumerable:!0,configurable:!0}),t.prototype.release=function(){this.bufferRenderer.release(),this.frameTex0.release(),this.frameTex1.release()},t.prototype.releaseTexture=function(){return this.bufferRenderer.release(),this.frameTex0.release(),this.frameTex1.releaseTexture()},t}();n.GaussianBlur=i},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(12),o=r(77),a=r(145),i=r(22);n.initGame=function(){void 0===window.io?console.log("Socket.io not available."):console.log("Socket.io found!");var t=document.getElementById("game-canvas"),n=document.getElementById("game-span"),r=new e.LocalNetwork(i.serverPacketSerializer,i.clientPacketSerializer),u=r.createClient(),c=new o.GameServer(r.server),f=new a.GameClient(t,n,u,1338);c.notifyClientConnect(u.id);var s=function(){t.width=window.innerWidth,t.height=window.innerHeight,f.notifyCanvasResize()};window.addEventListener("resize",s),s()},n.initLocalMultiGame=function(){var t=document.getElementById("canvas-0"),n=document.getElementById("span-0"),r=document.getElementById("canvas-1"),u=document.getElementById("span-1"),c=new e.LocalNetwork(i.serverPacketSerializer,i.clientPacketSerializer),f=new o.GameServer(c.server),s=function(t,n,r){return setTimeout(function(){var r=c.createClient();new a.GameClient(t,n,r,1338),f.notifyClientConnect(r.id)},r)};s(t,n,500),s(r,u,1e3)}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(12),o=r(22),a=function(){function t(t){this.net=t,this.tickIntervalID=setInterval(this.tick.bind(this),e.TICK_LENGTH_MS),this.state=o.GameState.create(),this.latestPlayerInputs={}}return t.prototype.tick=function(){for(var t=this.net.receiveAllPackets(),n=0;n<t.length;++n){var r=t[n];this.latestPlayerInputs[r.senderId]=r.packet}this.state=o.GameState.step(this.state,this.latestPlayerInputs),this.net.sendPacket(this.state)},t.prototype.notifyClientConnect=function(t){this.state.players[t]=o.PlayerState.create()},t.prototype.notifyClientDisconnect=function(t){delete this.state.players[t]},t.prototype.release=function(){clearInterval(this.tickIntervalID)},t}();n.GameServer=a},function(t,n,r){var e=r(79),o=1,a=4;t.exports=function(t){return e(t,o|a)}},function(t,n,r){var e=r(80),o=r(108),a=r(43),i=r(110),u=r(118),c=r(121),f=r(122),s=r(123),l=r(125),d=r(126),v=r(127),h=r(30),p=r(132),m=r(133),M=r(139),b=r(8),x=r(46),g=r(141),y=r(4),_=r(143),R=r(24),E=1,w=2,A=4,T="[object Arguments]",S="[object Function]",P="[object GeneratorFunction]",j="[object Object]",B={};B[T]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object DataView]"]=B["[object Boolean]"]=B["[object Date]"]=B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Map]"]=B["[object Number]"]=B[j]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object Symbol]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Error]"]=B[S]=B["[object WeakMap]"]=!1,t.exports=function t(n,r,F,I,D,k){var C,U=r&E,L=r&w,O=r&A;if(F&&(C=D?F(n,I,D,k):F(n)),void 0!==C)return C;if(!y(n))return n;var z=b(n);if(z){if(C=p(n),!U)return f(n,C)}else{var G=h(n),q=G==S||G==P;if(x(n))return c(n,U);if(G==j||G==T||q&&!D){if(C=L||q?{}:M(n),!U)return L?l(n,u(C,n)):s(n,i(C,n))}else{if(!B[G])return D?n:{};C=m(n,G,U)}}k||(k=new e);var N=k.get(n);if(N)return N;if(k.set(n,C),_(n))return n.forEach(function(e){C.add(t(e,r,F,e,n,k))}),C;if(g(n))return n.forEach(function(e,o){C.set(o,t(e,r,F,o,n,k))}),C;var V=O?L?v:d:L?keysIn:R,X=z?void 0:V(n);return o(X||n,function(e,o){X&&(e=n[o=e]),a(C,o,t(e,r,F,o,n,k))}),C}},function(t,n,r){var e=r(13),o=r(86),a=r(87),i=r(88),u=r(89),c=r(90);function f(t){var n=this.__data__=new e(t);this.size=n.size}f.prototype.clear=o,f.prototype.delete=a,f.prototype.get=i,f.prototype.has=u,f.prototype.set=c,t.exports=f},function(t,n){t.exports=function(){this.__data__=[],this.size=0}},function(t,n,r){var e=r(14),o=Array.prototype.splice;t.exports=function(t){var n=this.__data__,r=e(n,t);return!(r<0||(r==n.length-1?n.pop():o.call(n,r,1),--this.size,0))}},function(t,n,r){var e=r(14);t.exports=function(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]}},function(t,n,r){var e=r(14);t.exports=function(t){return e(this.__data__,t)>-1}},function(t,n,r){var e=r(14);t.exports=function(t,n){var r=this.__data__,o=e(r,t);return o<0?(++this.size,r.push([t,n])):r[o][1]=n,this}},function(t,n,r){var e=r(13);t.exports=function(){this.__data__=new e,this.size=0}},function(t,n){t.exports=function(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}},function(t,n){t.exports=function(t){return this.__data__.get(t)}},function(t,n){t.exports=function(t){return this.__data__.has(t)}},function(t,n,r){var e=r(13),o=r(23),a=r(95),i=200;t.exports=function(t,n){var r=this.__data__;if(r instanceof e){var u=r.__data__;if(!o||u.length<i-1)return u.push([t,n]),this.size=++r.size,this;r=this.__data__=new a(u)}return r.set(t,n),this.size=r.size,this}},function(t,n,r){var e=r(41),o=r(92),a=r(4),i=r(42),u=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,s=c.toString,l=f.hasOwnProperty,d=RegExp("^"+s.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||o(t))&&(e(t)?d:u).test(i(t))}},function(t,n,r){var e,o=r(93),a=(e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";t.exports=function(t){return!!a&&a in t}},function(t,n,r){var e=r(1)["__core-js_shared__"];t.exports=e},function(t,n){t.exports=function(t,n){return null==t?void 0:t[n]}},function(t,n,r){var e=r(96),o=r(103),a=r(105),i=r(106),u=r(107);function c(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}c.prototype.clear=e,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=u,t.exports=c},function(t,n,r){var e=r(97),o=r(13),a=r(23);t.exports=function(){this.size=0,this.__data__={hash:new e,map:new(a||o),string:new e}}},function(t,n,r){var e=r(98),o=r(99),a=r(100),i=r(101),u=r(102);function c(t){var n=-1,r=null==t?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}c.prototype.clear=e,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=u,t.exports=c},function(t,n,r){var e=r(15);t.exports=function(){this.__data__=e?e(null):{},this.size=0}},function(t,n){t.exports=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}},function(t,n,r){var e=r(15),o="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;t.exports=function(t){var n=this.__data__;if(e){var r=n[t];return r===o?void 0:r}return a.call(n,t)?n[t]:void 0}},function(t,n,r){var e=r(15),o=Object.prototype.hasOwnProperty;t.exports=function(t){var n=this.__data__;return e?void 0!==n[t]:o.call(n,t)}},function(t,n,r){var e=r(15),o="__lodash_hash_undefined__";t.exports=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=e&&void 0===n?o:n,this}},function(t,n,r){var e=r(16);t.exports=function(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n}},function(t,n){t.exports=function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}},function(t,n,r){var e=r(16);t.exports=function(t){return e(this,t).get(t)}},function(t,n,r){var e=r(16);t.exports=function(t){return e(this,t).has(t)}},function(t,n,r){var e=r(16);t.exports=function(t,n){var r=e(this,t),o=r.size;return r.set(t,n),this.size+=r.size==o?0:1,this}},function(t,n){t.exports=function(t,n){for(var r=-1,e=null==t?0:t.length;++r<e&&!1!==n(t[r],r,t););return t}},function(t,n,r){var e=r(2),o=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,n,r){var e=r(17),o=r(24);t.exports=function(t,n){return t&&e(n,o(n),t)}},function(t,n){t.exports=function(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}},function(t,n){t.exports=function(){return!1}},function(t,n){var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var o=typeof t;return!!(n=null==n?r:n)&&("number"==o||"symbol"!=o&&e.test(t))&&t>-1&&t%1==0&&t<n}},function(t,n,r){var e=r(115),o=r(26),a=r(27),i=a&&a.isTypedArray,u=i?o(i):e;t.exports=u},function(t,n,r){var e=r(7),o=r(47),a=r(3),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&o(t.length)&&!!i[e(t)]}},function(t,n,r){var e=r(28),o=r(117),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!e(t))return o(t);var n=[];for(var r in Object(t))a.call(t,r)&&"constructor"!=r&&n.push(r);return n}},function(t,n,r){var e=r(48)(Object.keys,Object);t.exports=e},function(t,n,r){var e=r(17),o=r(50);t.exports=function(t,n){return t&&e(n,o(n),t)}},function(t,n,r){var e=r(4),o=r(28),a=r(120),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!e(t))return a(t);var n=o(t),r=[];for(var u in t)("constructor"!=u||!n&&i.call(t,u))&&r.push(u);return r}},function(t,n){t.exports=function(t){var n=[];if(null!=t)for(var r in Object(t))n.push(r);return n}},function(t,n,r){(function(t){var e=r(1),o=n&&!n.nodeType&&n,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,i=a&&a.exports===o?e.Buffer:void 0,u=i?i.allocUnsafe:void 0;t.exports=function(t,n){if(n)return t.slice();var r=t.length,e=u?u(r):new t.constructor(r);return t.copy(e),e}}).call(this,r(25)(t))},function(t,n){t.exports=function(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n}},function(t,n,r){var e=r(17),o=r(29);t.exports=function(t,n){return e(t,o(t),n)}},function(t,n){t.exports=function(t,n){for(var r=-1,e=null==t?0:t.length,o=0,a=[];++r<e;){var i=t[r];n(i,r,t)&&(a[o++]=i)}return a}},function(t,n,r){var e=r(17),o=r(52);t.exports=function(t,n){return e(t,o(t),n)}},function(t,n,r){var e=r(54),o=r(29),a=r(24);t.exports=function(t){return e(t,a,o)}},function(t,n,r){var e=r(54),o=r(52),a=r(50);t.exports=function(t){return e(t,a,o)}},function(t,n,r){var e=r(2)(r(1),"DataView");t.exports=e},function(t,n,r){var e=r(2)(r(1),"Promise");t.exports=e},function(t,n,r){var e=r(2)(r(1),"Set");t.exports=e},function(t,n,r){var e=r(2)(r(1),"WeakMap");t.exports=e},function(t,n){var r=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&r.call(t,"index")&&(e.index=t.index,e.input=t.input),e}},function(t,n,r){var e=r(31),o=r(135),a=r(136),i=r(137),u=r(138),c="[object Boolean]",f="[object Date]",s="[object Map]",l="[object Number]",d="[object RegExp]",v="[object Set]",h="[object String]",p="[object Symbol]",m="[object ArrayBuffer]",M="[object DataView]",b="[object Float32Array]",x="[object Float64Array]",g="[object Int8Array]",y="[object Int16Array]",_="[object Int32Array]",R="[object Uint8Array]",E="[object Uint8ClampedArray]",w="[object Uint16Array]",A="[object Uint32Array]";t.exports=function(t,n,r){var T=t.constructor;switch(n){case m:return e(t);case c:case f:return new T(+t);case M:return o(t,r);case b:case x:case g:case y:case _:case R:case E:case w:case A:return u(t,r);case s:return new T;case l:case h:return new T(t);case d:return a(t);case v:return new T;case p:return i(t)}}},function(t,n,r){var e=r(1).Uint8Array;t.exports=e},function(t,n,r){var e=r(31);t.exports=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},function(t,n){var r=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}},function(t,n,r){var e=r(6),o=e?e.prototype:void 0,a=o?o.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},function(t,n,r){var e=r(31);t.exports=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},function(t,n,r){var e=r(140),o=r(53),a=r(28);t.exports=function(t){return"function"!=typeof t.constructor||a(t)?{}:e(o(t))}},function(t,n,r){var e=r(4),o=Object.create,a=function(){function t(){}return function(n){if(!e(n))return{};if(o)return o(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}();t.exports=a},function(t,n,r){var e=r(142),o=r(26),a=r(27),i=a&&a.isMap,u=i?o(i):e;t.exports=u},function(t,n,r){var e=r(30),o=r(3),a="[object Map]";t.exports=function(t){return o(t)&&e(t)==a}},function(t,n,r){var e=r(144),o=r(26),a=r(27),i=a&&a.isSet,u=i?o(i):e;t.exports=u},function(t,n,r){var e=r(30),o=r(3),a="[object Set]";t.exports=function(t){return o(t)&&e(t)==a}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(12),o=r(22),a=r(146),i=r(32),u=r(39),c=r(148),f=r(0),s=r(10),l=r(150),d=f.vec3.create(),v=function(t){return Promise.all([u.loadTexture(t,"caveWalls.png",t.REPEAT)]).then(function(t){return{caveTexture:t[0]}})},h=function(){function t(t,n,r,e){var u=this,f=t.getContext("webgl"),s=i.generateCave(e);this.gl=f,this.span=n,this.net=r,this.inputGrabber=new c.InputGrabber(t),this.running=!1,this.inputStack=[],this.prevState=o.GameState.create(),this.curState=o.GameState.create(),v(f).then(function(t){u.gameRenderer=new a.GameRenderer(f,s,t.caveTexture),u.runUpdateLoop()})}return t.prototype.runUpdateLoop=function(){var t=this;this.running=!0;var n=function(){t.mainLoop(),t.running?requestAnimationFrame(n):t.stoppedRunning()};this.lastUpdateTime=Date.now(),this.tickAccumulator=0,this.renderAccumulator=0,n()},t.prototype.mainLoop=function(){var t=Date.now(),n=t-this.lastUpdateTime;this.lastUpdateTime=t,this.tickAccumulator+=n,this.renderAccumulator+=n;var r=this.net.receivePacket();if(r&&this.receiveStateFromServer(r.packet),this.curState.players[this.net.id]){for(;this.tickAccumulator>=e.TICK_LENGTH_MS;){this.tickAccumulator-=e.TICK_LENGTH_MS;var a=this.readInputs(this.curState.tick);this.prevState=this.curState,this.curState=o.GameState.predict(this.curState,a,this.net.id),this.inputStack.push(a),this.renderAccumulator=0,this.inputStack.length>100&&this.inputStack.splice(0,1),this.net.sendPacket(a)}this.render()}},t.prototype.render=function(){this.gameRenderer.draw(this.curState,this.net.id);var t=o.GameState.lerp(this.prevState,this.curState,this.renderAccumulator/e.TICK_LENGTH_MS);this.gameRenderer.draw(t,this.net.id)},t.prototype.receiveStateFromServer=function(t){if(t.players[this.net.id]){for(var n=this.inputStack.length;--n>=0&&t.players[this.net.id].lastInputUID!==this.inputStack[n].uid;);if(this.prevState=this.curState,this.curState=t,this.renderAccumulator=0,n>=0)for(var r=n+1;r<this.inputStack.length;++r)this.prevState=this.curState,this.curState=o.GameState.predict(this.curState,this.inputStack[r],this.net.id)}},t.prototype.readInputs=function(t){return s.Camera.screenPointToWorldXYPlanePoint(this.gameRenderer.camera,this.inputGrabber.mouseScreenPoint,d),{tick:t,uid:l.generateUID(),pressing:this.inputGrabber.mouseDown,mouseWorldPos:f.vec2.fromValues(d[0],d[1])}},t.prototype.stoppedRunning=function(){this.gameRenderer.release(),this.inputGrabber.release(),this.gl.getExtension("WEBGL_lose_context").loseContext(),this.onStoppedRunningCallback&&this.onStoppedRunningCallback()},t.prototype.notifyCanvasResize=function(){this.gameRenderer&&this.gameRenderer.notifyCanvasResize()},t.prototype.release=function(t){this.onStoppedRunningCallback=t,this.running=!1},t}();n.GameClient=h},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(35),o=r(147),a=r(10),i=r(21),u=r(0),c=i.Transform.create(),f=function(){function t(t,n,r){this.gl=t,this.caveRenderer=new e.CaveRenderer(t,n,r),this.shipRenderer=new o.ShipRenderer(t),this._camera=a.Camera.create(),this._camera.transform.position[2]=5,t.clearColor(0,0,0,1),this.notifyCanvasResize()}return Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),t.prototype.draw=function(t,n){var r=this.gl;for(var e in r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),t.players){var o=t.players[e];c.position[0]=o.position[0],c.position[1]=o.position[1],e===n&&this.caveRenderer.draw(this._camera,c.position),u.quat.fromEuler(c.rotation,0,0,180/Math.PI*o.angle),this.shipRenderer.draw(this._camera,c)}},t.prototype.notifyCanvasResize=function(){var t=this.gl;t.viewport(0,0,t.canvas.width,t.canvas.height),a.Camera.updateAspectRatio(this._camera,t.canvas.width,t.canvas.height)},t.prototype.release=function(){this.caveRenderer.release(),this.shipRenderer.release()},t}();n.GameRenderer=f},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(0),o=r(9),a=r(21),i=r(10),u=e.mat4.create(),c=e.mat4.create(),f=[.2492,0,.1102,-.0237,.1333,-.081,.04749999,-.0506,.0031,-.0564,-.0337,-.1155,-.003200002,-.1747,-.09190001,-.149,-.1102,-.084,-.158,-.0931,-.158,-.0332,-.1347,0,-.158,.0332,-.158,.0931,-.1102,.084,-.09190001,.149,-.003200002,.1747,-.0337,.1155,.0031,.0564,.04749999,.0506,.1333,.081,.1102,.0237],s=[1,0,11,3,1,11,4,3,11,5,4,11,8,5,11,9,8,11,10,9,11,2,1,3,6,5,7,7,5,8,21,11,0,19,11,21,18,11,19,17,11,18,14,11,17,13,11,14,12,11,13,20,19,21,15,14,17,16,15,17],l=function(){function t(t){this.gl=t,this.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(f),t.STATIC_DRAW),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW)}return t.prototype.draw=function(t,n){var r=this.gl,f=o.getShaders(r).ship;r.useProgram(f),a.Transform.toMatrix(n,u),i.Camera.getViewMatrix(t,c),e.mat4.mul(u,c,u),i.Camera.getProjectionMatrix(t,c),e.mat4.mul(u,c,u),r.uniformMatrix4fv(r.getUniformLocation(f,"u_mvp"),!1,u),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer);var l=r.getAttribLocation(f,"i_position");r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.drawElements(r.TRIANGLES,s.length,r.UNSIGNED_SHORT,0)},t.prototype.release=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();n.ShipRenderer=l},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(0),o=r(149),a=function(){function t(t){this.eventBinder=new o.EventBinder(this),this.canvas=t,this._mouseDown=!1,this.mouseScreenPoint=e.vec2.create(),this.canvasBoundingRect={left:0,top:0},this.eventBinder.bind(t,"mousemove",this.onMouseMove),this.eventBinder.bind(t,"mousedown",this.onMouseDown),this.eventBinder.bind(t,"mouseup",this.onMouseButtonNegative),this.eventBinder.bind(t,"mouseout",this.onMouseButtonNegative),this.eventBinder.bind(t,"mouseleave",this.onMouseButtonNegative),this.eventBinder.bind(window,"scroll",this.onWindowChange),this.eventBinder.bind(window,"resize",this.onWindowChange),this.onWindowChange()}return Object.defineProperty(t.prototype,"mouseDown",{get:function(){return this._mouseDown},enumerable:!0,configurable:!0}),t.prototype.onMouseDown=function(){this._mouseDown=!0},t.prototype.onMouseButtonNegative=function(){this._mouseDown=!1},t.prototype.onWindowChange=function(){var t=this.canvas.getBoundingClientRect();this.canvasBoundingRect.left=t.left+this.canvas.clientLeft,this.canvasBoundingRect.top=t.top+this.canvas.clientTop},t.prototype.onMouseMove=function(t){this.mouseScreenPoint[0]=(t.clientX-this.canvasBoundingRect.left)/this.canvas.width,this.mouseScreenPoint[1]=1-(t.clientY-this.canvasBoundingRect.top)/this.canvas.height},t.prototype.release=function(){this.eventBinder.unbindAll()},t}();n.InputGrabber=a},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t){this.bindings=[],this.thisArg=t}return t.prototype.bind=function(t,n,r){var e={target:t,event:n,listener:r.bind(this.thisArg)};t.addEventListener(n,e.listener),this.bindings.push(e)},t.prototype.unbindAll=function(){this.bindings.forEach(function(t){return t.target.removeEventListener(t.event,t.listener)}),this.bindings.length=0},t}();n.EventBinder=e},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.generateUID=function(){return Math.random().toString(36).substr(2)}}]);
//# sourceMappingURL=bundle.js.map