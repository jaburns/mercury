!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.width=e,this.height=t,this.vals=new Array(e*t)}return e.prototype.write=function(e,t,r){this.vals[e+t*this.width]=r},e.prototype.at=function(e,t){return this.vals[e+t*this.width]},e.prototype.copyFrom=function(e){for(var t=0;t<this.width&&t<e.width;++t)for(var r=0;r<this.height&&r<e.height;++r)this.write(t,r,e.at(t,r))},e}();t.WriteGrid=n,t.safeOutOfBounds=function(e,t){return{width:e.width,height:e.height,at:function(r,n){return r<0||n<0||r>=e.width||n>=e.width?t:e.at(r,n)}}},t.GridTool={find:function(e,t){for(var r=0;r<e.width;++r)for(var n=0;n<e.height;++n)if(t(r,n,e.at(r,n)))return{x:r,y:n};return null},forEach:function(e,t){for(var r=0;r<e.width;++r)for(var n=0;n<e.height;++n)t(r,n,e.at(r,n))},map:function(e,t){for(var r=new n(e.width,e.height),a=0;a<e.width;++a)for(var o=0;o<e.height;++o)r.write(a,o,t(a,o,e.at(a,o)));return r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.V2={add:function(e,t){e.x+=t.x,e.y+=t.y},plus:function(e,t){return{x:e.x+t.x,y:e.y+t.y}},minus:function(e,t){return{x:e.x-t.x,y:e.y-t.y}},length:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},scaled:function(e,t){return{x:t*e.x,y:t*e.y}}},t.RectTool={area:function(e){return(e.xmax-e.xmin)*(e.ymax-e.ymin)}},t.smallestDifferenceRadians=function(e,t){return e%=2*Math.PI,t%=2*Math.PI,Math.abs(e-t)>Math.PI&&(e>0?e-=2*Math.PI:e+=2*Math.PI),e-t},t.findBounds=function(e){var t={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};return e.forEach(function(e){e.x<t.xmin&&(t.xmin=e.x),e.y<t.ymin&&(t.ymin=e.y),e.x>t.xmax&&(t.xmax=e.x),e.y>t.ymax&&(t.ymax=e.y)}),t}},function(e,t,r){var n=r(20).Symbol;e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loadShader=function(e,t){return fetch(t).then(function(e){if(!e.ok)throw new Error("HTTP error, status = "+e.status);return e.text()}).then(function(t){return function(e,t){var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,"#version 300 es\n    #define VERTEX\n    #define v2f out\n    "+t+"\n"),e.compileShader(r);var n=e.getShaderInfoLog(r);if(null===n||n.length>0)return n;var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,"#version 300 es\n    #define FRAGMENT\n    #define v2f in\n    precision highp float;\n    "+t+"\n"),e.compileShader(a);var o=e.getShaderInfoLog(a);if(null===o||o.length>0)return o;var i=e.createProgram();return e.attachShader(i,r),e.attachShader(i,a),e.linkProgram(i),i}(e,t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),a=r(10),o=r(5),i=r(12),u=r(1),f=r(13),l=function(e,t,r,n,a,o){if(t<0||r<0)return o;if(t>=e.width||r>=e.height)return o;var i=e.at(t,r);return i===a?o:i!==n?o:(e.write(t,r,a),o=l(e,t-1,r,n,a,++o),o=l(e,t+1,r,n,a,o),o=l(e,t,r-1,n,a,o),o=l(e,t,r+1,n,a,o))};t.generateCave=function(e){return t.generateCaveVerbose(e).cave},t.generateCaveVerbose=function(e){var t,r=a.runCellularAutomaton(75,75,e.seed,.48,5,4,40),s=n.GridTool.map(r,function(e,t,r){return r?-1:0}),c=function(e){for(var t=1,r=-1,a=0;;){var o=n.GridTool.find(e,function(e,t,r){return 0===r});if(null===o)return r;var i=l(e,o.x,o.y,0,t,0);i>a&&(a=i,r=t),t++}}(s),d=n.GridTool.map(s,function(e,t,r){return r!==c});t=d,n.GridTool.forEach(n.safeOutOfBounds(t,!0),function(e,r,n){n&&(!n||t.at(e-1,r)||t.at(e+1,r)||t.write(e+1,r,!0),!n||t.at(e,r-1)||t.at(e,r+1)||t.write(e,r+1,!0))});var h=o.markEdges(d),v=o.findContours(h,e.edgePointDist),x=v.contours.map(function(e,t){return{i:t,area:u.RectTool.area(u.findBounds(e))}}).sort(function(e,t){return t.area-e.area})[0].i,y=v.contours.map(function(t){return i.smoothCurve(t,e.curveQuality,e.curveBend)}),m=y[x].map(function(e,t){return{i:t,len:(e.x+1)*(e.x+1)+(e.y+1)*(e.y+1)}}).sort(function(e,t){return e.len-t.len})[0].i,g=y[x][m],p=y[x][0===m?y[x].length-1:m-1],E=Math.abs(g.y-p.y);y[x].splice(m,0,{x:-1,y:-1+E},{x:-1,y:1},{x:1,y:1},{x:1,y:-1},{x:-1,y:-1},{x:(g.x+p.x)/2,y:(g.y+p.y)/2});var b=y.map(f.triangulate);return y[x][m].y-=E,y[x][m+5].x=p.x,y[x][m+5].y=p.y,{cave:{edges:y,triangles:b},details:{automatonResult:r,coloredGrid:s,filledGrid:d,edgeMarkedGrid:h,findContoursResult:v,outerMostContourIndex:x,topLeftMostVertexIndex:m}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(0),o=r(1);t.markEdges=function(e){for(var t=a.GridTool.map(e,function(e,t,r){return{kind:r?"dirt":"air",normal:0}}),r=0;r<e.width;r++)for(var n=0;n<e.height;n++)if(e.at(r,n)){var o=r>0&&!e.at(r-1,n),i=r<e.width-2&&!e.at(r+1,n),u=n>0&&!e.at(r,n-1),f=n<e.height-2&&!e.at(r,n+1);if(o||i||u||f){var l=i&&f?45:f&&o?135:o&&u?-135:u&&i?-45:i?0:f?90:o?180:-90;t.write(r,n,{kind:"edge",normal:l})}}return t},function(e){e[e.Unwalked=0]="Unwalked",e[e.Walked=1]="Walked",e[e.WalkedImportant=2]="WalkedImportant"}(n=t.WalkedStatus||(t.WalkedStatus={})),t.findContours=function(e,t){var r=a.GridTool.map(new a.WriteGrid(e.width,e.height),function(e){return n.Unwalked}),o=[],i=0,f=null;do{null!==(f=u(r,e,t))&&f.length>2&&o.push(f)}while(null!=f&&i++<100);return{contours:o,walkMap:r}};var i=function(e,t){for(var r=100,n=0,a=0;a<t.length;++a){var i=t[a],u=Math.abs(o.smallestDifferenceRadians(i.normal*Math.PI/180,e.normal*Math.PI/180));u<r&&(r=u,n=a)}return t[n]},u=function(e,t,r){var o=function(e,t){for(var r=0;r<t.width;r++)for(var a=0;a<t.height;a++)if("edge"===t.at(r,a).kind&&e.at(r,a)===n.Unwalked)return{x:r,y:a};return null}(e,t);if(null===o)return null;t=a.safeOutOfBounds(t,{kind:"dirt",normal:0});var u=[],f=o.x,l=o.y,s=0,c={dx:0,dy:0,normal:0},d=n.Walked,h=[];do{h=[];for(var v=-1;v<=1;v++)for(var x=-1;x<=1;x++)0===v&&0===x||"edge"===t.at(f+v,l+x).kind&&e.at(f+v,l+x)===n.Unwalked&&h.push({dx:v,dy:x,normal:t.at(f+v,l+x).normal});if(h.length>0){var y=i(c,h);f+=y.dx,l+=y.dy;var m=n.Walked;if(y.normal!==c.normal){(0===r||(1===r&&0!=y.dx&&0!=y.dy||d!=n.WalkedImportant))&&(m=n.WalkedImportant)}m===n.WalkedImportant&&u.push({x:2*(f+.5)/t.width-1,y:2*(l+.5)/t.height-1}),e.write(f,l,m),d=m,c=y}}while(h.length>0&&s++<5e3);return u}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGB,t,r,0,e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0)}return e.prototype.release=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(this.texture),e.deleteFramebuffer(this.framebuffer)},e.prototype.releaseTexture=function(){var e=this.gl;return e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.framebuffer),this.texture},e}();t.FrameBufferTexture=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),a=r(14),o={"vector-caves":n.initPost,"page2-webgl":a.initPost};window.initPost=function(e){return o[e]()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),a=r(0),o=r(5),i=function(){var e=function(){var e=Math.floor(256*Math.random()).toString(16);return e.length<2&&(e="0"+e),e};return"#"+e()+e()+e()},u=[0,0,0,0,0,0,0,0,0,0].map(function(e){return i()});t.initPost=function(){var e,t,r=document.getElementById("first-canvas").getContext("2d"),f=document.getElementById("seed-slider"),l=document.getElementById("insurance-slider"),s=document.getElementById("curviness-slider"),c=document.getElementById("quality-slider"),d=document.getElementById("second-canvas").getContext("2d"),h=document.getElementById("third-canvas").getContext("2d"),v=document.getElementById("fourth-canvas").getContext("2d"),x=document.getElementById("fifth-canvas").getContext("2d"),y=document.getElementById("sixth-canvas").getContext("2d"),m=document.getElementById("seventh-canvas").getContext("2d"),g=document.getElementById("ninth-canvas").getContext("2d"),p=function(){var e={seed:parseInt(f.value),edgePointDist:parseInt(l.value),curveBend:2*parseFloat(s.value)/100,curveQuality:parseFloat(c.value)},t=n.generateCaveVerbose(e),p=t.cave,E=t.details;a.GridTool.forEach(E.automatonResult,function(e,t,n){r.fillStyle=n?"#000":"#FFF",r.fillRect(4*e,4*t,4,4)}),a.GridTool.forEach(E.coloredGrid,function(e,t,r){var n;d.fillStyle=(n=r)<0?"#000":u[n%u.length],d.fillRect(4*e,4*t,4,4)}),a.GridTool.forEach(E.filledGrid,function(e,t,r){h.fillStyle=r?"#000":"#FFF",h.fillRect(4*e,4*t,4,4)}),a.GridTool.forEach(E.edgeMarkedGrid,function(e,t,r){v.fillStyle="edge"===r.kind?function(e){var t=Math.cos(e*Math.PI/180),r=Math.sin(e*Math.PI/180),n=Math.round(15*(.5*t+.5)),a=Math.round(15*(.5*r+.5));return"#"+n.toString(16)+a.toString(16)+"f"}(r.normal):"air"===r.kind?"#655":"#77f",v.fillRect(4*e,4*t,4,4)});var b=E.findContoursResult;a.GridTool.forEach(b.walkMap,function(e,t,r){x.fillStyle=r===o.WalkedStatus.WalkedImportant?"#fff":r===o.WalkedStatus.Walked?"#333":"#000",x.fillRect(4*e,4*t,4,4),y.fillStyle=r===o.WalkedStatus.WalkedImportant?"#333":"#000",y.fillRect(9*e,9*t,9,9)});var R=function(e){return{x:337.5*(1+e.x),y:337.5*(1+e.y)}};b.contours.forEach(function(e,t){y.strokeStyle=t===E.outerMostContourIndex?"#f00":"#933",y.beginPath();var r=R(e[0]);y.moveTo(r.x,r.y);for(var n=1;n<e.length;++n){var a=R(e[n]);y.lineTo(a.x,a.y)}y.closePath(),y.stroke()}),m.strokeStyle="#0f0",m.fillStyle="#000",m.fillRect(0,0,675,675),p.edges.forEach(function(e,t){m.strokeStyle=t===E.outerMostContourIndex?"#0f0":"#393",m.beginPath();var r=R(e[0]);m.moveTo(r.x,r.y);for(var n=1;n<e.length;++n){var a=R(e[n]);m.lineTo(a.x,a.y)}m.closePath(),m.stroke()}),g.fillStyle="#000",g.fillRect(0,0,675,675),p.triangles.forEach(function(e,t){for(var r=function(r){g.fillStyle=i(),g.beginPath();var n=R(p.edges[t][e[r]]);g.moveTo(n.x,n.y),[1,2,0].forEach(function(n){var a=R(p.edges[t][e[r+n]]);g.lineTo(a.x,a.y)}),g.fill()},n=0;n<e.length-2;n+=3)r(n)})};e=["oninput","onchange"],t=p,[f,l,s,c].forEach(function(r){e.forEach(function(e){r[e]=t})}),p()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),a=r(0),o=function(e,t,r){for(var n=0,a=t-1;a<=t+1;++a)for(var o=r-1;o<=r+1;++o)a==t&&o==r||(a<1||o<1||a>=e.width-1||o>=e.height-1?n++:n+=e.at(a,o)?1:0);return n};t.runCellularAutomaton=function(e,t,r,i,u,f,l){for(var s=new a.WriteGrid(e,t),c=new a.WriteGrid(e,t),d=n.nextRandom01(r/101),h=0;h<e;++h)for(var v=0;v<t;++v){var x=0===h||0===v||h===e-1||v===t-1||d<i;s.write(h,v,x),c.write(h,v,x),d=n.nextRandom01(d)}for(var y=0;y<l;++y){for(h=1;h<e-1;++h)for(v=1;v<t-1;++v){var m=o(s,h,v);c.write(h,v,m>=(s.at(h,v)?f:u))}s.copyFrom(c)}return s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=4294967296;t.nextRandom01=function(e){return(1664525*Math.floor(e*n)+1013904223)%n/n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.smoothCurve=function(e,t,r){var a=[];t<1&&(t=1);for(var o=0;o<e.length;++o){var i=e[0==o?e.length-1:o-1],u=e[o],f=e[(o+1)%e.length],l=n.V2.length(n.V2.minus(i,u)),s=n.V2.length(n.V2.minus(u,f)),c=n.V2.scaled(n.V2.plus(i,u),.5),d=n.V2.scaled(n.V2.plus(u,f),.5),h=n.V2.scaled(n.V2.minus(c,d),r),v=n.V2.scaled(h,l/(l+s)),x=n.V2.scaled(h,-s/(l+s));a.push({pt:u,controlA:n.V2.plus(u,v),controlB:n.V2.plus(u,x)})}var y=1/t,m=[];for(o=0;o<a.length;++o){u=a[o],f=a[(o+1)%a.length];for(var g=0;g<1-y/2;g+=y){var p={x:0,y:0};n.V2.add(p,n.V2.scaled(u.pt,(1-g)*(1-g)*(1-g))),n.V2.add(p,n.V2.scaled(u.controlB,3*(1-g)*(1-g)*g)),n.V2.add(p,n.V2.scaled(f.controlA,3*(1-g)*g*g)),n.V2.add(p,n.V2.scaled(f.pt,g*g*g)),m.push(p)}}return m}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triangulate=function(e){var t=[],r=e.length;if(r<3)return t;var a=new Array(r);if(n(e)>0)for(var i=0;i<r;i++)a[i]=i;else for(i=0;i<r;i++)a[i]=r-1-i;var u=r,f=2*u;for(i=u-1;u>2;){if(f--<=0)return t;var l=i;u<=l&&(l=0),u<=(i=l+1)&&(i=0);var s=i+1;if(u<=s&&(s=0),o(e,l,i,s,u,a)){t.push(a[l]),t.push(a[i]),t.push(a[s]);for(var c=i,d=i+1;d<u;c++,d++)a[c]=a[d];f=2*--u}}return t};var n=function(e){for(var t=0,r=e.length-1,n=0;n<e.length;r=n++)t+=e[r].x*e[n].y-e[n].x*e[r].y;return t/2},a=function(e,t,r,n){var a=r.x-t.x,o=r.y-t.y,i=e.x-r.x,u=e.y-r.y,f=t.x-e.x,l=t.y-e.y,s=n.x-e.x,c=n.y-e.y,d=n.x-t.x,h=n.y-t.y,v=n.x-r.x,x=n.y-r.y;return a*h-o*d>=0&&i*x-u*v>=0&&f*c-l*s>=0},o=function(e,t,r,n,o,i){var u=e[i[t]],f=e[i[r]],l=e[i[n]];if((f.x-u.x)*(l.y-u.y)-(f.y-u.y)*(l.x-u.x)<1e-7)return!1;for(var s=0;s<o;s++)if(s!=t&&s!=r&&s!=n){var c=e[i[s]];if(a(u,f,l,c))return!1}return!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),a=r(15),o=r(7),i=r(29),u=r(30),f=function(e,t,r){return Promise.all([a.CaveRenderer.create(e,"shaders/flatWhite.glsl",r),i.BufferRenderer.create(e,"shaders/normals.glsl"),u.GaussianBlur.create(e,t,t),u.GaussianBlur.create(e,t,t)]).then(function(r){var n=r[0],a=r[1],i=r[2],u=r[3],f=new o.FrameBufferTexture(e,t,t);return e.bindFramebuffer(e.FRAMEBUFFER,f.framebuffer),e.viewport(0,0,t,t),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),n.draw(),i.run(f.texture,30),e.bindFramebuffer(e.FRAMEBUFFER,f.framebuffer),e.viewport(0,0,t,t),a.draw(i.resultTexture,function(e,r){e.uniform2f(e.getUniformLocation(r,"u_resolution"),t,t)}),u.run(f.texture,2),e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height),n.release(),a.release(),{depth:i.releaseTexture(),normal:u.releaseTexture()}})},l=function(e,t,r){Promise.all([i.BufferRenderer.create(r,"shaders/bufferCopy.glsl"),f(r,1024,e)]).then(function(e){var n=e[0],a=e[1];n.draw("depth"===t?a.depth:a.normal),n.release(),r.deleteTexture(a.depth),r.deleteTexture(a.normal)})};t.initPost=function(){var e=n.generateCave({seed:.1248,curveBend:.75,curveQuality:10,edgePointDist:2}),t=[0,1,2].map(function(e){return document.getElementById("canvas"+e).getContext("webgl2")});!function(e,t){Promise.all([a.CaveRenderer.create(t,"shaders/flatWhite.glsl",e)]).then(function(e){var r=e[0];t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),r.draw(),r.release()})}(e,t[0]),l(e,"depth",t[1]),l(e,"normal",t[2])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(3),o=function(e){return n(n(e.edges).map(function(e){return[e.x,e.y]}))},i=function(e){var t=0,r=[];return e.triangles.forEach(function(n,a){r=r.concat(n.map(function(e){return e+t})),t+=e.edges[a].length}),r},u=function(){function e(e,t,r){this.gl=e,this.shader=r,this.vao=e.createVertexArray(),e.bindVertexArray(this.vao),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o(t)),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0);var n=i(t);this.indexBufferLen=n.length,this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),e.STATIC_DRAW)}return e.create=function(t,r,n){return a.loadShader(t,r).then(function(r){return new e(t,n,r)})},e.prototype.draw=function(){var e=this.gl;e.bindVertexArray(this.vao),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.useProgram(this.shader),e.drawElements(e.TRIANGLES,this.indexBufferLen,e.UNSIGNED_SHORT,0)},e.prototype.release=function(){var e=this.gl;e.useProgram(null),e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteProgram(this.shader),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteVertexArray(this.vao)},e}();t.CaveRenderer=u},function(e,t,r){var n=r(17);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},function(e,t,r){var n=r(18),a=r(19);e.exports=function e(t,r,o,i,u){var f=-1,l=t.length;for(o||(o=a),u||(u=[]);++f<l;){var s=t[f];r>0&&o(s)?r>1?e(s,r-1,o,i,u):n(u,s):i||(u[u.length]=s)}return u}},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}},function(e,t,r){var n=r(2),a=r(23),o=r(28),i=n?n.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(i&&e&&e[i])}},function(e,t,r){var n=r(21),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(22))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(24),a=r(6),o=Object.prototype,i=o.hasOwnProperty,u=o.propertyIsEnumerable,f=n(function(){return arguments}())?n:function(e){return a(e)&&i.call(e,"callee")&&!u.call(e,"callee")};e.exports=f},function(e,t,r){var n=r(25),a=r(6),o="[object Arguments]";e.exports=function(e){return a(e)&&n(e)==o}},function(e,t,r){var n=r(2),a=r(26),o=r(27),i="[object Null]",u="[object Undefined]",f=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?u:i:f&&f in Object(e)?a(e):o(e)}},function(e,t,r){var n=r(2),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,u=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[u]=r:delete e[u]),a}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),a=function(){function e(e,t){this.gl=e,this.shader=t,this.vao=e.createVertexArray(),e.bindVertexArray(this.vao),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,-1,1,-1,1,1,-1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0)}return e.create=function(t,r){return n.loadShader(t,r).then(function(r){return new e(t,r)})},e.prototype.draw=function(e,t){var r=this.gl;r.bindVertexArray(this.vao),r.useProgram(this.shader),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,e);var n=r.getUniformLocation(this.shader,"u_tex");r.uniform1i(n,0),t&&t(r,this.shader),r.drawArrays(r.TRIANGLES,0,6)},e.prototype.release=function(){var e=this.gl;e.useProgram(null),e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteProgram(this.shader),e.deleteBuffer(this.vertexBuffer),e.deleteVertexArray(this.vao)},e}();t.BufferRenderer=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),a=r(29),o=function(){function e(e,t,r,a){this.gl=e,this.width=t,this.height=r,this.bufferRenderer=a,this.frameTex0=new n.FrameBufferTexture(e,t,r),this.frameTex1=new n.FrameBufferTexture(e,t,r)}return e.create=function(t,r,n){return a.BufferRenderer.create(t,"shaders/gaussianBlur.glsl").then(function(a){return new e(t,r,n,a)})},e.prototype.run=function(e,t){var r=this,n=this.gl;t<1&&(t=1);for(var a=0;a<t;++a)n.bindFramebuffer(n.FRAMEBUFFER,this.frameTex0.framebuffer),0===a&&n.viewport(0,0,this.width,this.height),this.bufferRenderer.draw(0===a?e:this.frameTex1.texture,function(e,t){e.uniform2f(e.getUniformLocation(t,"u_resolution"),r.width,r.height),e.uniform2f(e.getUniformLocation(t,"u_direction"),1,0)}),n.bindFramebuffer(n.FRAMEBUFFER,this.frameTex1.framebuffer),this.bufferRenderer.draw(this.frameTex0.texture,function(e,t){e.uniform2f(e.getUniformLocation(t,"u_resolution"),r.width,r.height),e.uniform2f(e.getUniformLocation(t,"u_direction"),0,1)})},Object.defineProperty(e.prototype,"resultTexture",{get:function(){return this.frameTex1.texture},enumerable:!0,configurable:!0}),e.prototype.release=function(){this.bufferRenderer.release(),this.frameTex0.release(),this.frameTex1.release()},e.prototype.releaseTexture=function(){return this.bufferRenderer.release(),this.frameTex0.release(),this.frameTex1.releaseTexture()},e}();t.GaussianBlur=o}]);
//# sourceMappingURL=bundle.js.map